{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _xlsx = _interopRequireDefault(require(\"xlsx\"));\n\nvar _Modal = _interopRequireDefault(require(\"../Modal\"));\n\nvar _getDataFromWorkbook = _interopRequireDefault(require(\"./helpers/getDataFromWorkbook\"));\n\nvar _getHeaderRowFromWorkbook = _interopRequireDefault(require(\"./helpers/getHeaderRowFromWorkbook\"));\n\nvar _getDataToImport = _interopRequireDefault(require(\"./helpers/getDataToImport\"));\n\nvar _isStepThreeNextButtonDisabled = _interopRequireDefault(require(\"./helpers/isStepThreeNextButtonDisabled\"));\n\nvar _footer = _interopRequireDefault(require(\"./footer\"));\n\nvar _getStepComponent = _interopRequireDefault(require(\"./helpers/getStepComponent\"));\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar stepNames = ['step-1', 'step-2', 'step-3', 'step-4'];\nvar modalTitleMap = {\n  'step-1': 'Whats do you want to do?',\n  'step-2': 'Select Data File',\n  'step-3': 'Assign Fields',\n  'step-4': 'Review and Start Import'\n};\nvar ADD_RECORDS = Symbol('add-records');\nvar MERGE_RECORDS = Symbol('merge-records');\nvar ADD_RECORDS_TYPE = 'add-records';\n/**\r\n * @category Experiences\r\n */\n\nfunction ImportRecordsFlow(props) {\n  var className = props.className,\n      style = props.style,\n      isOpen = props.isOpen,\n      onRequestClose = props.onRequestClose,\n      schema = props.schema,\n      onComplete = props.onComplete,\n      actionType = props.actionType;\n\n  var _useState = (0, _react.useState)(actionType === ADD_RECORDS_TYPE ? 1 : 0),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      currentStepIndex = _useState2[0],\n      setCurrentStepIndex = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(actionType === ADD_RECORDS_TYPE ? ADD_RECORDS_TYPE : ''),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      actionOption = _useState4[0],\n      setActionOption = _useState4[1];\n\n  var _useState5 = (0, _react.useState)('default'),\n      _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\n      matchField = _useState6[0],\n      setMatchField = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(''),\n      _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\n      fileName = _useState8[0],\n      setFileName = _useState8[1];\n\n  var _useState9 = (0, _react.useState)(''),\n      _useState10 = (0, _slicedToArray2[\"default\"])(_useState9, 2),\n      fileType = _useState10[0],\n      setFileType = _useState10[1];\n\n  var _useState11 = (0, _react.useState)(false),\n      _useState12 = (0, _slicedToArray2[\"default\"])(_useState11, 2),\n      isLoading = _useState12[0],\n      setIsLoading = _useState12[1];\n\n  var _useState13 = (0, _react.useState)(false),\n      _useState14 = (0, _slicedToArray2[\"default\"])(_useState13, 2),\n      hasFileSelected = _useState14[0],\n      setHasFileSelected = _useState14[1];\n\n  var _useState15 = (0, _react.useState)([]),\n      _useState16 = (0, _slicedToArray2[\"default\"])(_useState15, 2),\n      columns = _useState16[0],\n      setColumns = _useState16[1];\n\n  var _useState17 = (0, _react.useState)([]),\n      _useState18 = (0, _slicedToArray2[\"default\"])(_useState17, 2),\n      data = _useState18[0],\n      setData = _useState18[1];\n\n  var _useState19 = (0, _react.useState)({}),\n      _useState20 = (0, _slicedToArray2[\"default\"])(_useState19, 2),\n      fieldsMap = _useState20[0],\n      setFieldsMap = _useState20[1];\n\n  var _useState21 = (0, _react.useState)([]),\n      _useState22 = (0, _slicedToArray2[\"default\"])(_useState21, 2),\n      schemaFields = _useState22[0],\n      setSchemaFields = _useState22[1];\n\n  var currentStep = stepNames[currentStepIndex];\n  var StepComponent = (0, _getStepComponent[\"default\"])({\n    currentStep: currentStep\n  });\n\n  var removeFile = function removeFile() {\n    setHasFileSelected(false);\n    setFileName('');\n    setFileType('');\n    setData([]);\n    setColumns([]);\n    setFieldsMap({});\n  };\n\n  (0, _react.useEffect)(function () {\n    setSchemaFields(Object.keys(schema.attributes));\n  }, [schema.attributes]);\n  var prevIsOpen = (0, _react.useRef)(isOpen);\n  (0, _react.useEffect)(function () {\n    if (prevIsOpen.current && !isOpen) {\n      setCurrentStepIndex(actionType === ADD_RECORDS_TYPE ? 1 : 0);\n      removeFile();\n      setActionOption('');\n      setMatchField('default');\n    }\n\n    prevIsOpen.current = isOpen;\n  }, [isOpen, actionType]);\n\n  var getModalTitle = function getModalTitle() {\n    if (currentStepIndex === 1 && hasFileSelected) {\n      return 'Your File Preview';\n    }\n\n    return modalTitleMap[currentStep];\n  };\n\n  var goBackStep = function goBackStep() {\n    if (currentStepIndex > 0) {\n      var prevStepIndex = currentStepIndex - 1;\n      setCurrentStepIndex(prevStepIndex);\n    }\n  };\n\n  var goNextStep = function goNextStep() {\n    if (currentStepIndex === 3) {\n      onComplete((0, _getDataToImport[\"default\"])({\n        data: data,\n        fieldsMap: fieldsMap,\n        schema: schema,\n        actionOption: actionOption,\n        matchField: matchField\n      }));\n    }\n\n    if (currentStepIndex < stepNames.length - 1) {\n      var nextStepIndex = currentStepIndex + 1;\n      setCurrentStepIndex(nextStepIndex);\n    }\n  };\n\n  var isBackButtonDisabled = function isBackButtonDisabled() {\n    if (actionType === ADD_RECORDS_TYPE) {\n      return currentStepIndex === 1;\n    }\n\n    return currentStepIndex === 0;\n  };\n\n  var isNextButtonDisabled = function isNextButtonDisabled() {\n    if (currentStepIndex === 0) {\n      return !actionOption || actionOption === 'merge-records' && matchField === 'default';\n    }\n\n    if (currentStepIndex === 1) {\n      return !hasFileSelected || isLoading;\n    }\n\n    if (currentStepIndex === 2) {\n      return (0, _isStepThreeNextButtonDisabled[\"default\"])({\n        fieldsMap: fieldsMap,\n        attributes: schema.attributes,\n        matchField: matchField\n      });\n    }\n\n    return false;\n  };\n\n  var processFile = function processFile(file) {\n    var name = file.name,\n        type = file.type;\n    setFileName(name);\n    setFileType(type);\n    setIsLoading(true);\n    setHasFileSelected(true);\n    var reader = new FileReader();\n\n    reader.onload = function (event) {\n      var uInt8ArrayData = new Uint8Array(event.target.result);\n\n      var workbook = _xlsx[\"default\"].read(uInt8ArrayData, {\n        type: 'array',\n        raw: true\n      });\n\n      setColumns((0, _getHeaderRowFromWorkbook[\"default\"])(workbook));\n      setData((0, _getDataFromWorkbook[\"default\"])(workbook));\n      setIsLoading(false);\n    };\n\n    reader.readAsArrayBuffer(file);\n  };\n\n  var assignField = function assignField(databaseFieldToAssign, fileFieldsToAssign) {\n    setFieldsMap(_objectSpread(_objectSpread({}, fieldsMap), {}, (0, _defineProperty2[\"default\"])({}, databaseFieldToAssign, fileFieldsToAssign.join(','))));\n  };\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_Modal[\"default\"], {\n    className: className,\n    style: style,\n    title: getModalTitle(),\n    size: \"medium\",\n    isOpen: isOpen,\n    onRequestClose: onRequestClose,\n    footer: /*#__PURE__*/_react[\"default\"].createElement(_footer[\"default\"], {\n      onBack: goBackStep,\n      onNext: goNextStep,\n      currentStep: currentStep,\n      isBackButtonDisabled: isBackButtonDisabled(),\n      isNextButtonDisabled: isNextButtonDisabled(),\n      actionType: actionType\n    })\n  }, /*#__PURE__*/_react[\"default\"].createElement(StepComponent, {\n    schemaFields: schemaFields,\n    attributes: schema.attributes,\n    actionOption: actionOption,\n    onChangeAction: setActionOption,\n    matchField: matchField,\n    onChangeMatchField: setMatchField,\n    onProcessFile: processFile,\n    fileName: fileName,\n    fileType: fileType,\n    isLoading: isLoading,\n    hasFileSelected: hasFileSelected,\n    columns: columns,\n    data: data,\n    onRemoveFile: removeFile,\n    onAssignField: assignField,\n    fieldsMap: fieldsMap\n  }));\n}\n\nImportRecordsFlow.propTypes = {\n  /** The schema represent the structure necessary for import data from a file to a database.\r\n   *  Collection is meant to represent where in database the data will be stored.\r\n   *  Attributes are the field to map with the file column headers */\n  schema: _propTypes[\"default\"].shape({\n    collection: _propTypes[\"default\"].string,\n    attributes: _propTypes[\"default\"].object\n  }),\n\n  /** Controls whether the ImportRecordsFlow modal is opened or not.\r\n   * If true, the modal is open. */\n  isOpen: _propTypes[\"default\"].bool,\n\n  /** The action triggered when the component request to close\r\n   *  (e.g click close button, press esc key or click outside the modal). */\n  onRequestClose: _propTypes[\"default\"].func,\n\n  /** The action triggered when all flow steps are completed. */\n  onComplete: _propTypes[\"default\"].func,\n\n  /** The action type to use. When set to \"add-records\" it will use this type and start the flow in the second step. */\n  actionType: _propTypes[\"default\"].oneOf(['add-records']),\n\n  /** A CSS class for the outer element, in addition to the component's base classes. */\n  className: _propTypes[\"default\"].string,\n\n  /** An object with custom style applied to the outer element. */\n  style: _propTypes[\"default\"].object\n};\nImportRecordsFlow.defaultProps = {\n  className: undefined,\n  style: undefined,\n  schema: {\n    attributes: {}\n  },\n  isOpen: false,\n  onRequestClose: function onRequestClose() {},\n  onComplete: function onComplete() {},\n  actionType: undefined\n};\nImportRecordsFlow.MERGE_RECORDS = MERGE_RECORDS;\nImportRecordsFlow.ADD_RECORDS = ADD_RECORDS;\nvar _default = ImportRecordsFlow;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["F:/PorzotokFrontend/node_modules/react-rainbow-components/components/ImportRecordsFlow/index.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","_defineProperty2","_slicedToArray2","_react","_propTypes","_xlsx","_Modal","_getDataFromWorkbook","_getHeaderRowFromWorkbook","_getDataToImport","_isStepThreeNextButtonDisabled","_footer","_getStepComponent","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","stepNames","modalTitleMap","ADD_RECORDS","Symbol","MERGE_RECORDS","ADD_RECORDS_TYPE","ImportRecordsFlow","props","className","style","isOpen","onRequestClose","schema","onComplete","actionType","_useState","useState","_useState2","currentStepIndex","setCurrentStepIndex","_useState3","_useState4","actionOption","setActionOption","_useState5","_useState6","matchField","setMatchField","_useState7","_useState8","fileName","setFileName","_useState9","_useState10","fileType","setFileType","_useState11","_useState12","isLoading","setIsLoading","_useState13","_useState14","hasFileSelected","setHasFileSelected","_useState15","_useState16","columns","setColumns","_useState17","_useState18","data","setData","_useState19","_useState20","fieldsMap","setFieldsMap","_useState21","_useState22","schemaFields","setSchemaFields","currentStep","StepComponent","removeFile","useEffect","attributes","prevIsOpen","useRef","current","getModalTitle","goBackStep","prevStepIndex","goNextStep","nextStepIndex","isBackButtonDisabled","isNextButtonDisabled","processFile","file","name","type","reader","FileReader","onload","event","uInt8ArrayData","Uint8Array","result","workbook","read","raw","readAsArrayBuffer","assignField","databaseFieldToAssign","fileFieldsToAssign","join","createElement","title","size","footer","onBack","onNext","onChangeAction","onChangeMatchField","onProcessFile","onRemoveFile","onAssignField","propTypes","shape","collection","string","bool","func","oneOf","defaultProps","undefined","_default"],"mappings":"AAAA;;AAEA,IAAIA,uBAAuB,GAAGC,OAAO,CAAC,+CAAD,CAArC;;AAEA,IAAIC,sBAAsB,GAAGD,OAAO,CAAC,8CAAD,CAApC;;AAEAE,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAAC,SAAD,CAAP,GAAqB,KAAK,CAA1B;;AAEA,IAAIE,gBAAgB,GAAGL,sBAAsB,CAACD,OAAO,CAAC,uCAAD,CAAR,CAA7C;;AAEA,IAAIO,eAAe,GAAGN,sBAAsB,CAACD,OAAO,CAAC,sCAAD,CAAR,CAA5C;;AAEA,IAAIQ,MAAM,GAAGT,uBAAuB,CAACC,OAAO,CAAC,OAAD,CAAR,CAApC;;AAEA,IAAIS,UAAU,GAAGR,sBAAsB,CAACD,OAAO,CAAC,YAAD,CAAR,CAAvC;;AAEA,IAAIU,KAAK,GAAGT,sBAAsB,CAACD,OAAO,CAAC,MAAD,CAAR,CAAlC;;AAEA,IAAIW,MAAM,GAAGV,sBAAsB,CAACD,OAAO,CAAC,UAAD,CAAR,CAAnC;;AAEA,IAAIY,oBAAoB,GAAGX,sBAAsB,CAACD,OAAO,CAAC,+BAAD,CAAR,CAAjD;;AAEA,IAAIa,yBAAyB,GAAGZ,sBAAsB,CAACD,OAAO,CAAC,oCAAD,CAAR,CAAtD;;AAEA,IAAIc,gBAAgB,GAAGb,sBAAsB,CAACD,OAAO,CAAC,2BAAD,CAAR,CAA7C;;AAEA,IAAIe,8BAA8B,GAAGd,sBAAsB,CAACD,OAAO,CAAC,yCAAD,CAAR,CAA3D;;AAEA,IAAIgB,OAAO,GAAGf,sBAAsB,CAACD,OAAO,CAAC,UAAD,CAAR,CAApC;;AAEA,IAAIiB,iBAAiB,GAAGhB,sBAAsB,CAACD,OAAO,CAAC,4BAAD,CAAR,CAA9C;;AAEA,SAASkB,OAAT,CAAiBC,MAAjB,EAAyBC,cAAzB,EAAyC;AAAE,MAAIC,IAAI,GAAGnB,MAAM,CAACmB,IAAP,CAAYF,MAAZ,CAAX;;AAAgC,MAAIjB,MAAM,CAACoB,qBAAX,EAAkC;AAAE,QAAIC,OAAO,GAAGrB,MAAM,CAACoB,qBAAP,CAA6BH,MAA7B,CAAd;AAAoD,QAAIC,cAAJ,EAAoBG,OAAO,GAAGA,OAAO,CAACC,MAAR,CAAe,UAAUC,GAAV,EAAe;AAAE,aAAOvB,MAAM,CAACwB,wBAAP,CAAgCP,MAAhC,EAAwCM,GAAxC,EAA6CE,UAApD;AAAiE,KAAjG,CAAV;AAA8GN,IAAAA,IAAI,CAACO,IAAL,CAAUC,KAAV,CAAgBR,IAAhB,EAAsBE,OAAtB;AAAiC;;AAAC,SAAOF,IAAP;AAAc;;AAErV,SAASS,aAAT,CAAuBC,MAAvB,EAA+B;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAT,IAAgB,IAAhB,GAAuBC,SAAS,CAACD,CAAD,CAAhC,GAAsC,EAAnD;;AAAuD,QAAIA,CAAC,GAAG,CAAR,EAAW;AAAEd,MAAAA,OAAO,CAAChB,MAAM,CAACiC,MAAD,CAAP,EAAiB,IAAjB,CAAP,CAA8BC,OAA9B,CAAsC,UAAUC,GAAV,EAAe;AAAE,SAAC,GAAG/B,gBAAgB,CAAC,SAAD,CAApB,EAAiCyB,MAAjC,EAAyCM,GAAzC,EAA8CF,MAAM,CAACE,GAAD,CAApD;AAA6D,OAApH;AAAwH,KAArI,MAA2I,IAAInC,MAAM,CAACoC,yBAAX,EAAsC;AAAEpC,MAAAA,MAAM,CAACqC,gBAAP,CAAwBR,MAAxB,EAAgC7B,MAAM,CAACoC,yBAAP,CAAiCH,MAAjC,CAAhC;AAA4E,KAApH,MAA0H;AAAEjB,MAAAA,OAAO,CAAChB,MAAM,CAACiC,MAAD,CAAP,CAAP,CAAwBC,OAAxB,CAAgC,UAAUC,GAAV,EAAe;AAAEnC,QAAAA,MAAM,CAACC,cAAP,CAAsB4B,MAAtB,EAA8BM,GAA9B,EAAmCnC,MAAM,CAACwB,wBAAP,CAAgCS,MAAhC,EAAwCE,GAAxC,CAAnC;AAAmF,OAApI;AAAwI;AAAE;;AAAC,SAAON,MAAP;AAAgB;;AAEviB,IAAIS,SAAS,GAAG,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,CAAhB;AACA,IAAIC,aAAa,GAAG;AAClB,YAAU,0BADQ;AAElB,YAAU,kBAFQ;AAGlB,YAAU,eAHQ;AAIlB,YAAU;AAJQ,CAApB;AAMA,IAAIC,WAAW,GAAGC,MAAM,CAAC,aAAD,CAAxB;AACA,IAAIC,aAAa,GAAGD,MAAM,CAAC,eAAD,CAA1B;AACA,IAAIE,gBAAgB,GAAG,aAAvB;AACA;AACA;AACA;;AAEA,SAASC,iBAAT,CAA2BC,KAA3B,EAAkC;AAChC,MAAIC,SAAS,GAAGD,KAAK,CAACC,SAAtB;AAAA,MACIC,KAAK,GAAGF,KAAK,CAACE,KADlB;AAAA,MAEIC,MAAM,GAAGH,KAAK,CAACG,MAFnB;AAAA,MAGIC,cAAc,GAAGJ,KAAK,CAACI,cAH3B;AAAA,MAIIC,MAAM,GAAGL,KAAK,CAACK,MAJnB;AAAA,MAKIC,UAAU,GAAGN,KAAK,CAACM,UALvB;AAAA,MAMIC,UAAU,GAAGP,KAAK,CAACO,UANvB;;AAQA,MAAIC,SAAS,GAAG,CAAC,GAAG/C,MAAM,CAACgD,QAAX,EAAqBF,UAAU,KAAKT,gBAAf,GAAkC,CAAlC,GAAsC,CAA3D,CAAhB;AAAA,MACIY,UAAU,GAAG,CAAC,GAAGlD,eAAe,CAAC,SAAD,CAAnB,EAAgCgD,SAAhC,EAA2C,CAA3C,CADjB;AAAA,MAEIG,gBAAgB,GAAGD,UAAU,CAAC,CAAD,CAFjC;AAAA,MAGIE,mBAAmB,GAAGF,UAAU,CAAC,CAAD,CAHpC;;AAKA,MAAIG,UAAU,GAAG,CAAC,GAAGpD,MAAM,CAACgD,QAAX,EAAqBF,UAAU,KAAKT,gBAAf,GAAkCA,gBAAlC,GAAqD,EAA1E,CAAjB;AAAA,MACIgB,UAAU,GAAG,CAAC,GAAGtD,eAAe,CAAC,SAAD,CAAnB,EAAgCqD,UAAhC,EAA4C,CAA5C,CADjB;AAAA,MAEIE,YAAY,GAAGD,UAAU,CAAC,CAAD,CAF7B;AAAA,MAGIE,eAAe,GAAGF,UAAU,CAAC,CAAD,CAHhC;;AAKA,MAAIG,UAAU,GAAG,CAAC,GAAGxD,MAAM,CAACgD,QAAX,EAAqB,SAArB,CAAjB;AAAA,MACIS,UAAU,GAAG,CAAC,GAAG1D,eAAe,CAAC,SAAD,CAAnB,EAAgCyD,UAAhC,EAA4C,CAA5C,CADjB;AAAA,MAEIE,UAAU,GAAGD,UAAU,CAAC,CAAD,CAF3B;AAAA,MAGIE,aAAa,GAAGF,UAAU,CAAC,CAAD,CAH9B;;AAKA,MAAIG,UAAU,GAAG,CAAC,GAAG5D,MAAM,CAACgD,QAAX,EAAqB,EAArB,CAAjB;AAAA,MACIa,UAAU,GAAG,CAAC,GAAG9D,eAAe,CAAC,SAAD,CAAnB,EAAgC6D,UAAhC,EAA4C,CAA5C,CADjB;AAAA,MAEIE,QAAQ,GAAGD,UAAU,CAAC,CAAD,CAFzB;AAAA,MAGIE,WAAW,GAAGF,UAAU,CAAC,CAAD,CAH5B;;AAKA,MAAIG,UAAU,GAAG,CAAC,GAAGhE,MAAM,CAACgD,QAAX,EAAqB,EAArB,CAAjB;AAAA,MACIiB,WAAW,GAAG,CAAC,GAAGlE,eAAe,CAAC,SAAD,CAAnB,EAAgCiE,UAAhC,EAA4C,CAA5C,CADlB;AAAA,MAEIE,QAAQ,GAAGD,WAAW,CAAC,CAAD,CAF1B;AAAA,MAGIE,WAAW,GAAGF,WAAW,CAAC,CAAD,CAH7B;;AAKA,MAAIG,WAAW,GAAG,CAAC,GAAGpE,MAAM,CAACgD,QAAX,EAAqB,KAArB,CAAlB;AAAA,MACIqB,WAAW,GAAG,CAAC,GAAGtE,eAAe,CAAC,SAAD,CAAnB,EAAgCqE,WAAhC,EAA6C,CAA7C,CADlB;AAAA,MAEIE,SAAS,GAAGD,WAAW,CAAC,CAAD,CAF3B;AAAA,MAGIE,YAAY,GAAGF,WAAW,CAAC,CAAD,CAH9B;;AAKA,MAAIG,WAAW,GAAG,CAAC,GAAGxE,MAAM,CAACgD,QAAX,EAAqB,KAArB,CAAlB;AAAA,MACIyB,WAAW,GAAG,CAAC,GAAG1E,eAAe,CAAC,SAAD,CAAnB,EAAgCyE,WAAhC,EAA6C,CAA7C,CADlB;AAAA,MAEIE,eAAe,GAAGD,WAAW,CAAC,CAAD,CAFjC;AAAA,MAGIE,kBAAkB,GAAGF,WAAW,CAAC,CAAD,CAHpC;;AAKA,MAAIG,WAAW,GAAG,CAAC,GAAG5E,MAAM,CAACgD,QAAX,EAAqB,EAArB,CAAlB;AAAA,MACI6B,WAAW,GAAG,CAAC,GAAG9E,eAAe,CAAC,SAAD,CAAnB,EAAgC6E,WAAhC,EAA6C,CAA7C,CADlB;AAAA,MAEIE,OAAO,GAAGD,WAAW,CAAC,CAAD,CAFzB;AAAA,MAGIE,UAAU,GAAGF,WAAW,CAAC,CAAD,CAH5B;;AAKA,MAAIG,WAAW,GAAG,CAAC,GAAGhF,MAAM,CAACgD,QAAX,EAAqB,EAArB,CAAlB;AAAA,MACIiC,WAAW,GAAG,CAAC,GAAGlF,eAAe,CAAC,SAAD,CAAnB,EAAgCiF,WAAhC,EAA6C,CAA7C,CADlB;AAAA,MAEIE,IAAI,GAAGD,WAAW,CAAC,CAAD,CAFtB;AAAA,MAGIE,OAAO,GAAGF,WAAW,CAAC,CAAD,CAHzB;;AAKA,MAAIG,WAAW,GAAG,CAAC,GAAGpF,MAAM,CAACgD,QAAX,EAAqB,EAArB,CAAlB;AAAA,MACIqC,WAAW,GAAG,CAAC,GAAGtF,eAAe,CAAC,SAAD,CAAnB,EAAgCqF,WAAhC,EAA6C,CAA7C,CADlB;AAAA,MAEIE,SAAS,GAAGD,WAAW,CAAC,CAAD,CAF3B;AAAA,MAGIE,YAAY,GAAGF,WAAW,CAAC,CAAD,CAH9B;;AAKA,MAAIG,WAAW,GAAG,CAAC,GAAGxF,MAAM,CAACgD,QAAX,EAAqB,EAArB,CAAlB;AAAA,MACIyC,WAAW,GAAG,CAAC,GAAG1F,eAAe,CAAC,SAAD,CAAnB,EAAgCyF,WAAhC,EAA6C,CAA7C,CADlB;AAAA,MAEIE,YAAY,GAAGD,WAAW,CAAC,CAAD,CAF9B;AAAA,MAGIE,eAAe,GAAGF,WAAW,CAAC,CAAD,CAHjC;;AAKA,MAAIG,WAAW,GAAG5D,SAAS,CAACkB,gBAAD,CAA3B;AACA,MAAI2C,aAAa,GAAG,CAAC,GAAGpF,iBAAiB,CAAC,SAAD,CAArB,EAAkC;AACpDmF,IAAAA,WAAW,EAAEA;AADuC,GAAlC,CAApB;;AAIA,MAAIE,UAAU,GAAG,SAASA,UAAT,GAAsB;AACrCnB,IAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACAZ,IAAAA,WAAW,CAAC,EAAD,CAAX;AACAI,IAAAA,WAAW,CAAC,EAAD,CAAX;AACAgB,IAAAA,OAAO,CAAC,EAAD,CAAP;AACAJ,IAAAA,UAAU,CAAC,EAAD,CAAV;AACAQ,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACD,GAPD;;AASA,GAAC,GAAGvF,MAAM,CAAC+F,SAAX,EAAsB,YAAY;AAChCJ,IAAAA,eAAe,CAACjG,MAAM,CAACmB,IAAP,CAAY+B,MAAM,CAACoD,UAAnB,CAAD,CAAf;AACD,GAFD,EAEG,CAACpD,MAAM,CAACoD,UAAR,CAFH;AAGA,MAAIC,UAAU,GAAG,CAAC,GAAGjG,MAAM,CAACkG,MAAX,EAAmBxD,MAAnB,CAAjB;AACA,GAAC,GAAG1C,MAAM,CAAC+F,SAAX,EAAsB,YAAY;AAChC,QAAIE,UAAU,CAACE,OAAX,IAAsB,CAACzD,MAA3B,EAAmC;AACjCS,MAAAA,mBAAmB,CAACL,UAAU,KAAKT,gBAAf,GAAkC,CAAlC,GAAsC,CAAvC,CAAnB;AACAyD,MAAAA,UAAU;AACVvC,MAAAA,eAAe,CAAC,EAAD,CAAf;AACAI,MAAAA,aAAa,CAAC,SAAD,CAAb;AACD;;AAEDsC,IAAAA,UAAU,CAACE,OAAX,GAAqBzD,MAArB;AACD,GATD,EASG,CAACA,MAAD,EAASI,UAAT,CATH;;AAWA,MAAIsD,aAAa,GAAG,SAASA,aAAT,GAAyB;AAC3C,QAAIlD,gBAAgB,KAAK,CAArB,IAA0BwB,eAA9B,EAA+C;AAC7C,aAAO,mBAAP;AACD;;AAED,WAAOzC,aAAa,CAAC2D,WAAD,CAApB;AACD,GAND;;AAQA,MAAIS,UAAU,GAAG,SAASA,UAAT,GAAsB;AACrC,QAAInD,gBAAgB,GAAG,CAAvB,EAA0B;AACxB,UAAIoD,aAAa,GAAGpD,gBAAgB,GAAG,CAAvC;AACAC,MAAAA,mBAAmB,CAACmD,aAAD,CAAnB;AACD;AACF,GALD;;AAOA,MAAIC,UAAU,GAAG,SAASA,UAAT,GAAsB;AACrC,QAAIrD,gBAAgB,KAAK,CAAzB,EAA4B;AAC1BL,MAAAA,UAAU,CAAC,CAAC,GAAGvC,gBAAgB,CAAC,SAAD,CAApB,EAAiC;AAC1C4E,QAAAA,IAAI,EAAEA,IADoC;AAE1CI,QAAAA,SAAS,EAAEA,SAF+B;AAG1C1C,QAAAA,MAAM,EAAEA,MAHkC;AAI1CU,QAAAA,YAAY,EAAEA,YAJ4B;AAK1CI,QAAAA,UAAU,EAAEA;AAL8B,OAAjC,CAAD,CAAV;AAOD;;AAED,QAAIR,gBAAgB,GAAGlB,SAAS,CAACN,MAAV,GAAmB,CAA1C,EAA6C;AAC3C,UAAI8E,aAAa,GAAGtD,gBAAgB,GAAG,CAAvC;AACAC,MAAAA,mBAAmB,CAACqD,aAAD,CAAnB;AACD;AACF,GAfD;;AAiBA,MAAIC,oBAAoB,GAAG,SAASA,oBAAT,GAAgC;AACzD,QAAI3D,UAAU,KAAKT,gBAAnB,EAAqC;AACnC,aAAOa,gBAAgB,KAAK,CAA5B;AACD;;AAED,WAAOA,gBAAgB,KAAK,CAA5B;AACD,GAND;;AAQA,MAAIwD,oBAAoB,GAAG,SAASA,oBAAT,GAAgC;AACzD,QAAIxD,gBAAgB,KAAK,CAAzB,EAA4B;AAC1B,aAAO,CAACI,YAAD,IAAiBA,YAAY,KAAK,eAAjB,IAAoCI,UAAU,KAAK,SAA3E;AACD;;AAED,QAAIR,gBAAgB,KAAK,CAAzB,EAA4B;AAC1B,aAAO,CAACwB,eAAD,IAAoBJ,SAA3B;AACD;;AAED,QAAIpB,gBAAgB,KAAK,CAAzB,EAA4B;AAC1B,aAAO,CAAC,GAAG3C,8BAA8B,CAAC,SAAD,CAAlC,EAA+C;AACpD+E,QAAAA,SAAS,EAAEA,SADyC;AAEpDU,QAAAA,UAAU,EAAEpD,MAAM,CAACoD,UAFiC;AAGpDtC,QAAAA,UAAU,EAAEA;AAHwC,OAA/C,CAAP;AAKD;;AAED,WAAO,KAAP;AACD,GAlBD;;AAoBA,MAAIiD,WAAW,GAAG,SAASA,WAAT,CAAqBC,IAArB,EAA2B;AAC3C,QAAIC,IAAI,GAAGD,IAAI,CAACC,IAAhB;AAAA,QACIC,IAAI,GAAGF,IAAI,CAACE,IADhB;AAEA/C,IAAAA,WAAW,CAAC8C,IAAD,CAAX;AACA1C,IAAAA,WAAW,CAAC2C,IAAD,CAAX;AACAvC,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAI,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACA,QAAIoC,MAAM,GAAG,IAAIC,UAAJ,EAAb;;AAEAD,IAAAA,MAAM,CAACE,MAAP,GAAgB,UAAUC,KAAV,EAAiB;AAC/B,UAAIC,cAAc,GAAG,IAAIC,UAAJ,CAAeF,KAAK,CAAC3F,MAAN,CAAa8F,MAA5B,CAArB;;AAEA,UAAIC,QAAQ,GAAGpH,KAAK,CAAC,SAAD,CAAL,CAAiBqH,IAAjB,CAAsBJ,cAAtB,EAAsC;AACnDL,QAAAA,IAAI,EAAE,OAD6C;AAEnDU,QAAAA,GAAG,EAAE;AAF8C,OAAtC,CAAf;;AAKAzC,MAAAA,UAAU,CAAC,CAAC,GAAG1E,yBAAyB,CAAC,SAAD,CAA7B,EAA0CiH,QAA1C,CAAD,CAAV;AACAnC,MAAAA,OAAO,CAAC,CAAC,GAAG/E,oBAAoB,CAAC,SAAD,CAAxB,EAAqCkH,QAArC,CAAD,CAAP;AACA/C,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KAXD;;AAaAwC,IAAAA,MAAM,CAACU,iBAAP,CAAyBb,IAAzB;AACD,GAvBD;;AAyBA,MAAIc,WAAW,GAAG,SAASA,WAAT,CAAqBC,qBAArB,EAA4CC,kBAA5C,EAAgE;AAChFrC,IAAAA,YAAY,CAACjE,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKgE,SAAL,CAAd,EAA+B,EAA/B,EAAmC,CAAC,GAAGxF,gBAAgB,CAAC,SAAD,CAApB,EAAiC,EAAjC,EAAqC6H,qBAArC,EAA4DC,kBAAkB,CAACC,IAAnB,CAAwB,GAAxB,CAA5D,CAAnC,CAAd,CAAZ;AACD,GAFD;;AAIA,SAAO,aAAa7H,MAAM,CAAC,SAAD,CAAN,CAAkB8H,aAAlB,CAAgC3H,MAAM,CAAC,SAAD,CAAtC,EAAmD;AACrEqC,IAAAA,SAAS,EAAEA,SAD0D;AAErEC,IAAAA,KAAK,EAAEA,KAF8D;AAGrEsF,IAAAA,KAAK,EAAE3B,aAAa,EAHiD;AAIrE4B,IAAAA,IAAI,EAAE,QAJ+D;AAKrEtF,IAAAA,MAAM,EAAEA,MAL6D;AAMrEC,IAAAA,cAAc,EAAEA,cANqD;AAOrEsF,IAAAA,MAAM,EAAE,aAAajI,MAAM,CAAC,SAAD,CAAN,CAAkB8H,aAAlB,CAAgCtH,OAAO,CAAC,SAAD,CAAvC,EAAoD;AACvE0H,MAAAA,MAAM,EAAE7B,UAD+D;AAEvE8B,MAAAA,MAAM,EAAE5B,UAF+D;AAGvEX,MAAAA,WAAW,EAAEA,WAH0D;AAIvEa,MAAAA,oBAAoB,EAAEA,oBAAoB,EAJ6B;AAKvEC,MAAAA,oBAAoB,EAAEA,oBAAoB,EAL6B;AAMvE5D,MAAAA,UAAU,EAAEA;AAN2D,KAApD;AAPgD,GAAnD,EAejB,aAAa9C,MAAM,CAAC,SAAD,CAAN,CAAkB8H,aAAlB,CAAgCjC,aAAhC,EAA+C;AAC7DH,IAAAA,YAAY,EAAEA,YAD+C;AAE7DM,IAAAA,UAAU,EAAEpD,MAAM,CAACoD,UAF0C;AAG7D1C,IAAAA,YAAY,EAAEA,YAH+C;AAI7D8E,IAAAA,cAAc,EAAE7E,eAJ6C;AAK7DG,IAAAA,UAAU,EAAEA,UALiD;AAM7D2E,IAAAA,kBAAkB,EAAE1E,aANyC;AAO7D2E,IAAAA,aAAa,EAAE3B,WAP8C;AAQ7D7C,IAAAA,QAAQ,EAAEA,QARmD;AAS7DI,IAAAA,QAAQ,EAAEA,QATmD;AAU7DI,IAAAA,SAAS,EAAEA,SAVkD;AAW7DI,IAAAA,eAAe,EAAEA,eAX4C;AAY7DI,IAAAA,OAAO,EAAEA,OAZoD;AAa7DI,IAAAA,IAAI,EAAEA,IAbuD;AAc7DqD,IAAAA,YAAY,EAAEzC,UAd+C;AAe7D0C,IAAAA,aAAa,EAAEd,WAf8C;AAgB7DpC,IAAAA,SAAS,EAAEA;AAhBkD,GAA/C,CAfI,CAApB;AAiCD;;AAEDhD,iBAAiB,CAACmG,SAAlB,GAA8B;AAC5B;AACF;AACA;AACE7F,EAAAA,MAAM,EAAE3C,UAAU,CAAC,SAAD,CAAV,CAAsByI,KAAtB,CAA4B;AAClCC,IAAAA,UAAU,EAAE1I,UAAU,CAAC,SAAD,CAAV,CAAsB2I,MADA;AAElC5C,IAAAA,UAAU,EAAE/F,UAAU,CAAC,SAAD,CAAV,CAAsBU;AAFA,GAA5B,CAJoB;;AAS5B;AACF;AACE+B,EAAAA,MAAM,EAAEzC,UAAU,CAAC,SAAD,CAAV,CAAsB4I,IAXF;;AAa5B;AACF;AACElG,EAAAA,cAAc,EAAE1C,UAAU,CAAC,SAAD,CAAV,CAAsB6I,IAfV;;AAiB5B;AACAjG,EAAAA,UAAU,EAAE5C,UAAU,CAAC,SAAD,CAAV,CAAsB6I,IAlBN;;AAoB5B;AACAhG,EAAAA,UAAU,EAAE7C,UAAU,CAAC,SAAD,CAAV,CAAsB8I,KAAtB,CAA4B,CAAC,aAAD,CAA5B,CArBgB;;AAuB5B;AACAvG,EAAAA,SAAS,EAAEvC,UAAU,CAAC,SAAD,CAAV,CAAsB2I,MAxBL;;AA0B5B;AACAnG,EAAAA,KAAK,EAAExC,UAAU,CAAC,SAAD,CAAV,CAAsBU;AA3BD,CAA9B;AA6BA2B,iBAAiB,CAAC0G,YAAlB,GAAiC;AAC/BxG,EAAAA,SAAS,EAAEyG,SADoB;AAE/BxG,EAAAA,KAAK,EAAEwG,SAFwB;AAG/BrG,EAAAA,MAAM,EAAE;AACNoD,IAAAA,UAAU,EAAE;AADN,GAHuB;AAM/BtD,EAAAA,MAAM,EAAE,KANuB;AAO/BC,EAAAA,cAAc,EAAE,SAASA,cAAT,GAA0B,CAAE,CAPb;AAQ/BE,EAAAA,UAAU,EAAE,SAASA,UAAT,GAAsB,CAAE,CARL;AAS/BC,EAAAA,UAAU,EAAEmG;AATmB,CAAjC;AAWA3G,iBAAiB,CAACF,aAAlB,GAAkCA,aAAlC;AACAE,iBAAiB,CAACJ,WAAlB,GAAgCA,WAAhC;AACA,IAAIgH,QAAQ,GAAG5G,iBAAf;AACA1C,OAAO,CAAC,SAAD,CAAP,GAAqBsJ,QAArB","sourcesContent":["\"use strict\";\r\n\r\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\r\n\r\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports[\"default\"] = void 0;\r\n\r\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\r\n\r\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\r\n\r\nvar _react = _interopRequireWildcard(require(\"react\"));\r\n\r\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\r\n\r\nvar _xlsx = _interopRequireDefault(require(\"xlsx\"));\r\n\r\nvar _Modal = _interopRequireDefault(require(\"../Modal\"));\r\n\r\nvar _getDataFromWorkbook = _interopRequireDefault(require(\"./helpers/getDataFromWorkbook\"));\r\n\r\nvar _getHeaderRowFromWorkbook = _interopRequireDefault(require(\"./helpers/getHeaderRowFromWorkbook\"));\r\n\r\nvar _getDataToImport = _interopRequireDefault(require(\"./helpers/getDataToImport\"));\r\n\r\nvar _isStepThreeNextButtonDisabled = _interopRequireDefault(require(\"./helpers/isStepThreeNextButtonDisabled\"));\r\n\r\nvar _footer = _interopRequireDefault(require(\"./footer\"));\r\n\r\nvar _getStepComponent = _interopRequireDefault(require(\"./helpers/getStepComponent\"));\r\n\r\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\r\n\r\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\r\n\r\nvar stepNames = ['step-1', 'step-2', 'step-3', 'step-4'];\r\nvar modalTitleMap = {\r\n  'step-1': 'Whats do you want to do?',\r\n  'step-2': 'Select Data File',\r\n  'step-3': 'Assign Fields',\r\n  'step-4': 'Review and Start Import'\r\n};\r\nvar ADD_RECORDS = Symbol('add-records');\r\nvar MERGE_RECORDS = Symbol('merge-records');\r\nvar ADD_RECORDS_TYPE = 'add-records';\r\n/**\r\n * @category Experiences\r\n */\r\n\r\nfunction ImportRecordsFlow(props) {\r\n  var className = props.className,\r\n      style = props.style,\r\n      isOpen = props.isOpen,\r\n      onRequestClose = props.onRequestClose,\r\n      schema = props.schema,\r\n      onComplete = props.onComplete,\r\n      actionType = props.actionType;\r\n\r\n  var _useState = (0, _react.useState)(actionType === ADD_RECORDS_TYPE ? 1 : 0),\r\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\r\n      currentStepIndex = _useState2[0],\r\n      setCurrentStepIndex = _useState2[1];\r\n\r\n  var _useState3 = (0, _react.useState)(actionType === ADD_RECORDS_TYPE ? ADD_RECORDS_TYPE : ''),\r\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\r\n      actionOption = _useState4[0],\r\n      setActionOption = _useState4[1];\r\n\r\n  var _useState5 = (0, _react.useState)('default'),\r\n      _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\r\n      matchField = _useState6[0],\r\n      setMatchField = _useState6[1];\r\n\r\n  var _useState7 = (0, _react.useState)(''),\r\n      _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\r\n      fileName = _useState8[0],\r\n      setFileName = _useState8[1];\r\n\r\n  var _useState9 = (0, _react.useState)(''),\r\n      _useState10 = (0, _slicedToArray2[\"default\"])(_useState9, 2),\r\n      fileType = _useState10[0],\r\n      setFileType = _useState10[1];\r\n\r\n  var _useState11 = (0, _react.useState)(false),\r\n      _useState12 = (0, _slicedToArray2[\"default\"])(_useState11, 2),\r\n      isLoading = _useState12[0],\r\n      setIsLoading = _useState12[1];\r\n\r\n  var _useState13 = (0, _react.useState)(false),\r\n      _useState14 = (0, _slicedToArray2[\"default\"])(_useState13, 2),\r\n      hasFileSelected = _useState14[0],\r\n      setHasFileSelected = _useState14[1];\r\n\r\n  var _useState15 = (0, _react.useState)([]),\r\n      _useState16 = (0, _slicedToArray2[\"default\"])(_useState15, 2),\r\n      columns = _useState16[0],\r\n      setColumns = _useState16[1];\r\n\r\n  var _useState17 = (0, _react.useState)([]),\r\n      _useState18 = (0, _slicedToArray2[\"default\"])(_useState17, 2),\r\n      data = _useState18[0],\r\n      setData = _useState18[1];\r\n\r\n  var _useState19 = (0, _react.useState)({}),\r\n      _useState20 = (0, _slicedToArray2[\"default\"])(_useState19, 2),\r\n      fieldsMap = _useState20[0],\r\n      setFieldsMap = _useState20[1];\r\n\r\n  var _useState21 = (0, _react.useState)([]),\r\n      _useState22 = (0, _slicedToArray2[\"default\"])(_useState21, 2),\r\n      schemaFields = _useState22[0],\r\n      setSchemaFields = _useState22[1];\r\n\r\n  var currentStep = stepNames[currentStepIndex];\r\n  var StepComponent = (0, _getStepComponent[\"default\"])({\r\n    currentStep: currentStep\r\n  });\r\n\r\n  var removeFile = function removeFile() {\r\n    setHasFileSelected(false);\r\n    setFileName('');\r\n    setFileType('');\r\n    setData([]);\r\n    setColumns([]);\r\n    setFieldsMap({});\r\n  };\r\n\r\n  (0, _react.useEffect)(function () {\r\n    setSchemaFields(Object.keys(schema.attributes));\r\n  }, [schema.attributes]);\r\n  var prevIsOpen = (0, _react.useRef)(isOpen);\r\n  (0, _react.useEffect)(function () {\r\n    if (prevIsOpen.current && !isOpen) {\r\n      setCurrentStepIndex(actionType === ADD_RECORDS_TYPE ? 1 : 0);\r\n      removeFile();\r\n      setActionOption('');\r\n      setMatchField('default');\r\n    }\r\n\r\n    prevIsOpen.current = isOpen;\r\n  }, [isOpen, actionType]);\r\n\r\n  var getModalTitle = function getModalTitle() {\r\n    if (currentStepIndex === 1 && hasFileSelected) {\r\n      return 'Your File Preview';\r\n    }\r\n\r\n    return modalTitleMap[currentStep];\r\n  };\r\n\r\n  var goBackStep = function goBackStep() {\r\n    if (currentStepIndex > 0) {\r\n      var prevStepIndex = currentStepIndex - 1;\r\n      setCurrentStepIndex(prevStepIndex);\r\n    }\r\n  };\r\n\r\n  var goNextStep = function goNextStep() {\r\n    if (currentStepIndex === 3) {\r\n      onComplete((0, _getDataToImport[\"default\"])({\r\n        data: data,\r\n        fieldsMap: fieldsMap,\r\n        schema: schema,\r\n        actionOption: actionOption,\r\n        matchField: matchField\r\n      }));\r\n    }\r\n\r\n    if (currentStepIndex < stepNames.length - 1) {\r\n      var nextStepIndex = currentStepIndex + 1;\r\n      setCurrentStepIndex(nextStepIndex);\r\n    }\r\n  };\r\n\r\n  var isBackButtonDisabled = function isBackButtonDisabled() {\r\n    if (actionType === ADD_RECORDS_TYPE) {\r\n      return currentStepIndex === 1;\r\n    }\r\n\r\n    return currentStepIndex === 0;\r\n  };\r\n\r\n  var isNextButtonDisabled = function isNextButtonDisabled() {\r\n    if (currentStepIndex === 0) {\r\n      return !actionOption || actionOption === 'merge-records' && matchField === 'default';\r\n    }\r\n\r\n    if (currentStepIndex === 1) {\r\n      return !hasFileSelected || isLoading;\r\n    }\r\n\r\n    if (currentStepIndex === 2) {\r\n      return (0, _isStepThreeNextButtonDisabled[\"default\"])({\r\n        fieldsMap: fieldsMap,\r\n        attributes: schema.attributes,\r\n        matchField: matchField\r\n      });\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  var processFile = function processFile(file) {\r\n    var name = file.name,\r\n        type = file.type;\r\n    setFileName(name);\r\n    setFileType(type);\r\n    setIsLoading(true);\r\n    setHasFileSelected(true);\r\n    var reader = new FileReader();\r\n\r\n    reader.onload = function (event) {\r\n      var uInt8ArrayData = new Uint8Array(event.target.result);\r\n\r\n      var workbook = _xlsx[\"default\"].read(uInt8ArrayData, {\r\n        type: 'array',\r\n        raw: true\r\n      });\r\n\r\n      setColumns((0, _getHeaderRowFromWorkbook[\"default\"])(workbook));\r\n      setData((0, _getDataFromWorkbook[\"default\"])(workbook));\r\n      setIsLoading(false);\r\n    };\r\n\r\n    reader.readAsArrayBuffer(file);\r\n  };\r\n\r\n  var assignField = function assignField(databaseFieldToAssign, fileFieldsToAssign) {\r\n    setFieldsMap(_objectSpread(_objectSpread({}, fieldsMap), {}, (0, _defineProperty2[\"default\"])({}, databaseFieldToAssign, fileFieldsToAssign.join(','))));\r\n  };\r\n\r\n  return /*#__PURE__*/_react[\"default\"].createElement(_Modal[\"default\"], {\r\n    className: className,\r\n    style: style,\r\n    title: getModalTitle(),\r\n    size: \"medium\",\r\n    isOpen: isOpen,\r\n    onRequestClose: onRequestClose,\r\n    footer: /*#__PURE__*/_react[\"default\"].createElement(_footer[\"default\"], {\r\n      onBack: goBackStep,\r\n      onNext: goNextStep,\r\n      currentStep: currentStep,\r\n      isBackButtonDisabled: isBackButtonDisabled(),\r\n      isNextButtonDisabled: isNextButtonDisabled(),\r\n      actionType: actionType\r\n    })\r\n  }, /*#__PURE__*/_react[\"default\"].createElement(StepComponent, {\r\n    schemaFields: schemaFields,\r\n    attributes: schema.attributes,\r\n    actionOption: actionOption,\r\n    onChangeAction: setActionOption,\r\n    matchField: matchField,\r\n    onChangeMatchField: setMatchField,\r\n    onProcessFile: processFile,\r\n    fileName: fileName,\r\n    fileType: fileType,\r\n    isLoading: isLoading,\r\n    hasFileSelected: hasFileSelected,\r\n    columns: columns,\r\n    data: data,\r\n    onRemoveFile: removeFile,\r\n    onAssignField: assignField,\r\n    fieldsMap: fieldsMap\r\n  }));\r\n}\r\n\r\nImportRecordsFlow.propTypes = {\r\n  /** The schema represent the structure necessary for import data from a file to a database.\r\n   *  Collection is meant to represent where in database the data will be stored.\r\n   *  Attributes are the field to map with the file column headers */\r\n  schema: _propTypes[\"default\"].shape({\r\n    collection: _propTypes[\"default\"].string,\r\n    attributes: _propTypes[\"default\"].object\r\n  }),\r\n\r\n  /** Controls whether the ImportRecordsFlow modal is opened or not.\r\n   * If true, the modal is open. */\r\n  isOpen: _propTypes[\"default\"].bool,\r\n\r\n  /** The action triggered when the component request to close\r\n   *  (e.g click close button, press esc key or click outside the modal). */\r\n  onRequestClose: _propTypes[\"default\"].func,\r\n\r\n  /** The action triggered when all flow steps are completed. */\r\n  onComplete: _propTypes[\"default\"].func,\r\n\r\n  /** The action type to use. When set to \"add-records\" it will use this type and start the flow in the second step. */\r\n  actionType: _propTypes[\"default\"].oneOf(['add-records']),\r\n\r\n  /** A CSS class for the outer element, in addition to the component's base classes. */\r\n  className: _propTypes[\"default\"].string,\r\n\r\n  /** An object with custom style applied to the outer element. */\r\n  style: _propTypes[\"default\"].object\r\n};\r\nImportRecordsFlow.defaultProps = {\r\n  className: undefined,\r\n  style: undefined,\r\n  schema: {\r\n    attributes: {}\r\n  },\r\n  isOpen: false,\r\n  onRequestClose: function onRequestClose() {},\r\n  onComplete: function onComplete() {},\r\n  actionType: undefined\r\n};\r\nImportRecordsFlow.MERGE_RECORDS = MERGE_RECORDS;\r\nImportRecordsFlow.ADD_RECORDS = ADD_RECORDS;\r\nvar _default = ImportRecordsFlow;\r\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}