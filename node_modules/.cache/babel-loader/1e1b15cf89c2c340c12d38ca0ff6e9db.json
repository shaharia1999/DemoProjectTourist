{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = useKeyNavigation;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = require(\"react\");\n\nvar _constants = require(\"../../../libs/constants\");\n\nvar _getNextFocusedNode = _interopRequireDefault(require(\"../helpers/getNextFocusedNode\"));\n\nvar _getLastVisibleNodeName = _interopRequireDefault(require(\"../helpers/getLastVisibleNodeName\"));\n\nvar _isPrintableCharacter = _interopRequireDefault(require(\"../helpers/isPrintableCharacter\"));\n\nvar _findNodeByFirstLetter = _interopRequireDefault(require(\"../helpers/findNodeByFirstLetter\"));\n\nvar _findExpandableNodesAtLevel = _interopRequireDefault(require(\"../helpers/findExpandableNodesAtLevel\"));\n\nfunction useKeyNavigation(_ref) {\n  var visibleNodes = _ref.visibleNodes,\n      selectedNode = _ref.selectedNode,\n      onNodeSelect = _ref.onNodeSelect,\n      onNodeExpand = _ref.onNodeExpand;\n\n  var _useState = (0, _react.useState)(selectedNode),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      focusedNode = _useState2[0],\n      setFocusedNode = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      enableNavKeys = _useState4[0],\n      setEnableNavKeys = _useState4[1];\n\n  var keyHandlerMap = (0, _react.useMemo)(function () {\n    var _ref4;\n\n    return _ref4 = {}, (0, _defineProperty2[\"default\"])(_ref4, _constants.UP_KEY, function (_ref2) {\n      var name = _ref2.name;\n      var nextFocusedNode = (0, _getNextFocusedNode[\"default\"])(visibleNodes, name, -1);\n      setFocusedNode(nextFocusedNode);\n    }), (0, _defineProperty2[\"default\"])(_ref4, _constants.DOWN_KEY, function (_ref3) {\n      var name = _ref3.name;\n      var nextFocusedNode = (0, _getNextFocusedNode[\"default\"])(visibleNodes, name, 1);\n      setFocusedNode(nextFocusedNode);\n    }), (0, _defineProperty2[\"default\"])(_ref4, _constants.LEFT_KEY, function (props) {\n      var name = props.name,\n          nodePath = props.nodePath,\n          isExpanded = props.isExpanded,\n          children = props.children;\n\n      if (children && isExpanded) {\n        onNodeExpand({\n          name: name,\n          nodePath: nodePath\n        });\n      } else {\n        var parentNode = name.substr(0, name.lastIndexOf('.'));\n        if (parentNode) setFocusedNode(parentNode);\n      }\n    }), (0, _defineProperty2[\"default\"])(_ref4, _constants.RIGHT_KEY, function (props) {\n      var name = props.name,\n          nodePath = props.nodePath,\n          isExpanded = props.isExpanded,\n          children = props.children;\n      if (children && !isExpanded) return onNodeExpand({\n        name: name,\n        nodePath: nodePath\n      });\n      return null;\n    }), (0, _defineProperty2[\"default\"])(_ref4, _constants.HOME_KEY, function () {\n      if (visibleNodes.length > 0) setFocusedNode('node-1');\n    }), (0, _defineProperty2[\"default\"])(_ref4, _constants.END_KEY, function () {\n      setFocusedNode((0, _getLastVisibleNodeName[\"default\"])(visibleNodes));\n    }), (0, _defineProperty2[\"default\"])(_ref4, _constants.ENTER_KEY, function (props) {\n      var name = props.name,\n          nodePath = props.nodePath,\n          children = props.children,\n          isSelected = props.isSelected;\n\n      if (isSelected && children) {\n        onNodeExpand({\n          name: name,\n          nodePath: nodePath\n        });\n      } else {\n        onNodeSelect({\n          name: name,\n          nodePath: nodePath\n        });\n      }\n    }), (0, _defineProperty2[\"default\"])(_ref4, _constants.SPACE_KEY, function (props) {\n      var name = props.name,\n          nodePath = props.nodePath,\n          children = props.children;\n      if (children) onNodeExpand({\n        name: name,\n        nodePath: nodePath\n      });\n    }), _ref4;\n  }, [visibleNodes, onNodeExpand, onNodeSelect]);\n  var processPrintableCharacter = (0, _react.useCallback)(function (_char) {\n    if (_char === '*') {\n      var currentNode = visibleNodes.find(function (node) {\n        return node.name === focusedNode;\n      });\n\n      if (currentNode) {\n        var expandableNodes = (0, _findExpandableNodesAtLevel[\"default\"])(visibleNodes, currentNode.level);\n        expandableNodes.forEach(function (node) {\n          var name = node.name,\n              nodePath = node.nodePath;\n          onNodeExpand({\n            name: name,\n            nodePath: nodePath\n          });\n        });\n      }\n    } else {\n      var currentIndx = visibleNodes.findIndex(function (node) {\n        return node.name === focusedNode;\n      });\n      var nextNode = (0, _findNodeByFirstLetter[\"default\"])(visibleNodes, _char, currentIndx);\n      if (nextNode) setFocusedNode(nextNode.name);\n    }\n  }, [focusedNode, onNodeExpand, visibleNodes]);\n  var keyDownHandler = (0, _react.useCallback)(function (event, childProps) {\n    var key = event.key,\n        keyCode = event.keyCode,\n        target = event.target,\n        currentTarget = event.currentTarget;\n\n    if (target.id === currentTarget.id) {\n      if (keyHandlerMap[keyCode]) {\n        event.preventDefault();\n        keyHandlerMap[keyCode](childProps);\n      } else if ((0, _isPrintableCharacter[\"default\"])(key)) {\n        event.preventDefault();\n        processPrintableCharacter(key, childProps);\n      }\n    }\n  }, [keyHandlerMap, processPrintableCharacter]);\n  var setFocus = (0, _react.useCallback)(function (event, node) {\n    if (event.target.id === event.currentTarget.id) {\n      setFocusedNode(node);\n      setEnableNavKeys(true);\n    }\n  }, [setEnableNavKeys]);\n  var clearFocus = (0, _react.useCallback)(function (event, node) {\n    if (event.target.id === event.currentTarget.id) {\n      setEnableNavKeys(false);\n      if (focusedNode === node) setFocusedNode(selectedNode);\n    }\n  }, [focusedNode, selectedNode]);\n  (0, _react.useEffect)(function () {\n    setFocusedNode(selectedNode);\n  }, [selectedNode]);\n  return {\n    autoFocus: enableNavKeys,\n    focusedNode: focusedNode,\n    setFocusedNode: setFocus,\n    clearFocusedNode: clearFocus,\n    keyDownHandler: keyDownHandler\n  };\n}","map":{"version":3,"sources":["E:/Monirul AWS/PorzotokFrontend/node_modules/react-rainbow-components/components/Tree/hooks/useKeyNavigation.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","useKeyNavigation","_defineProperty2","_slicedToArray2","_react","_constants","_getNextFocusedNode","_getLastVisibleNodeName","_isPrintableCharacter","_findNodeByFirstLetter","_findExpandableNodesAtLevel","_ref","visibleNodes","selectedNode","onNodeSelect","onNodeExpand","_useState","useState","_useState2","focusedNode","setFocusedNode","_useState3","_useState4","enableNavKeys","setEnableNavKeys","keyHandlerMap","useMemo","_ref4","UP_KEY","_ref2","name","nextFocusedNode","DOWN_KEY","_ref3","LEFT_KEY","props","nodePath","isExpanded","children","parentNode","substr","lastIndexOf","RIGHT_KEY","HOME_KEY","length","END_KEY","ENTER_KEY","isSelected","SPACE_KEY","processPrintableCharacter","useCallback","_char","currentNode","find","node","expandableNodes","level","forEach","currentIndx","findIndex","nextNode","keyDownHandler","event","childProps","key","keyCode","target","currentTarget","id","preventDefault","setFocus","clearFocus","useEffect","autoFocus","clearFocusedNode"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = useKeyNavigation;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = require(\"react\");\n\nvar _constants = require(\"../../../libs/constants\");\n\nvar _getNextFocusedNode = _interopRequireDefault(require(\"../helpers/getNextFocusedNode\"));\n\nvar _getLastVisibleNodeName = _interopRequireDefault(require(\"../helpers/getLastVisibleNodeName\"));\n\nvar _isPrintableCharacter = _interopRequireDefault(require(\"../helpers/isPrintableCharacter\"));\n\nvar _findNodeByFirstLetter = _interopRequireDefault(require(\"../helpers/findNodeByFirstLetter\"));\n\nvar _findExpandableNodesAtLevel = _interopRequireDefault(require(\"../helpers/findExpandableNodesAtLevel\"));\n\nfunction useKeyNavigation(_ref) {\n  var visibleNodes = _ref.visibleNodes,\n      selectedNode = _ref.selectedNode,\n      onNodeSelect = _ref.onNodeSelect,\n      onNodeExpand = _ref.onNodeExpand;\n\n  var _useState = (0, _react.useState)(selectedNode),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      focusedNode = _useState2[0],\n      setFocusedNode = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      enableNavKeys = _useState4[0],\n      setEnableNavKeys = _useState4[1];\n\n  var keyHandlerMap = (0, _react.useMemo)(function () {\n    var _ref4;\n\n    return _ref4 = {}, (0, _defineProperty2[\"default\"])(_ref4, _constants.UP_KEY, function (_ref2) {\n      var name = _ref2.name;\n      var nextFocusedNode = (0, _getNextFocusedNode[\"default\"])(visibleNodes, name, -1);\n      setFocusedNode(nextFocusedNode);\n    }), (0, _defineProperty2[\"default\"])(_ref4, _constants.DOWN_KEY, function (_ref3) {\n      var name = _ref3.name;\n      var nextFocusedNode = (0, _getNextFocusedNode[\"default\"])(visibleNodes, name, 1);\n      setFocusedNode(nextFocusedNode);\n    }), (0, _defineProperty2[\"default\"])(_ref4, _constants.LEFT_KEY, function (props) {\n      var name = props.name,\n          nodePath = props.nodePath,\n          isExpanded = props.isExpanded,\n          children = props.children;\n\n      if (children && isExpanded) {\n        onNodeExpand({\n          name: name,\n          nodePath: nodePath\n        });\n      } else {\n        var parentNode = name.substr(0, name.lastIndexOf('.'));\n        if (parentNode) setFocusedNode(parentNode);\n      }\n    }), (0, _defineProperty2[\"default\"])(_ref4, _constants.RIGHT_KEY, function (props) {\n      var name = props.name,\n          nodePath = props.nodePath,\n          isExpanded = props.isExpanded,\n          children = props.children;\n      if (children && !isExpanded) return onNodeExpand({\n        name: name,\n        nodePath: nodePath\n      });\n      return null;\n    }), (0, _defineProperty2[\"default\"])(_ref4, _constants.HOME_KEY, function () {\n      if (visibleNodes.length > 0) setFocusedNode('node-1');\n    }), (0, _defineProperty2[\"default\"])(_ref4, _constants.END_KEY, function () {\n      setFocusedNode((0, _getLastVisibleNodeName[\"default\"])(visibleNodes));\n    }), (0, _defineProperty2[\"default\"])(_ref4, _constants.ENTER_KEY, function (props) {\n      var name = props.name,\n          nodePath = props.nodePath,\n          children = props.children,\n          isSelected = props.isSelected;\n\n      if (isSelected && children) {\n        onNodeExpand({\n          name: name,\n          nodePath: nodePath\n        });\n      } else {\n        onNodeSelect({\n          name: name,\n          nodePath: nodePath\n        });\n      }\n    }), (0, _defineProperty2[\"default\"])(_ref4, _constants.SPACE_KEY, function (props) {\n      var name = props.name,\n          nodePath = props.nodePath,\n          children = props.children;\n      if (children) onNodeExpand({\n        name: name,\n        nodePath: nodePath\n      });\n    }), _ref4;\n  }, [visibleNodes, onNodeExpand, onNodeSelect]);\n  var processPrintableCharacter = (0, _react.useCallback)(function (_char) {\n    if (_char === '*') {\n      var currentNode = visibleNodes.find(function (node) {\n        return node.name === focusedNode;\n      });\n\n      if (currentNode) {\n        var expandableNodes = (0, _findExpandableNodesAtLevel[\"default\"])(visibleNodes, currentNode.level);\n        expandableNodes.forEach(function (node) {\n          var name = node.name,\n              nodePath = node.nodePath;\n          onNodeExpand({\n            name: name,\n            nodePath: nodePath\n          });\n        });\n      }\n    } else {\n      var currentIndx = visibleNodes.findIndex(function (node) {\n        return node.name === focusedNode;\n      });\n      var nextNode = (0, _findNodeByFirstLetter[\"default\"])(visibleNodes, _char, currentIndx);\n      if (nextNode) setFocusedNode(nextNode.name);\n    }\n  }, [focusedNode, onNodeExpand, visibleNodes]);\n  var keyDownHandler = (0, _react.useCallback)(function (event, childProps) {\n    var key = event.key,\n        keyCode = event.keyCode,\n        target = event.target,\n        currentTarget = event.currentTarget;\n\n    if (target.id === currentTarget.id) {\n      if (keyHandlerMap[keyCode]) {\n        event.preventDefault();\n        keyHandlerMap[keyCode](childProps);\n      } else if ((0, _isPrintableCharacter[\"default\"])(key)) {\n        event.preventDefault();\n        processPrintableCharacter(key, childProps);\n      }\n    }\n  }, [keyHandlerMap, processPrintableCharacter]);\n  var setFocus = (0, _react.useCallback)(function (event, node) {\n    if (event.target.id === event.currentTarget.id) {\n      setFocusedNode(node);\n      setEnableNavKeys(true);\n    }\n  }, [setEnableNavKeys]);\n  var clearFocus = (0, _react.useCallback)(function (event, node) {\n    if (event.target.id === event.currentTarget.id) {\n      setEnableNavKeys(false);\n      if (focusedNode === node) setFocusedNode(selectedNode);\n    }\n  }, [focusedNode, selectedNode]);\n  (0, _react.useEffect)(function () {\n    setFocusedNode(selectedNode);\n  }, [selectedNode]);\n  return {\n    autoFocus: enableNavKeys,\n    focusedNode: focusedNode,\n    setFocusedNode: setFocus,\n    clearFocusedNode: clearFocus,\n    keyDownHandler: keyDownHandler\n  };\n}"]},"metadata":{},"sourceType":"script"}