{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Component = exports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _withReduxForm = _interopRequireDefault(require(\"../../libs/hocs/withReduxForm\"));\n\nvar _Lookup = _interopRequireDefault(require(\"../Lookup\"));\n\nvar _locationIcon = _interopRequireDefault(require(\"./icons/locationIcon\"));\n\nvar _utils = require(\"../../libs/utils\");\n\nvar _getSuggestions = _interopRequireDefault(require(\"./helpers/getSuggestions\"));\n\nvar _getSearchForOption = _interopRequireDefault(require(\"./helpers/getSearchForOption\"));\n\nvar _getFormattedValue = _interopRequireDefault(require(\"./helpers/getFormattedValue\"));\n\nvar _selectedLocationIcon = _interopRequireDefault(require(\"./icons/selectedLocationIcon\"));\n\nvar _RenderIf = _interopRequireDefault(require(\"../RenderIf\"));\n\nvar _getSearchParams = _interopRequireDefault(require(\"./helpers/getSearchParams\"));\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./proptypes\"));\n\nvar _poweredByGoogleContainer = _interopRequireDefault(require(\"./styled/poweredByGoogleContainer\"));\n\nvar _poweredByGoogleLogo = _interopRequireDefault(require(\"./styled/poweredByGoogleLogo\"));\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar PlacesLookupComponent = /*#__PURE__*/function (_Component) {\n  (0, _inherits2[\"default\"])(PlacesLookupComponent, _Component);\n\n  var _super = _createSuper(PlacesLookupComponent);\n\n  function PlacesLookupComponent(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, PlacesLookupComponent);\n    _this = _super.call(this, props);\n    _this.lookupId = (0, _utils.uniqueId)('gaddrlookup-input');\n    _this.initialized = false;\n    _this.handleChange = _this.handleChange.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleSearch = _this.handleSearch.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.placesServiceRef = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.state = {\n      isSearching: false,\n      // TODO: remove\n      places: [],\n      suggestions: []\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(PlacesLookupComponent, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_ref) {\n      var prevIsScriptLoaded = _ref.isScriptLoaded; // TODO: change this please, keep isInitialized as an state and don't\n      // render anything until the\n      // component is initialized\n\n      var _this$props = this.props,\n          isScriptLoaded = _this$props.isScriptLoaded,\n          isScriptLoadSucceed = _this$props.isScriptLoadSucceed;\n\n      if (!prevIsScriptLoaded && isScriptLoaded && isScriptLoadSucceed) {\n        this.initComponent();\n      }\n    }\n  }, {\n    key: \"getPlaceInfo\",\n    value: function getPlaceInfo(placeId) {\n      var _this2 = this;\n\n      this.setState({\n        isSearching: true\n      });\n      return new Promise(function (resolve, reject) {\n        _this2.placesService.getDetails({\n          placeId: placeId\n        }, function (details, status) {\n          _this2.setState({\n            isSearching: false\n          });\n\n          if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n            return resolve(details);\n          }\n\n          return reject(status);\n        });\n      });\n    }\n  }, {\n    key: \"initComponent\",\n    value: function initComponent() {\n      this.autocompleteService = new window.google.maps.places.AutocompleteService();\n      this.placesService = new window.google.maps.places.PlacesService(this.placesServiceRef.current);\n      this.initialized = true;\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(option) {\n      var onChange = this.props.onChange;\n\n      if (!option) {\n        return onChange(null);\n      }\n\n      if (!option.id) {\n        return onChange(option.data);\n      }\n\n      var places = this.state.places;\n      var placePrediction = places.find(function (place) {\n        return place.place_id === option.id;\n      });\n      return this.getPlaceInfo(option.id).then(function (result) {\n        var resultValue = Object.assign(result, {\n          predictionInfo: placePrediction\n        });\n        return onChange(resultValue);\n      })[\"catch\"](function () {\n        var resultValue = placePrediction;\n        return onChange(resultValue);\n      });\n    }\n  }, {\n    key: \"handleSearch\",\n    value: function handleSearch(value) {\n      var _this3 = this;\n\n      if (!this.initialized) return;\n\n      if (value) {\n        this.searchGooglePlaces(value).then(function (results) {\n          return _this3.processSearchResults(results, value);\n        })[\"catch\"](function () {\n          return _this3.handleError(value);\n        });\n      } else if (!value) {\n        this.clear();\n      }\n    }\n  }, {\n    key: \"searchGooglePlaces\",\n    value: function searchGooglePlaces(needle) {\n      var _this4 = this;\n\n      var searchOptions = this.props.searchOptions;\n      var searchParams = (0, _getSearchParams[\"default\"])(searchOptions);\n      this.setState({\n        isSearching: true\n      });\n      return new Promise(function (resolve, reject) {\n        _this4.autocompleteService.getPlacePredictions(_objectSpread(_objectSpread({}, searchParams), {}, {\n          input: needle\n        }), function (predictions, status) {\n          _this4.setState({\n            isSearching: false\n          });\n\n          if (status !== window.google.maps.places.PlacesServiceStatus.OK) {\n            return reject(status);\n          }\n\n          return resolve(predictions);\n        });\n      });\n    }\n  }, {\n    key: \"processSearchResults\",\n    value: function processSearchResults(results, searchValue) {\n      this.setState({\n        places: results,\n        suggestions: (0, _getSuggestions[\"default\"])(results, searchValue)\n      });\n    }\n  }, {\n    key: \"handleError\",\n    value: function handleError(searchValue) {\n      this.setState({\n        places: [],\n        suggestions: [(0, _getSearchForOption[\"default\"])(searchValue)]\n      });\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.setState({\n        places: [],\n        suggestions: []\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          style = _this$props2.style,\n          className = _this$props2.className,\n          label = _this$props2.label,\n          error = _this$props2.error,\n          readOnly = _this$props2.readOnly,\n          placeholder = _this$props2.placeholder,\n          disabled = _this$props2.disabled,\n          tabIndex = _this$props2.tabIndex,\n          required = _this$props2.required,\n          id = _this$props2.id,\n          name = _this$props2.name,\n          value = _this$props2.value,\n          labelAlignment = _this$props2.labelAlignment,\n          hideLabel = _this$props2.hideLabel,\n          onClick = _this$props2.onClick,\n          onBlur = _this$props2.onBlur,\n          variant = _this$props2.variant;\n      var _this$state = this.state,\n          isSearching = _this$state.isSearching,\n          suggestions = _this$state.suggestions;\n      var options = suggestions.length > 0 ? suggestions : null;\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        id: id,\n        style: style,\n        className: className\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Lookup[\"default\"], {\n        id: this.lookupId,\n        name: name,\n        label: label,\n        debounce: true,\n        isLoading: isSearching,\n        placeholder: placeholder,\n        options: options,\n        labelAlignment: labelAlignment,\n        hideLabel: hideLabel,\n        readOnly: readOnly,\n        required: required,\n        tabIndex: tabIndex,\n        disabled: disabled,\n        value: (0, _getFormattedValue[\"default\"])(value, false, /*#__PURE__*/_react[\"default\"].createElement(_selectedLocationIcon[\"default\"], null)),\n        onChange: this.handleChange,\n        onSearch: this.handleSearch,\n        onClick: onClick // TODO: fix focus problem when used with redux form\n        // onFocus={onFocus}\n        ,\n        onBlur: onBlur,\n        error: error,\n        icon: /*#__PURE__*/_react[\"default\"].createElement(_locationIcon[\"default\"], null),\n        preferredSelectedOption: 1,\n        variant: variant\n      }), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n        isTrue: !error\n      }, /*#__PURE__*/_react[\"default\"].createElement(_poweredByGoogleContainer[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_poweredByGoogleLogo[\"default\"], null))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        ref: this.placesServiceRef\n      }));\n    }\n  }]);\n  return PlacesLookupComponent;\n}(_react.Component);\n\nexports.Component = PlacesLookupComponent;\nPlacesLookupComponent.propTypes = {\n  isScriptLoaded: _propTypes[\"default\"].bool.isRequired,\n  isScriptLoadSucceed: _propTypes[\"default\"].bool.isRequired,\n  searchOptions: CustomPropTypes.searchOptionsShape,\n  label: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\n  labelAlignment: _propTypes[\"default\"].oneOf(['left', 'center', 'right']),\n  hideLabel: _propTypes[\"default\"].bool,\n  readOnly: _propTypes[\"default\"].bool,\n  value: _propTypes[\"default\"].oneOfType([CustomPropTypes.predictionShape, CustomPropTypes.placeDetailsShape, _propTypes[\"default\"].string]),\n  name: _propTypes[\"default\"].string,\n  placeholder: _propTypes[\"default\"].string,\n  required: _propTypes[\"default\"].bool,\n  error: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\n  disabled: _propTypes[\"default\"].bool,\n  tabIndex: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].number, _propTypes[\"default\"].string]),\n  id: _propTypes[\"default\"].string,\n  className: _propTypes[\"default\"].string,\n  style: _propTypes[\"default\"].object,\n  onChange: _propTypes[\"default\"].func,\n  onClick: _propTypes[\"default\"].func,\n  // onFocus: PropTypes.func,\n  onBlur: _propTypes[\"default\"].func,\n  variant: _propTypes[\"default\"].oneOf(['default', 'shaded', 'bare'])\n};\nPlacesLookupComponent.defaultProps = {\n  searchOptions: undefined,\n  value: undefined,\n  name: undefined,\n  placeholder: null,\n  required: false,\n  readOnly: false,\n  error: null,\n  disabled: false,\n  onChange: function onChange() {},\n  onClick: function onClick() {},\n  // onFocus: () => {},\n  onBlur: function onBlur() {},\n  tabIndex: undefined,\n  label: undefined,\n  className: undefined,\n  style: undefined,\n  id: undefined,\n  labelAlignment: 'center',\n  hideLabel: false,\n  variant: 'default'\n};\n\nvar _default = (0, _withReduxForm[\"default\"])(PlacesLookupComponent);\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["E:/Monirul AWS/PorzotokFrontend/node_modules/react-rainbow-components/components/GoogleAddressLookup/component.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","Component","_defineProperty2","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_react","_propTypes","_withReduxForm","_Lookup","_locationIcon","_utils","_getSuggestions","_getSearchForOption","_getFormattedValue","_selectedLocationIcon","_RenderIf","_getSearchParams","CustomPropTypes","_poweredByGoogleContainer","_poweredByGoogleLogo","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","PlacesLookupComponent","_Component","_super","props","_this","lookupId","uniqueId","initialized","handleChange","bind","handleSearch","placesServiceRef","createRef","state","isSearching","places","suggestions","componentDidUpdate","_ref","prevIsScriptLoaded","isScriptLoaded","_this$props","isScriptLoadSucceed","initComponent","getPlaceInfo","placeId","_this2","setState","Promise","resolve","reject","placesService","getDetails","details","status","window","google","maps","PlacesServiceStatus","OK","autocompleteService","AutocompleteService","PlacesService","current","option","onChange","id","data","placePrediction","find","place","place_id","then","resultValue","assign","predictionInfo","_this3","searchGooglePlaces","results","processSearchResults","handleError","clear","needle","_this4","searchOptions","searchParams","getPlacePredictions","input","predictions","searchValue","render","_this$props2","style","className","label","error","readOnly","placeholder","disabled","tabIndex","required","name","labelAlignment","hideLabel","onClick","onBlur","variant","_this$state","options","createElement","debounce","isLoading","onSearch","icon","preferredSelectedOption","isTrue","ref","propTypes","bool","isRequired","searchOptionsShape","oneOfType","string","node","oneOf","predictionShape","placeDetailsShape","number","func","defaultProps","undefined","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Component = exports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _withReduxForm = _interopRequireDefault(require(\"../../libs/hocs/withReduxForm\"));\n\nvar _Lookup = _interopRequireDefault(require(\"../Lookup\"));\n\nvar _locationIcon = _interopRequireDefault(require(\"./icons/locationIcon\"));\n\nvar _utils = require(\"../../libs/utils\");\n\nvar _getSuggestions = _interopRequireDefault(require(\"./helpers/getSuggestions\"));\n\nvar _getSearchForOption = _interopRequireDefault(require(\"./helpers/getSearchForOption\"));\n\nvar _getFormattedValue = _interopRequireDefault(require(\"./helpers/getFormattedValue\"));\n\nvar _selectedLocationIcon = _interopRequireDefault(require(\"./icons/selectedLocationIcon\"));\n\nvar _RenderIf = _interopRequireDefault(require(\"../RenderIf\"));\n\nvar _getSearchParams = _interopRequireDefault(require(\"./helpers/getSearchParams\"));\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./proptypes\"));\n\nvar _poweredByGoogleContainer = _interopRequireDefault(require(\"./styled/poweredByGoogleContainer\"));\n\nvar _poweredByGoogleLogo = _interopRequireDefault(require(\"./styled/poweredByGoogleLogo\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar PlacesLookupComponent = /*#__PURE__*/function (_Component) {\n  (0, _inherits2[\"default\"])(PlacesLookupComponent, _Component);\n\n  var _super = _createSuper(PlacesLookupComponent);\n\n  function PlacesLookupComponent(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, PlacesLookupComponent);\n    _this = _super.call(this, props);\n    _this.lookupId = (0, _utils.uniqueId)('gaddrlookup-input');\n    _this.initialized = false;\n    _this.handleChange = _this.handleChange.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleSearch = _this.handleSearch.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.placesServiceRef = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.state = {\n      isSearching: false,\n      // TODO: remove\n      places: [],\n      suggestions: []\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(PlacesLookupComponent, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_ref) {\n      var prevIsScriptLoaded = _ref.isScriptLoaded;\n      // TODO: change this please, keep isInitialized as an state and don't\n      // render anything until the\n      // component is initialized\n      var _this$props = this.props,\n          isScriptLoaded = _this$props.isScriptLoaded,\n          isScriptLoadSucceed = _this$props.isScriptLoadSucceed;\n\n      if (!prevIsScriptLoaded && isScriptLoaded && isScriptLoadSucceed) {\n        this.initComponent();\n      }\n    }\n  }, {\n    key: \"getPlaceInfo\",\n    value: function getPlaceInfo(placeId) {\n      var _this2 = this;\n\n      this.setState({\n        isSearching: true\n      });\n      return new Promise(function (resolve, reject) {\n        _this2.placesService.getDetails({\n          placeId: placeId\n        }, function (details, status) {\n          _this2.setState({\n            isSearching: false\n          });\n\n          if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n            return resolve(details);\n          }\n\n          return reject(status);\n        });\n      });\n    }\n  }, {\n    key: \"initComponent\",\n    value: function initComponent() {\n      this.autocompleteService = new window.google.maps.places.AutocompleteService();\n      this.placesService = new window.google.maps.places.PlacesService(this.placesServiceRef.current);\n      this.initialized = true;\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(option) {\n      var onChange = this.props.onChange;\n\n      if (!option) {\n        return onChange(null);\n      }\n\n      if (!option.id) {\n        return onChange(option.data);\n      }\n\n      var places = this.state.places;\n      var placePrediction = places.find(function (place) {\n        return place.place_id === option.id;\n      });\n      return this.getPlaceInfo(option.id).then(function (result) {\n        var resultValue = Object.assign(result, {\n          predictionInfo: placePrediction\n        });\n        return onChange(resultValue);\n      })[\"catch\"](function () {\n        var resultValue = placePrediction;\n        return onChange(resultValue);\n      });\n    }\n  }, {\n    key: \"handleSearch\",\n    value: function handleSearch(value) {\n      var _this3 = this;\n\n      if (!this.initialized) return;\n\n      if (value) {\n        this.searchGooglePlaces(value).then(function (results) {\n          return _this3.processSearchResults(results, value);\n        })[\"catch\"](function () {\n          return _this3.handleError(value);\n        });\n      } else if (!value) {\n        this.clear();\n      }\n    }\n  }, {\n    key: \"searchGooglePlaces\",\n    value: function searchGooglePlaces(needle) {\n      var _this4 = this;\n\n      var searchOptions = this.props.searchOptions;\n      var searchParams = (0, _getSearchParams[\"default\"])(searchOptions);\n      this.setState({\n        isSearching: true\n      });\n      return new Promise(function (resolve, reject) {\n        _this4.autocompleteService.getPlacePredictions(_objectSpread(_objectSpread({}, searchParams), {}, {\n          input: needle\n        }), function (predictions, status) {\n          _this4.setState({\n            isSearching: false\n          });\n\n          if (status !== window.google.maps.places.PlacesServiceStatus.OK) {\n            return reject(status);\n          }\n\n          return resolve(predictions);\n        });\n      });\n    }\n  }, {\n    key: \"processSearchResults\",\n    value: function processSearchResults(results, searchValue) {\n      this.setState({\n        places: results,\n        suggestions: (0, _getSuggestions[\"default\"])(results, searchValue)\n      });\n    }\n  }, {\n    key: \"handleError\",\n    value: function handleError(searchValue) {\n      this.setState({\n        places: [],\n        suggestions: [(0, _getSearchForOption[\"default\"])(searchValue)]\n      });\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.setState({\n        places: [],\n        suggestions: []\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          style = _this$props2.style,\n          className = _this$props2.className,\n          label = _this$props2.label,\n          error = _this$props2.error,\n          readOnly = _this$props2.readOnly,\n          placeholder = _this$props2.placeholder,\n          disabled = _this$props2.disabled,\n          tabIndex = _this$props2.tabIndex,\n          required = _this$props2.required,\n          id = _this$props2.id,\n          name = _this$props2.name,\n          value = _this$props2.value,\n          labelAlignment = _this$props2.labelAlignment,\n          hideLabel = _this$props2.hideLabel,\n          onClick = _this$props2.onClick,\n          onBlur = _this$props2.onBlur,\n          variant = _this$props2.variant;\n      var _this$state = this.state,\n          isSearching = _this$state.isSearching,\n          suggestions = _this$state.suggestions;\n      var options = suggestions.length > 0 ? suggestions : null;\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        id: id,\n        style: style,\n        className: className\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Lookup[\"default\"], {\n        id: this.lookupId,\n        name: name,\n        label: label,\n        debounce: true,\n        isLoading: isSearching,\n        placeholder: placeholder,\n        options: options,\n        labelAlignment: labelAlignment,\n        hideLabel: hideLabel,\n        readOnly: readOnly,\n        required: required,\n        tabIndex: tabIndex,\n        disabled: disabled,\n        value: (0, _getFormattedValue[\"default\"])(value, false, /*#__PURE__*/_react[\"default\"].createElement(_selectedLocationIcon[\"default\"], null)),\n        onChange: this.handleChange,\n        onSearch: this.handleSearch,\n        onClick: onClick // TODO: fix focus problem when used with redux form\n        // onFocus={onFocus}\n        ,\n        onBlur: onBlur,\n        error: error,\n        icon: /*#__PURE__*/_react[\"default\"].createElement(_locationIcon[\"default\"], null),\n        preferredSelectedOption: 1,\n        variant: variant\n      }), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n        isTrue: !error\n      }, /*#__PURE__*/_react[\"default\"].createElement(_poweredByGoogleContainer[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_poweredByGoogleLogo[\"default\"], null))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        ref: this.placesServiceRef\n      }));\n    }\n  }]);\n  return PlacesLookupComponent;\n}(_react.Component);\n\nexports.Component = PlacesLookupComponent;\nPlacesLookupComponent.propTypes = {\n  isScriptLoaded: _propTypes[\"default\"].bool.isRequired,\n  isScriptLoadSucceed: _propTypes[\"default\"].bool.isRequired,\n  searchOptions: CustomPropTypes.searchOptionsShape,\n  label: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\n  labelAlignment: _propTypes[\"default\"].oneOf(['left', 'center', 'right']),\n  hideLabel: _propTypes[\"default\"].bool,\n  readOnly: _propTypes[\"default\"].bool,\n  value: _propTypes[\"default\"].oneOfType([CustomPropTypes.predictionShape, CustomPropTypes.placeDetailsShape, _propTypes[\"default\"].string]),\n  name: _propTypes[\"default\"].string,\n  placeholder: _propTypes[\"default\"].string,\n  required: _propTypes[\"default\"].bool,\n  error: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\n  disabled: _propTypes[\"default\"].bool,\n  tabIndex: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].number, _propTypes[\"default\"].string]),\n  id: _propTypes[\"default\"].string,\n  className: _propTypes[\"default\"].string,\n  style: _propTypes[\"default\"].object,\n  onChange: _propTypes[\"default\"].func,\n  onClick: _propTypes[\"default\"].func,\n  // onFocus: PropTypes.func,\n  onBlur: _propTypes[\"default\"].func,\n  variant: _propTypes[\"default\"].oneOf(['default', 'shaded', 'bare'])\n};\nPlacesLookupComponent.defaultProps = {\n  searchOptions: undefined,\n  value: undefined,\n  name: undefined,\n  placeholder: null,\n  required: false,\n  readOnly: false,\n  error: null,\n  disabled: false,\n  onChange: function onChange() {},\n  onClick: function onClick() {},\n  // onFocus: () => {},\n  onBlur: function onBlur() {},\n  tabIndex: undefined,\n  label: undefined,\n  className: undefined,\n  style: undefined,\n  id: undefined,\n  labelAlignment: 'center',\n  hideLabel: false,\n  variant: 'default'\n};\n\nvar _default = (0, _withReduxForm[\"default\"])(PlacesLookupComponent);\n\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}