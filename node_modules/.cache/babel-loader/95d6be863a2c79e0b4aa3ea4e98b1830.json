{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = useKeyboardNavigation;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = require(\"react\");\n\nvar _constants = require(\"../../../../libs/constants\");\n\nvar _getNewIndex = _interopRequireDefault(require(\"../helpers/getNewIndex\"));\n\nvar _isOptionVisible = _interopRequireDefault(require(\"../../../InternalDropdown/helpers/isOptionVisible\"));\n\nfunction useKeyboardNavigation(country, list, ref, scrollableRef, itemsRef, handleCountryChange) {\n  var activeIndex = (0, _react.useRef)(0);\n  var length = list.length;\n  var handleActiveChange = (0, _react.useCallback)(function (newIndex) {\n    var currentItem = itemsRef.current[activeIndex.current];\n    var newItem = itemsRef.current[newIndex];\n\n    if (currentItem) {\n      currentItem.setAttribute('aria-selected', false);\n    }\n\n    if (newItem) {\n      itemsRef.current[newIndex].setAttribute('aria-selected', true);\n      activeIndex.current = newIndex;\n    }\n  }, [itemsRef]);\n  var moveToOption = (0, _react.useCallback)(function (newIndex) {\n    var currentItem = itemsRef.current[activeIndex.current];\n    var newItem = itemsRef.current[newIndex];\n\n    if (currentItem && newItem) {\n      if (!(0, _isOptionVisible[\"default\"])(newItem, scrollableRef.current)) {\n        var amount = newItem.offsetTop - currentItem.offsetTop;\n        scrollableRef.current.scrollBy(0, amount);\n      }\n\n      handleActiveChange(newIndex);\n    }\n  }, [handleActiveChange, itemsRef, scrollableRef]);\n  var handleKeyDown = (0, _react.useCallback)(function (event) {\n    if ([_constants.UP_KEY, _constants.DOWN_KEY, _constants.ENTER_KEY, _constants.HOME_KEY, _constants.END_KEY].indexOf(event.keyCode) !== -1) {\n      var _keyHandlerMap;\n\n      event.preventDefault();\n      var active = activeIndex.current;\n      var keyHandlerMap = (_keyHandlerMap = {}, (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.UP_KEY, function () {\n        return moveToOption((0, _getNewIndex[\"default\"])(active - 1, length));\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.DOWN_KEY, function () {\n        return moveToOption((0, _getNewIndex[\"default\"])(active + 1, length));\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.HOME_KEY, function () {\n        return moveToOption(0);\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.END_KEY, function () {\n        return moveToOption(length - 1);\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.ENTER_KEY, function () {\n        return list[active] && handleCountryChange(list[active]);\n      }), _keyHandlerMap);\n      keyHandlerMap[event.keyCode]();\n    }\n  }, [handleCountryChange, length, list, moveToOption]);\n  (0, _react.useEffect)(function () {\n    var element = ref.current || window;\n    element.addEventListener('keydown', handleKeyDown);\n    return function () {\n      element.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleKeyDown, ref]);\n  (0, _react.useEffect)(function () {\n    handleActiveChange(0);\n\n    if (scrollableRef.current && scrollableRef.current.scrollTo) {\n      scrollableRef.current.scrollTo(0, 0);\n    }\n\n    activeIndex.current = 0;\n  }, [country, handleActiveChange, itemsRef, length, scrollableRef]);\n  (0, _react.useEffect)(function () {\n    var currentItem = itemsRef.current[activeIndex.current];\n\n    if (currentItem) {\n      currentItem.setAttribute('aria-selected', true);\n    }\n  });\n  return handleActiveChange;\n}","map":{"version":3,"sources":["D:/PorzotokFrontend/node_modules/react-rainbow-components/components/PhoneInput/countriesDropdown/hooks/useKeyboardNavigation.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","useKeyboardNavigation","_defineProperty2","_react","_constants","_getNewIndex","_isOptionVisible","country","list","ref","scrollableRef","itemsRef","handleCountryChange","activeIndex","useRef","length","handleActiveChange","useCallback","newIndex","currentItem","current","newItem","setAttribute","moveToOption","amount","offsetTop","scrollBy","handleKeyDown","event","UP_KEY","DOWN_KEY","ENTER_KEY","HOME_KEY","END_KEY","indexOf","keyCode","_keyHandlerMap","preventDefault","active","keyHandlerMap","useEffect","element","window","addEventListener","removeEventListener","scrollTo"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = useKeyboardNavigation;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = require(\"react\");\n\nvar _constants = require(\"../../../../libs/constants\");\n\nvar _getNewIndex = _interopRequireDefault(require(\"../helpers/getNewIndex\"));\n\nvar _isOptionVisible = _interopRequireDefault(require(\"../../../InternalDropdown/helpers/isOptionVisible\"));\n\nfunction useKeyboardNavigation(country, list, ref, scrollableRef, itemsRef, handleCountryChange) {\n  var activeIndex = (0, _react.useRef)(0);\n  var length = list.length;\n  var handleActiveChange = (0, _react.useCallback)(function (newIndex) {\n    var currentItem = itemsRef.current[activeIndex.current];\n    var newItem = itemsRef.current[newIndex];\n\n    if (currentItem) {\n      currentItem.setAttribute('aria-selected', false);\n    }\n\n    if (newItem) {\n      itemsRef.current[newIndex].setAttribute('aria-selected', true);\n      activeIndex.current = newIndex;\n    }\n  }, [itemsRef]);\n  var moveToOption = (0, _react.useCallback)(function (newIndex) {\n    var currentItem = itemsRef.current[activeIndex.current];\n    var newItem = itemsRef.current[newIndex];\n\n    if (currentItem && newItem) {\n      if (!(0, _isOptionVisible[\"default\"])(newItem, scrollableRef.current)) {\n        var amount = newItem.offsetTop - currentItem.offsetTop;\n        scrollableRef.current.scrollBy(0, amount);\n      }\n\n      handleActiveChange(newIndex);\n    }\n  }, [handleActiveChange, itemsRef, scrollableRef]);\n  var handleKeyDown = (0, _react.useCallback)(function (event) {\n    if ([_constants.UP_KEY, _constants.DOWN_KEY, _constants.ENTER_KEY, _constants.HOME_KEY, _constants.END_KEY].indexOf(event.keyCode) !== -1) {\n      var _keyHandlerMap;\n\n      event.preventDefault();\n      var active = activeIndex.current;\n      var keyHandlerMap = (_keyHandlerMap = {}, (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.UP_KEY, function () {\n        return moveToOption((0, _getNewIndex[\"default\"])(active - 1, length));\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.DOWN_KEY, function () {\n        return moveToOption((0, _getNewIndex[\"default\"])(active + 1, length));\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.HOME_KEY, function () {\n        return moveToOption(0);\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.END_KEY, function () {\n        return moveToOption(length - 1);\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.ENTER_KEY, function () {\n        return list[active] && handleCountryChange(list[active]);\n      }), _keyHandlerMap);\n      keyHandlerMap[event.keyCode]();\n    }\n  }, [handleCountryChange, length, list, moveToOption]);\n  (0, _react.useEffect)(function () {\n    var element = ref.current || window;\n    element.addEventListener('keydown', handleKeyDown);\n    return function () {\n      element.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleKeyDown, ref]);\n  (0, _react.useEffect)(function () {\n    handleActiveChange(0);\n\n    if (scrollableRef.current && scrollableRef.current.scrollTo) {\n      scrollableRef.current.scrollTo(0, 0);\n    }\n\n    activeIndex.current = 0;\n  }, [country, handleActiveChange, itemsRef, length, scrollableRef]);\n  (0, _react.useEffect)(function () {\n    var currentItem = itemsRef.current[activeIndex.current];\n\n    if (currentItem) {\n      currentItem.setAttribute('aria-selected', true);\n    }\n  });\n  return handleActiveChange;\n}"]},"metadata":{},"sourceType":"script"}