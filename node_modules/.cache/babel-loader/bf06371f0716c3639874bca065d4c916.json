{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = useArrowKeyNav;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = require(\"react\");\n\nvar _constants = require(\"../../../libs/constants\");\n\nvar _utils = require(\"../utils\");\n\nfunction useArrowKeyNav(_ref) {\n  var childrenRefs = _ref.childrenRefs,\n      isLoading = _ref.isLoading;\n\n  var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      focusedChildIndex = _useState2[0],\n      setFocusedChildIndex = _useState2[1];\n\n  var focusChild = (0, _react.useCallback)(function (index) {\n    if (isLoading || !childrenRefs[index]) {\n      return null;\n    }\n\n    setFocusedChildIndex(index);\n    return childrenRefs[index].focus();\n  }, [childrenRefs, isLoading]);\n  var focusMatchedItem = (0, _react.useCallback)(function (matchedItem) {\n    var itemIndex = (0, _utils.findItemIndex)(childrenRefs, matchedItem);\n    return focusChild(itemIndex);\n  }, [childrenRefs, focusChild]);\n  var clearFocusedChild = (0, _react.useCallback)(function () {\n    return setFocusedChildIndex(null);\n  }, [setFocusedChildIndex]);\n  var keyHandlerMap = (0, _react.useMemo)(function () {\n    var _ref2;\n\n    return _ref2 = {}, (0, _defineProperty2[\"default\"])(_ref2, _constants.UP_KEY, function () {\n      var nextFocusedChildIndex = focusedChildIndex > 0 ? focusedChildIndex - 1 : childrenRefs.length - 1;\n      setFocusedChildIndex(nextFocusedChildIndex);\n    }), (0, _defineProperty2[\"default\"])(_ref2, _constants.DOWN_KEY, function () {\n      var nextFocusedChildIndex = focusedChildIndex < childrenRefs.length - 1 ? focusedChildIndex + 1 : 0;\n      setFocusedChildIndex(nextFocusedChildIndex);\n    }), (0, _defineProperty2[\"default\"])(_ref2, _constants.ENTER_KEY, function () {\n      var isValidIndex = focusedChildIndex >= 0;\n\n      if (isValidIndex) {\n        childrenRefs[focusedChildIndex].click();\n      }\n    }), _ref2;\n  }, [childrenRefs, focusedChildIndex]);\n  var processPrintableCharacter = (0, _react.useCallback)(function (_char) {\n    var matchedItem = (0, _utils.findItemByKey)(_char, childrenRefs, focusedChildIndex);\n\n    if (matchedItem) {\n      focusMatchedItem(matchedItem);\n    }\n  }, [childrenRefs, focusMatchedItem, focusedChildIndex]);\n  var handleKeyPress = (0, _react.useCallback)(function (event) {\n    var keyCode = event.keyCode,\n        key = event.key;\n\n    if (keyHandlerMap[keyCode]) {\n      keyHandlerMap[keyCode]();\n    } else if ((0, _utils.isPrintableCharacter)(key)) {\n      processPrintableCharacter(key);\n    }\n  }, [keyHandlerMap, processPrintableCharacter]);\n  return {\n    focusedChildIndex: focusedChildIndex,\n    handleKeyPress: handleKeyPress,\n    focusMatchedItem: focusMatchedItem,\n    focusChild: focusChild,\n    clearFocusedChild: clearFocusedChild\n  };\n}","map":{"version":3,"sources":["D:/PorzotokFrontend/node_modules/react-rainbow-components/components/PrimitiveMenu/hooks/useArrowKeyNav.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","useArrowKeyNav","_defineProperty2","_slicedToArray2","_react","_constants","_utils","_ref","childrenRefs","isLoading","_useState","useState","_useState2","focusedChildIndex","setFocusedChildIndex","focusChild","useCallback","index","focus","focusMatchedItem","matchedItem","itemIndex","findItemIndex","clearFocusedChild","keyHandlerMap","useMemo","_ref2","UP_KEY","nextFocusedChildIndex","length","DOWN_KEY","ENTER_KEY","isValidIndex","click","processPrintableCharacter","_char","findItemByKey","handleKeyPress","event","keyCode","key","isPrintableCharacter"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = useArrowKeyNav;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = require(\"react\");\n\nvar _constants = require(\"../../../libs/constants\");\n\nvar _utils = require(\"../utils\");\n\nfunction useArrowKeyNav(_ref) {\n  var childrenRefs = _ref.childrenRefs,\n      isLoading = _ref.isLoading;\n\n  var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      focusedChildIndex = _useState2[0],\n      setFocusedChildIndex = _useState2[1];\n\n  var focusChild = (0, _react.useCallback)(function (index) {\n    if (isLoading || !childrenRefs[index]) {\n      return null;\n    }\n\n    setFocusedChildIndex(index);\n    return childrenRefs[index].focus();\n  }, [childrenRefs, isLoading]);\n  var focusMatchedItem = (0, _react.useCallback)(function (matchedItem) {\n    var itemIndex = (0, _utils.findItemIndex)(childrenRefs, matchedItem);\n    return focusChild(itemIndex);\n  }, [childrenRefs, focusChild]);\n  var clearFocusedChild = (0, _react.useCallback)(function () {\n    return setFocusedChildIndex(null);\n  }, [setFocusedChildIndex]);\n  var keyHandlerMap = (0, _react.useMemo)(function () {\n    var _ref2;\n\n    return _ref2 = {}, (0, _defineProperty2[\"default\"])(_ref2, _constants.UP_KEY, function () {\n      var nextFocusedChildIndex = focusedChildIndex > 0 ? focusedChildIndex - 1 : childrenRefs.length - 1;\n      setFocusedChildIndex(nextFocusedChildIndex);\n    }), (0, _defineProperty2[\"default\"])(_ref2, _constants.DOWN_KEY, function () {\n      var nextFocusedChildIndex = focusedChildIndex < childrenRefs.length - 1 ? focusedChildIndex + 1 : 0;\n      setFocusedChildIndex(nextFocusedChildIndex);\n    }), (0, _defineProperty2[\"default\"])(_ref2, _constants.ENTER_KEY, function () {\n      var isValidIndex = focusedChildIndex >= 0;\n\n      if (isValidIndex) {\n        childrenRefs[focusedChildIndex].click();\n      }\n    }), _ref2;\n  }, [childrenRefs, focusedChildIndex]);\n  var processPrintableCharacter = (0, _react.useCallback)(function (_char) {\n    var matchedItem = (0, _utils.findItemByKey)(_char, childrenRefs, focusedChildIndex);\n\n    if (matchedItem) {\n      focusMatchedItem(matchedItem);\n    }\n  }, [childrenRefs, focusMatchedItem, focusedChildIndex]);\n  var handleKeyPress = (0, _react.useCallback)(function (event) {\n    var keyCode = event.keyCode,\n        key = event.key;\n\n    if (keyHandlerMap[keyCode]) {\n      keyHandlerMap[keyCode]();\n    } else if ((0, _utils.isPrintableCharacter)(key)) {\n      processPrintableCharacter(key);\n    }\n  }, [keyHandlerMap, processPrintableCharacter]);\n  return {\n    focusedChildIndex: focusedChildIndex,\n    handleKeyPress: handleKeyPress,\n    focusMatchedItem: focusMatchedItem,\n    focusChild: focusChild,\n    clearFocusedChild: clearFocusedChild\n  };\n}"]},"metadata":{},"sourceType":"script"}