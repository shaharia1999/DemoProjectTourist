{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = MapComponent;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _container = _interopRequireDefault(require(\"./styled/container\"));\n\nvar _controls = _interopRequireDefault(require(\"./styled/controls\"));\n\nvar _getMapContainerStyles = _interopRequireDefault(require(\"./getMapContainerStyles\"));\n\nvar MAX_ZOOM = 15;\n\nfunction MapComponent(props) {\n  var showTraffic = props.showTraffic,\n      showTransit = props.showTransit,\n      center = props.center,\n      zoom = props.zoom,\n      markers = props.markers,\n      style = props.style,\n      className = props.className,\n      children = props.children,\n      type = props.type,\n      isScriptLoaded = props.isScriptLoaded,\n      isScriptLoadSucceed = props.isScriptLoadSucceed,\n      onMarkerClick = props.onMarkerClick;\n  var container = (0, _react.useRef)();\n  var mapContainer = (0, _react.useRef)();\n\n  var _useState = (0, _react.useState)(),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      map = _useState2[0],\n      setMap = _useState2[1];\n\n  var _useState3 = (0, _react.useState)([]),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      mapMarkers = _useState4[0],\n      updateMapMarkers = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(false),\n      _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\n      trafficLayer = _useState6[0],\n      setTrafficLayer = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(false),\n      _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\n      transitLayer = _useState8[0],\n      setTransitLayer = _useState8[1];\n\n  (0, _react.useEffect)(function () {\n    if (isScriptLoaded && isScriptLoadSucceed) {\n      var mapOptions = {\n        zoom: 2,\n        center: {\n          lat: 0,\n          lng: 0\n        },\n        disableDefaultUI: true\n      };\n      var mapInstance = new window.google.maps.Map(mapContainer.current, mapOptions);\n      var trafficInstance = new window.google.maps.TrafficLayer();\n      var transitInstance = new window.google.maps.TransitLayer();\n      setMap(mapInstance);\n      setTrafficLayer(trafficInstance);\n      setTransitLayer(transitInstance);\n    }\n  }, [isScriptLoaded, isScriptLoadSucceed]);\n\n  var handleMarkerClick = function handleMarkerClick(marker, index) {\n    onMarkerClick(marker, index);\n  };\n\n  (0, _react.useEffect)(function () {\n    if (map) {\n      mapMarkers.forEach(function (marker) {\n        return marker.setMap(null);\n      });\n\n      if (Array.isArray(markers)) {\n        var instances = markers.map(function (marker, index) {\n          var instance = new window.google.maps.Marker({\n            position: marker.position,\n            icon: marker.icon,\n            map: map,\n            zIndex: Math.round(marker.position.lat * 100000)\n          });\n          instance.addListener('click', function () {\n            return handleMarkerClick(marker, index);\n          });\n          return instance;\n        });\n        updateMapMarkers(instances);\n      } else {\n        updateMapMarkers([]);\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [markers, map]);\n  (0, _react.useEffect)(function () {\n    if (map) {\n      trafficLayer.setMap(showTraffic ? map : null);\n    }\n  }, [showTraffic, map, trafficLayer]);\n  (0, _react.useEffect)(function () {\n    if (map) {\n      transitLayer.setMap(showTransit ? map : null);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [showTransit, map]);\n  (0, _react.useEffect)(function () {\n    if (map) {\n      var hasNewMarkers = mapMarkers.length > 0;\n\n      if (center === 'auto') {\n        if (hasNewMarkers) {\n          var bounds = new window.google.maps.LatLngBounds();\n          mapMarkers.forEach(function (markerInstance) {\n            return bounds.extend(markerInstance.getPosition());\n          });\n          map.setCenter(bounds.getCenter());\n\n          if (mapMarkers.length > 1) {\n            map.fitBounds(bounds);\n          } else {\n            map.setZoom(MAX_ZOOM);\n          }\n        }\n      } else {\n        map.setCenter(center);\n        map.setZoom(MAX_ZOOM);\n      }\n    }\n  }, [center, map, mapMarkers]);\n  (0, _react.useEffect)(function () {\n    if (map) {\n      map.setZoom(Math.min(zoom, MAX_ZOOM));\n    }\n  }, [zoom, map]);\n  (0, _react.useEffect)(function () {\n    if (map) {\n      map.setMapTypeId(type);\n    }\n  }, [type, map]);\n  return /*#__PURE__*/_react[\"default\"].createElement(_container[\"default\"], {\n    style: style,\n    className: className,\n    ref: container\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    ref: mapContainer,\n    style: (0, _getMapContainerStyles[\"default\"])(container.current)\n  }), /*#__PURE__*/_react[\"default\"].createElement(_controls[\"default\"], null, children));\n}\n\nMapComponent.propTypes = {\n  isScriptLoaded: _propTypes[\"default\"].bool.isRequired,\n  isScriptLoadSucceed: _propTypes[\"default\"].bool.isRequired,\n  markers: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n    position: _propTypes[\"default\"].shape({\n      lat: _propTypes[\"default\"].number,\n      lng: _propTypes[\"default\"].number\n    }).isRequired,\n    icon: _propTypes[\"default\"].shape({\n      path: _propTypes[\"default\"].string.isRequired,\n      fillColor: _propTypes[\"default\"].string,\n      fillOpacity: _propTypes[\"default\"].number,\n      scale: _propTypes[\"default\"].number,\n      strokeColor: _propTypes[\"default\"].string,\n      strokeOpacity: _propTypes[\"default\"].number,\n      strokeWeight: _propTypes[\"default\"].number,\n      rotation: _propTypes[\"default\"].number\n    })\n  })),\n  className: _propTypes[\"default\"].string,\n  style: _propTypes[\"default\"].object,\n  zoom: _propTypes[\"default\"].number,\n  center: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].shape({\n    lat: _propTypes[\"default\"].number,\n    lng: _propTypes[\"default\"].number\n  }), _propTypes[\"default\"].oneOf(['auto'])]),\n  showTraffic: _propTypes[\"default\"].bool,\n  showTransit: _propTypes[\"default\"].bool,\n  children: _propTypes[\"default\"].node,\n  type: _propTypes[\"default\"].oneOf(['roadmap', 'satellite', 'hybrid', 'terrain']),\n  onMarkerClick: _propTypes[\"default\"].func\n};\nMapComponent.defaultProps = {\n  markers: [],\n  className: undefined,\n  style: undefined,\n  zoom: 2,\n  center: 'auto',\n  showTraffic: false,\n  showTransit: false,\n  children: null,\n  type: 'roadmap',\n  onMarkerClick: function onMarkerClick() {}\n};","map":{"version":3,"sources":["F:/PorzotokFrontend/node_modules/react-rainbow-components/components/PresenceMap/component.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","MapComponent","_slicedToArray2","_react","_propTypes","_container","_controls","_getMapContainerStyles","MAX_ZOOM","props","showTraffic","showTransit","center","zoom","markers","style","className","children","type","isScriptLoaded","isScriptLoadSucceed","onMarkerClick","container","useRef","mapContainer","_useState","useState","_useState2","map","setMap","_useState3","_useState4","mapMarkers","updateMapMarkers","_useState5","_useState6","trafficLayer","setTrafficLayer","_useState7","_useState8","transitLayer","setTransitLayer","useEffect","mapOptions","lat","lng","disableDefaultUI","mapInstance","window","google","maps","Map","current","trafficInstance","TrafficLayer","transitInstance","TransitLayer","handleMarkerClick","marker","index","forEach","Array","isArray","instances","instance","Marker","position","icon","zIndex","Math","round","addListener","hasNewMarkers","length","bounds","LatLngBounds","markerInstance","extend","getPosition","setCenter","getCenter","fitBounds","setZoom","min","setMapTypeId","createElement","ref","propTypes","bool","isRequired","arrayOf","shape","number","path","string","fillColor","fillOpacity","scale","strokeColor","strokeOpacity","strokeWeight","rotation","object","oneOfType","oneOf","node","func","defaultProps","undefined"],"mappings":"AAAA;;AAEA,IAAIA,uBAAuB,GAAGC,OAAO,CAAC,+CAAD,CAArC;;AAEA,IAAIC,sBAAsB,GAAGD,OAAO,CAAC,8CAAD,CAApC;;AAEAE,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAAC,SAAD,CAAP,GAAqBE,YAArB;;AAEA,IAAIC,eAAe,GAAGN,sBAAsB,CAACD,OAAO,CAAC,sCAAD,CAAR,CAA5C;;AAEA,IAAIQ,MAAM,GAAGT,uBAAuB,CAACC,OAAO,CAAC,OAAD,CAAR,CAApC;;AAEA,IAAIS,UAAU,GAAGR,sBAAsB,CAACD,OAAO,CAAC,YAAD,CAAR,CAAvC;;AAEA,IAAIU,UAAU,GAAGT,sBAAsB,CAACD,OAAO,CAAC,oBAAD,CAAR,CAAvC;;AAEA,IAAIW,SAAS,GAAGV,sBAAsB,CAACD,OAAO,CAAC,mBAAD,CAAR,CAAtC;;AAEA,IAAIY,sBAAsB,GAAGX,sBAAsB,CAACD,OAAO,CAAC,yBAAD,CAAR,CAAnD;;AAEA,IAAIa,QAAQ,GAAG,EAAf;;AAEA,SAASP,YAAT,CAAsBQ,KAAtB,EAA6B;AAC3B,MAAIC,WAAW,GAAGD,KAAK,CAACC,WAAxB;AAAA,MACIC,WAAW,GAAGF,KAAK,CAACE,WADxB;AAAA,MAEIC,MAAM,GAAGH,KAAK,CAACG,MAFnB;AAAA,MAGIC,IAAI,GAAGJ,KAAK,CAACI,IAHjB;AAAA,MAIIC,OAAO,GAAGL,KAAK,CAACK,OAJpB;AAAA,MAKIC,KAAK,GAAGN,KAAK,CAACM,KALlB;AAAA,MAMIC,SAAS,GAAGP,KAAK,CAACO,SANtB;AAAA,MAOIC,QAAQ,GAAGR,KAAK,CAACQ,QAPrB;AAAA,MAQIC,IAAI,GAAGT,KAAK,CAACS,IARjB;AAAA,MASIC,cAAc,GAAGV,KAAK,CAACU,cAT3B;AAAA,MAUIC,mBAAmB,GAAGX,KAAK,CAACW,mBAVhC;AAAA,MAWIC,aAAa,GAAGZ,KAAK,CAACY,aAX1B;AAYA,MAAIC,SAAS,GAAG,CAAC,GAAGnB,MAAM,CAACoB,MAAX,GAAhB;AACA,MAAIC,YAAY,GAAG,CAAC,GAAGrB,MAAM,CAACoB,MAAX,GAAnB;;AAEA,MAAIE,SAAS,GAAG,CAAC,GAAGtB,MAAM,CAACuB,QAAX,GAAhB;AAAA,MACIC,UAAU,GAAG,CAAC,GAAGzB,eAAe,CAAC,SAAD,CAAnB,EAAgCuB,SAAhC,EAA2C,CAA3C,CADjB;AAAA,MAEIG,GAAG,GAAGD,UAAU,CAAC,CAAD,CAFpB;AAAA,MAGIE,MAAM,GAAGF,UAAU,CAAC,CAAD,CAHvB;;AAKA,MAAIG,UAAU,GAAG,CAAC,GAAG3B,MAAM,CAACuB,QAAX,EAAqB,EAArB,CAAjB;AAAA,MACIK,UAAU,GAAG,CAAC,GAAG7B,eAAe,CAAC,SAAD,CAAnB,EAAgC4B,UAAhC,EAA4C,CAA5C,CADjB;AAAA,MAEIE,UAAU,GAAGD,UAAU,CAAC,CAAD,CAF3B;AAAA,MAGIE,gBAAgB,GAAGF,UAAU,CAAC,CAAD,CAHjC;;AAKA,MAAIG,UAAU,GAAG,CAAC,GAAG/B,MAAM,CAACuB,QAAX,EAAqB,KAArB,CAAjB;AAAA,MACIS,UAAU,GAAG,CAAC,GAAGjC,eAAe,CAAC,SAAD,CAAnB,EAAgCgC,UAAhC,EAA4C,CAA5C,CADjB;AAAA,MAEIE,YAAY,GAAGD,UAAU,CAAC,CAAD,CAF7B;AAAA,MAGIE,eAAe,GAAGF,UAAU,CAAC,CAAD,CAHhC;;AAKA,MAAIG,UAAU,GAAG,CAAC,GAAGnC,MAAM,CAACuB,QAAX,EAAqB,KAArB,CAAjB;AAAA,MACIa,UAAU,GAAG,CAAC,GAAGrC,eAAe,CAAC,SAAD,CAAnB,EAAgCoC,UAAhC,EAA4C,CAA5C,CADjB;AAAA,MAEIE,YAAY,GAAGD,UAAU,CAAC,CAAD,CAF7B;AAAA,MAGIE,eAAe,GAAGF,UAAU,CAAC,CAAD,CAHhC;;AAKA,GAAC,GAAGpC,MAAM,CAACuC,SAAX,EAAsB,YAAY;AAChC,QAAIvB,cAAc,IAAIC,mBAAtB,EAA2C;AACzC,UAAIuB,UAAU,GAAG;AACf9B,QAAAA,IAAI,EAAE,CADS;AAEfD,QAAAA,MAAM,EAAE;AACNgC,UAAAA,GAAG,EAAE,CADC;AAENC,UAAAA,GAAG,EAAE;AAFC,SAFO;AAMfC,QAAAA,gBAAgB,EAAE;AANH,OAAjB;AAQA,UAAIC,WAAW,GAAG,IAAIC,MAAM,CAACC,MAAP,CAAcC,IAAd,CAAmBC,GAAvB,CAA2B3B,YAAY,CAAC4B,OAAxC,EAAiDT,UAAjD,CAAlB;AACA,UAAIU,eAAe,GAAG,IAAIL,MAAM,CAACC,MAAP,CAAcC,IAAd,CAAmBI,YAAvB,EAAtB;AACA,UAAIC,eAAe,GAAG,IAAIP,MAAM,CAACC,MAAP,CAAcC,IAAd,CAAmBM,YAAvB,EAAtB;AACA3B,MAAAA,MAAM,CAACkB,WAAD,CAAN;AACAV,MAAAA,eAAe,CAACgB,eAAD,CAAf;AACAZ,MAAAA,eAAe,CAACc,eAAD,CAAf;AACD;AACF,GAjBD,EAiBG,CAACpC,cAAD,EAAiBC,mBAAjB,CAjBH;;AAmBA,MAAIqC,iBAAiB,GAAG,SAASA,iBAAT,CAA2BC,MAA3B,EAAmCC,KAAnC,EAA0C;AAChEtC,IAAAA,aAAa,CAACqC,MAAD,EAASC,KAAT,CAAb;AACD,GAFD;;AAIA,GAAC,GAAGxD,MAAM,CAACuC,SAAX,EAAsB,YAAY;AAChC,QAAId,GAAJ,EAAS;AACPI,MAAAA,UAAU,CAAC4B,OAAX,CAAmB,UAAUF,MAAV,EAAkB;AACnC,eAAOA,MAAM,CAAC7B,MAAP,CAAc,IAAd,CAAP;AACD,OAFD;;AAIA,UAAIgC,KAAK,CAACC,OAAN,CAAchD,OAAd,CAAJ,EAA4B;AAC1B,YAAIiD,SAAS,GAAGjD,OAAO,CAACc,GAAR,CAAY,UAAU8B,MAAV,EAAkBC,KAAlB,EAAyB;AACnD,cAAIK,QAAQ,GAAG,IAAIhB,MAAM,CAACC,MAAP,CAAcC,IAAd,CAAmBe,MAAvB,CAA8B;AAC3CC,YAAAA,QAAQ,EAAER,MAAM,CAACQ,QAD0B;AAE3CC,YAAAA,IAAI,EAAET,MAAM,CAACS,IAF8B;AAG3CvC,YAAAA,GAAG,EAAEA,GAHsC;AAI3CwC,YAAAA,MAAM,EAAEC,IAAI,CAACC,KAAL,CAAWZ,MAAM,CAACQ,QAAP,CAAgBtB,GAAhB,GAAsB,MAAjC;AAJmC,WAA9B,CAAf;AAMAoB,UAAAA,QAAQ,CAACO,WAAT,CAAqB,OAArB,EAA8B,YAAY;AACxC,mBAAOd,iBAAiB,CAACC,MAAD,EAASC,KAAT,CAAxB;AACD,WAFD;AAGA,iBAAOK,QAAP;AACD,SAXe,CAAhB;AAYA/B,QAAAA,gBAAgB,CAAC8B,SAAD,CAAhB;AACD,OAdD,MAcO;AACL9B,QAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACD;AACF,KAvB+B,CAuB9B;;AAEH,GAzBD,EAyBG,CAACnB,OAAD,EAAUc,GAAV,CAzBH;AA0BA,GAAC,GAAGzB,MAAM,CAACuC,SAAX,EAAsB,YAAY;AAChC,QAAId,GAAJ,EAAS;AACPQ,MAAAA,YAAY,CAACP,MAAb,CAAoBnB,WAAW,GAAGkB,GAAH,GAAS,IAAxC;AACD;AACF,GAJD,EAIG,CAAClB,WAAD,EAAckB,GAAd,EAAmBQ,YAAnB,CAJH;AAKA,GAAC,GAAGjC,MAAM,CAACuC,SAAX,EAAsB,YAAY;AAChC,QAAId,GAAJ,EAAS;AACPY,MAAAA,YAAY,CAACX,MAAb,CAAoBlB,WAAW,GAAGiB,GAAH,GAAS,IAAxC;AACD,KAH+B,CAG9B;;AAEH,GALD,EAKG,CAACjB,WAAD,EAAciB,GAAd,CALH;AAMA,GAAC,GAAGzB,MAAM,CAACuC,SAAX,EAAsB,YAAY;AAChC,QAAId,GAAJ,EAAS;AACP,UAAI4C,aAAa,GAAGxC,UAAU,CAACyC,MAAX,GAAoB,CAAxC;;AAEA,UAAI7D,MAAM,KAAK,MAAf,EAAuB;AACrB,YAAI4D,aAAJ,EAAmB;AACjB,cAAIE,MAAM,GAAG,IAAI1B,MAAM,CAACC,MAAP,CAAcC,IAAd,CAAmByB,YAAvB,EAAb;AACA3C,UAAAA,UAAU,CAAC4B,OAAX,CAAmB,UAAUgB,cAAV,EAA0B;AAC3C,mBAAOF,MAAM,CAACG,MAAP,CAAcD,cAAc,CAACE,WAAf,EAAd,CAAP;AACD,WAFD;AAGAlD,UAAAA,GAAG,CAACmD,SAAJ,CAAcL,MAAM,CAACM,SAAP,EAAd;;AAEA,cAAIhD,UAAU,CAACyC,MAAX,GAAoB,CAAxB,EAA2B;AACzB7C,YAAAA,GAAG,CAACqD,SAAJ,CAAcP,MAAd;AACD,WAFD,MAEO;AACL9C,YAAAA,GAAG,CAACsD,OAAJ,CAAY1E,QAAZ;AACD;AACF;AACF,OAdD,MAcO;AACLoB,QAAAA,GAAG,CAACmD,SAAJ,CAAcnE,MAAd;AACAgB,QAAAA,GAAG,CAACsD,OAAJ,CAAY1E,QAAZ;AACD;AACF;AACF,GAvBD,EAuBG,CAACI,MAAD,EAASgB,GAAT,EAAcI,UAAd,CAvBH;AAwBA,GAAC,GAAG7B,MAAM,CAACuC,SAAX,EAAsB,YAAY;AAChC,QAAId,GAAJ,EAAS;AACPA,MAAAA,GAAG,CAACsD,OAAJ,CAAYb,IAAI,CAACc,GAAL,CAAStE,IAAT,EAAeL,QAAf,CAAZ;AACD;AACF,GAJD,EAIG,CAACK,IAAD,EAAOe,GAAP,CAJH;AAKA,GAAC,GAAGzB,MAAM,CAACuC,SAAX,EAAsB,YAAY;AAChC,QAAId,GAAJ,EAAS;AACPA,MAAAA,GAAG,CAACwD,YAAJ,CAAiBlE,IAAjB;AACD;AACF,GAJD,EAIG,CAACA,IAAD,EAAOU,GAAP,CAJH;AAKA,SAAO,aAAazB,MAAM,CAAC,SAAD,CAAN,CAAkBkF,aAAlB,CAAgChF,UAAU,CAAC,SAAD,CAA1C,EAAuD;AACzEU,IAAAA,KAAK,EAAEA,KADkE;AAEzEC,IAAAA,SAAS,EAAEA,SAF8D;AAGzEsE,IAAAA,GAAG,EAAEhE;AAHoE,GAAvD,EAIjB,aAAanB,MAAM,CAAC,SAAD,CAAN,CAAkBkF,aAAlB,CAAgC,KAAhC,EAAuC;AACrDC,IAAAA,GAAG,EAAE9D,YADgD;AAErDT,IAAAA,KAAK,EAAE,CAAC,GAAGR,sBAAsB,CAAC,SAAD,CAA1B,EAAuCe,SAAS,CAAC8B,OAAjD;AAF8C,GAAvC,CAJI,EAOhB,aAAajD,MAAM,CAAC,SAAD,CAAN,CAAkBkF,aAAlB,CAAgC/E,SAAS,CAAC,SAAD,CAAzC,EAAsD,IAAtD,EAA4DW,QAA5D,CAPG,CAApB;AAQD;;AAEDhB,YAAY,CAACsF,SAAb,GAAyB;AACvBpE,EAAAA,cAAc,EAAEf,UAAU,CAAC,SAAD,CAAV,CAAsBoF,IAAtB,CAA2BC,UADpB;AAEvBrE,EAAAA,mBAAmB,EAAEhB,UAAU,CAAC,SAAD,CAAV,CAAsBoF,IAAtB,CAA2BC,UAFzB;AAGvB3E,EAAAA,OAAO,EAAEV,UAAU,CAAC,SAAD,CAAV,CAAsBsF,OAAtB,CAA8BtF,UAAU,CAAC,SAAD,CAAV,CAAsBuF,KAAtB,CAA4B;AACjEzB,IAAAA,QAAQ,EAAE9D,UAAU,CAAC,SAAD,CAAV,CAAsBuF,KAAtB,CAA4B;AACpC/C,MAAAA,GAAG,EAAExC,UAAU,CAAC,SAAD,CAAV,CAAsBwF,MADS;AAEpC/C,MAAAA,GAAG,EAAEzC,UAAU,CAAC,SAAD,CAAV,CAAsBwF;AAFS,KAA5B,EAGPH,UAJ8D;AAKjEtB,IAAAA,IAAI,EAAE/D,UAAU,CAAC,SAAD,CAAV,CAAsBuF,KAAtB,CAA4B;AAChCE,MAAAA,IAAI,EAAEzF,UAAU,CAAC,SAAD,CAAV,CAAsB0F,MAAtB,CAA6BL,UADH;AAEhCM,MAAAA,SAAS,EAAE3F,UAAU,CAAC,SAAD,CAAV,CAAsB0F,MAFD;AAGhCE,MAAAA,WAAW,EAAE5F,UAAU,CAAC,SAAD,CAAV,CAAsBwF,MAHH;AAIhCK,MAAAA,KAAK,EAAE7F,UAAU,CAAC,SAAD,CAAV,CAAsBwF,MAJG;AAKhCM,MAAAA,WAAW,EAAE9F,UAAU,CAAC,SAAD,CAAV,CAAsB0F,MALH;AAMhCK,MAAAA,aAAa,EAAE/F,UAAU,CAAC,SAAD,CAAV,CAAsBwF,MANL;AAOhCQ,MAAAA,YAAY,EAAEhG,UAAU,CAAC,SAAD,CAAV,CAAsBwF,MAPJ;AAQhCS,MAAAA,QAAQ,EAAEjG,UAAU,CAAC,SAAD,CAAV,CAAsBwF;AARA,KAA5B;AAL2D,GAA5B,CAA9B,CAHc;AAmBvB5E,EAAAA,SAAS,EAAEZ,UAAU,CAAC,SAAD,CAAV,CAAsB0F,MAnBV;AAoBvB/E,EAAAA,KAAK,EAAEX,UAAU,CAAC,SAAD,CAAV,CAAsBkG,MApBN;AAqBvBzF,EAAAA,IAAI,EAAET,UAAU,CAAC,SAAD,CAAV,CAAsBwF,MArBL;AAsBvBhF,EAAAA,MAAM,EAAER,UAAU,CAAC,SAAD,CAAV,CAAsBmG,SAAtB,CAAgC,CAACnG,UAAU,CAAC,SAAD,CAAV,CAAsBuF,KAAtB,CAA4B;AACnE/C,IAAAA,GAAG,EAAExC,UAAU,CAAC,SAAD,CAAV,CAAsBwF,MADwC;AAEnE/C,IAAAA,GAAG,EAAEzC,UAAU,CAAC,SAAD,CAAV,CAAsBwF;AAFwC,GAA5B,CAAD,EAGpCxF,UAAU,CAAC,SAAD,CAAV,CAAsBoG,KAAtB,CAA4B,CAAC,MAAD,CAA5B,CAHoC,CAAhC,CAtBe;AA0BvB9F,EAAAA,WAAW,EAAEN,UAAU,CAAC,SAAD,CAAV,CAAsBoF,IA1BZ;AA2BvB7E,EAAAA,WAAW,EAAEP,UAAU,CAAC,SAAD,CAAV,CAAsBoF,IA3BZ;AA4BvBvE,EAAAA,QAAQ,EAAEb,UAAU,CAAC,SAAD,CAAV,CAAsBqG,IA5BT;AA6BvBvF,EAAAA,IAAI,EAAEd,UAAU,CAAC,SAAD,CAAV,CAAsBoG,KAAtB,CAA4B,CAAC,SAAD,EAAY,WAAZ,EAAyB,QAAzB,EAAmC,SAAnC,CAA5B,CA7BiB;AA8BvBnF,EAAAA,aAAa,EAAEjB,UAAU,CAAC,SAAD,CAAV,CAAsBsG;AA9Bd,CAAzB;AAgCAzG,YAAY,CAAC0G,YAAb,GAA4B;AAC1B7F,EAAAA,OAAO,EAAE,EADiB;AAE1BE,EAAAA,SAAS,EAAE4F,SAFe;AAG1B7F,EAAAA,KAAK,EAAE6F,SAHmB;AAI1B/F,EAAAA,IAAI,EAAE,CAJoB;AAK1BD,EAAAA,MAAM,EAAE,MALkB;AAM1BF,EAAAA,WAAW,EAAE,KANa;AAO1BC,EAAAA,WAAW,EAAE,KAPa;AAQ1BM,EAAAA,QAAQ,EAAE,IARgB;AAS1BC,EAAAA,IAAI,EAAE,SAToB;AAU1BG,EAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB,CAAE;AAVhB,CAA5B","sourcesContent":["\"use strict\";\r\n\r\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\r\n\r\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports[\"default\"] = MapComponent;\r\n\r\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\r\n\r\nvar _react = _interopRequireWildcard(require(\"react\"));\r\n\r\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\r\n\r\nvar _container = _interopRequireDefault(require(\"./styled/container\"));\r\n\r\nvar _controls = _interopRequireDefault(require(\"./styled/controls\"));\r\n\r\nvar _getMapContainerStyles = _interopRequireDefault(require(\"./getMapContainerStyles\"));\r\n\r\nvar MAX_ZOOM = 15;\r\n\r\nfunction MapComponent(props) {\r\n  var showTraffic = props.showTraffic,\r\n      showTransit = props.showTransit,\r\n      center = props.center,\r\n      zoom = props.zoom,\r\n      markers = props.markers,\r\n      style = props.style,\r\n      className = props.className,\r\n      children = props.children,\r\n      type = props.type,\r\n      isScriptLoaded = props.isScriptLoaded,\r\n      isScriptLoadSucceed = props.isScriptLoadSucceed,\r\n      onMarkerClick = props.onMarkerClick;\r\n  var container = (0, _react.useRef)();\r\n  var mapContainer = (0, _react.useRef)();\r\n\r\n  var _useState = (0, _react.useState)(),\r\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\r\n      map = _useState2[0],\r\n      setMap = _useState2[1];\r\n\r\n  var _useState3 = (0, _react.useState)([]),\r\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\r\n      mapMarkers = _useState4[0],\r\n      updateMapMarkers = _useState4[1];\r\n\r\n  var _useState5 = (0, _react.useState)(false),\r\n      _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\r\n      trafficLayer = _useState6[0],\r\n      setTrafficLayer = _useState6[1];\r\n\r\n  var _useState7 = (0, _react.useState)(false),\r\n      _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\r\n      transitLayer = _useState8[0],\r\n      setTransitLayer = _useState8[1];\r\n\r\n  (0, _react.useEffect)(function () {\r\n    if (isScriptLoaded && isScriptLoadSucceed) {\r\n      var mapOptions = {\r\n        zoom: 2,\r\n        center: {\r\n          lat: 0,\r\n          lng: 0\r\n        },\r\n        disableDefaultUI: true\r\n      };\r\n      var mapInstance = new window.google.maps.Map(mapContainer.current, mapOptions);\r\n      var trafficInstance = new window.google.maps.TrafficLayer();\r\n      var transitInstance = new window.google.maps.TransitLayer();\r\n      setMap(mapInstance);\r\n      setTrafficLayer(trafficInstance);\r\n      setTransitLayer(transitInstance);\r\n    }\r\n  }, [isScriptLoaded, isScriptLoadSucceed]);\r\n\r\n  var handleMarkerClick = function handleMarkerClick(marker, index) {\r\n    onMarkerClick(marker, index);\r\n  };\r\n\r\n  (0, _react.useEffect)(function () {\r\n    if (map) {\r\n      mapMarkers.forEach(function (marker) {\r\n        return marker.setMap(null);\r\n      });\r\n\r\n      if (Array.isArray(markers)) {\r\n        var instances = markers.map(function (marker, index) {\r\n          var instance = new window.google.maps.Marker({\r\n            position: marker.position,\r\n            icon: marker.icon,\r\n            map: map,\r\n            zIndex: Math.round(marker.position.lat * 100000)\r\n          });\r\n          instance.addListener('click', function () {\r\n            return handleMarkerClick(marker, index);\r\n          });\r\n          return instance;\r\n        });\r\n        updateMapMarkers(instances);\r\n      } else {\r\n        updateMapMarkers([]);\r\n      }\r\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\r\n\r\n  }, [markers, map]);\r\n  (0, _react.useEffect)(function () {\r\n    if (map) {\r\n      trafficLayer.setMap(showTraffic ? map : null);\r\n    }\r\n  }, [showTraffic, map, trafficLayer]);\r\n  (0, _react.useEffect)(function () {\r\n    if (map) {\r\n      transitLayer.setMap(showTransit ? map : null);\r\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\r\n\r\n  }, [showTransit, map]);\r\n  (0, _react.useEffect)(function () {\r\n    if (map) {\r\n      var hasNewMarkers = mapMarkers.length > 0;\r\n\r\n      if (center === 'auto') {\r\n        if (hasNewMarkers) {\r\n          var bounds = new window.google.maps.LatLngBounds();\r\n          mapMarkers.forEach(function (markerInstance) {\r\n            return bounds.extend(markerInstance.getPosition());\r\n          });\r\n          map.setCenter(bounds.getCenter());\r\n\r\n          if (mapMarkers.length > 1) {\r\n            map.fitBounds(bounds);\r\n          } else {\r\n            map.setZoom(MAX_ZOOM);\r\n          }\r\n        }\r\n      } else {\r\n        map.setCenter(center);\r\n        map.setZoom(MAX_ZOOM);\r\n      }\r\n    }\r\n  }, [center, map, mapMarkers]);\r\n  (0, _react.useEffect)(function () {\r\n    if (map) {\r\n      map.setZoom(Math.min(zoom, MAX_ZOOM));\r\n    }\r\n  }, [zoom, map]);\r\n  (0, _react.useEffect)(function () {\r\n    if (map) {\r\n      map.setMapTypeId(type);\r\n    }\r\n  }, [type, map]);\r\n  return /*#__PURE__*/_react[\"default\"].createElement(_container[\"default\"], {\r\n    style: style,\r\n    className: className,\r\n    ref: container\r\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\r\n    ref: mapContainer,\r\n    style: (0, _getMapContainerStyles[\"default\"])(container.current)\r\n  }), /*#__PURE__*/_react[\"default\"].createElement(_controls[\"default\"], null, children));\r\n}\r\n\r\nMapComponent.propTypes = {\r\n  isScriptLoaded: _propTypes[\"default\"].bool.isRequired,\r\n  isScriptLoadSucceed: _propTypes[\"default\"].bool.isRequired,\r\n  markers: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\r\n    position: _propTypes[\"default\"].shape({\r\n      lat: _propTypes[\"default\"].number,\r\n      lng: _propTypes[\"default\"].number\r\n    }).isRequired,\r\n    icon: _propTypes[\"default\"].shape({\r\n      path: _propTypes[\"default\"].string.isRequired,\r\n      fillColor: _propTypes[\"default\"].string,\r\n      fillOpacity: _propTypes[\"default\"].number,\r\n      scale: _propTypes[\"default\"].number,\r\n      strokeColor: _propTypes[\"default\"].string,\r\n      strokeOpacity: _propTypes[\"default\"].number,\r\n      strokeWeight: _propTypes[\"default\"].number,\r\n      rotation: _propTypes[\"default\"].number\r\n    })\r\n  })),\r\n  className: _propTypes[\"default\"].string,\r\n  style: _propTypes[\"default\"].object,\r\n  zoom: _propTypes[\"default\"].number,\r\n  center: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].shape({\r\n    lat: _propTypes[\"default\"].number,\r\n    lng: _propTypes[\"default\"].number\r\n  }), _propTypes[\"default\"].oneOf(['auto'])]),\r\n  showTraffic: _propTypes[\"default\"].bool,\r\n  showTransit: _propTypes[\"default\"].bool,\r\n  children: _propTypes[\"default\"].node,\r\n  type: _propTypes[\"default\"].oneOf(['roadmap', 'satellite', 'hybrid', 'terrain']),\r\n  onMarkerClick: _propTypes[\"default\"].func\r\n};\r\nMapComponent.defaultProps = {\r\n  markers: [],\r\n  className: undefined,\r\n  style: undefined,\r\n  zoom: 2,\r\n  center: 'auto',\r\n  showTraffic: false,\r\n  showTransit: false,\r\n  children: null,\r\n  type: 'roadmap',\r\n  onMarkerClick: function onMarkerClick() {}\r\n};"]},"metadata":{},"sourceType":"script"}