{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = DoubleCalendar;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _hooks = require(\"../../../libs/hooks\");\n\nvar _context = require(\"../context\");\n\nvar _rightArrow = _interopRequireDefault(require(\"../icons/rightArrow\"));\n\nvar _leftArrow = _interopRequireDefault(require(\"../icons/leftArrow\"));\n\nvar _daysOfWeek = _interopRequireDefault(require(\"../daysOfWeek\"));\n\nvar _month = _interopRequireDefault(require(\"../month\"));\n\nvar _helpers = require(\"../helpers\");\n\nvar _hooks2 = require(\"./hooks\");\n\nvar _yearSelect = _interopRequireDefault(require(\"./yearSelect\"));\n\nvar _arrowButton = _interopRequireDefault(require(\"../styled/arrowButton\"));\n\nvar _table = _interopRequireDefault(require(\"../styled/table\"));\n\nvar _styled = require(\"./styled\");\n\nvar _shouldUpdateCurrentMonth = _interopRequireDefault(require(\"./helpers/shouldUpdateCurrentMonth\"));\n\nvar _useHeaderArrowNav2 = _interopRequireDefault(require(\"../hooks/useHeaderArrowNav\"));\n\nfunction DoubleCalendar(props) {\n  var id = props.id,\n      className = props.className,\n      style = props.style,\n      locale = props.locale,\n      value = props.value,\n      minDate = props.minDate,\n      maxDate = props.maxDate,\n      onChange = props.onChange,\n      selectedRange = props.selectedRange,\n      selectionType = props.selectionType;\n  var currentValue = (0, _hooks2.useNormalizedValue)(value);\n\n  var _useState = (0, _react.useState)(currentValue),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      focusedDate = _useState2[0],\n      setFocusedDate = _useState2[1];\n\n  var _useState3 = (0, _react.useState)((0, _helpers.getFirstDayMonth)(currentValue)),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      currentMonth = _useState4[0],\n      setCurrentMonth = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(selectedRange),\n      _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\n      currentRange = _useState6[0],\n      setCurrentRange = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(false),\n      _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\n      enableNavKeys = _useState8[0],\n      setEnableNavKeys = _useState8[1];\n\n  var rightCalendarMonth = (0, _helpers.addMonths)(currentMonth, 1);\n  var currentYear = currentMonth.getFullYear();\n  var rightCalendarYear = rightCalendarMonth.getFullYear();\n  var currentMonthLabelId = (0, _hooks.useUniqueIdentifier)('first-month');\n  var rightMonthLabelId = (0, _hooks.useUniqueIdentifier)('second-month');\n  var currentMonthFormattedLabel = (0, _hooks2.useFormattedMonth)(currentMonth, locale);\n  var rightMonthFormattedLabel = (0, _hooks2.useFormattedMonth)(rightCalendarMonth, locale);\n  var yearsRange = (0, _hooks2.useYearsRange)(minDate, maxDate, currentMonth);\n\n  var _useDisabledControls = (0, _hooks2.useDisabledControls)(yearsRange, minDate, maxDate, currentMonth, rightCalendarMonth),\n      _useDisabledControls2 = (0, _slicedToArray2[\"default\"])(_useDisabledControls, 2),\n      disablePreviousMonth = _useDisabledControls2[0],\n      disableNextMonth = _useDisabledControls2[1];\n\n  var handleKeyDown = (0, _hooks2.useHandleKeyDown)(focusedDate, currentMonth, rightCalendarMonth, minDate, maxDate, onChange, enableNavKeys, setFocusedDate, setCurrentMonth);\n  var headerElementsRefs = [(0, _react.useRef)(), (0, _react.useRef)(), (0, _react.useRef)(), (0, _react.useRef)()];\n\n  var _useHeaderArrowNav = (0, _useHeaderArrowNav2[\"default\"])({\n    disableNextMonth: disableNextMonth,\n    disablePreviousMonth: disablePreviousMonth,\n    refs: headerElementsRefs,\n    delta: 1,\n    firstIndex: disablePreviousMonth ? 1 : 0,\n    lastIndex: disableNextMonth ? 2 : 3\n  }),\n      updateFocusedItem = _useHeaderArrowNav.updateFocusedItem,\n      handleHeaderElementKeyDown = _useHeaderArrowNav.handleKeyDown;\n\n  var handleOnDayFocus = function handleOnDayFocus() {\n    return setEnableNavKeys(true);\n  };\n\n  var handleOnDayBlur = function handleOnDayBlur() {\n    return setEnableNavKeys(false);\n  };\n\n  var handleOnDayHover = (0, _react.useCallback)(function (date) {\n    if (selectionType === 'single' || (0, _helpers.isEmptyRange)(selectedRange)) return;\n\n    var _selectedRange = (0, _slicedToArray2[\"default\"])(selectedRange, 2),\n        rangeStart = _selectedRange[0],\n        rangeEnd = _selectedRange[1];\n\n    if (rangeEnd) return;\n\n    var _currentRange = (0, _slicedToArray2[\"default\"])(currentRange, 1),\n        currentRangeStart = _currentRange[0];\n\n    if ((0, _helpers.isDateBelowLimit)(date, rangeStart)) {\n      setCurrentRange([currentRangeStart]);\n    } else {\n      setCurrentRange([rangeStart, date]);\n    }\n  }, [currentRange, selectedRange, selectionType]);\n  var prevMonthClick = (0, _react.useCallback)(function () {\n    var newMonth = (0, _helpers.addMonths)(currentMonth, -1);\n    setFocusedDate((0, _helpers.getNextFocusedDate)(value, newMonth));\n    setCurrentMonth(newMonth);\n    updateFocusedItem(0);\n  }, [value, currentMonth, updateFocusedItem]);\n  var nextMonthClick = (0, _react.useCallback)(function () {\n    var newMonth = (0, _helpers.addMonths)(currentMonth, 1);\n    setFocusedDate((0, _helpers.getNextFocusedDate)(value, newMonth));\n    setCurrentMonth(newMonth);\n    updateFocusedItem(3);\n  }, [value, currentMonth, updateFocusedItem]);\n  var handleLeftCalendarYearChange = (0, _react.useCallback)(function (event) {\n    var year = +event.target.value;\n    var newMonth = new Date(currentMonth);\n    newMonth.setFullYear(year);\n    setFocusedDate((0, _helpers.getNextFocusedDate)(value, newMonth));\n    setCurrentMonth(newMonth);\n  }, [currentMonth, value]);\n  var handleRightCalendarYearChange = (0, _react.useCallback)(function (event) {\n    var year = +event.target.value;\n    var newMonth = new Date(rightCalendarMonth);\n    newMonth.setFullYear(year);\n    setFocusedDate((0, _helpers.getNextFocusedDate)(value, newMonth));\n    setCurrentMonth((0, _helpers.addMonths)(newMonth, -1));\n  }, [rightCalendarMonth, value]);\n  (0, _react.useEffect)(function () {\n    setFocusedDate(currentValue);\n\n    if ((0, _shouldUpdateCurrentMonth[\"default\"])(currentValue, currentMonth, rightCalendarMonth)) {\n      setCurrentMonth((0, _helpers.getFirstDayMonth)(currentValue));\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [currentValue]);\n  (0, _react.useEffect)(function () {\n    setCurrentRange(selectedRange);\n  }, [selectedRange]);\n  var currentYearSelectTabIndex = disablePreviousMonth ? undefined : -1;\n  return /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledSection, {\n    id: id,\n    className: className,\n    style: style,\n    \"data-calendar-type\": \"double\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledControlsContainer, null, /*#__PURE__*/_react[\"default\"].createElement(_arrowButton[\"default\"], {\n    ref: headerElementsRefs[0],\n    onClick: prevMonthClick,\n    disabled: disablePreviousMonth,\n    size: \"medium\",\n    icon: /*#__PURE__*/_react[\"default\"].createElement(_leftArrow[\"default\"], null),\n    assistiveText: \"Previous Month\",\n    onKeyDown: handleHeaderElementKeyDown,\n    onFocus: function onFocus() {\n      return updateFocusedItem(0);\n    }\n  }), /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledHeaderContainer, {\n    onKeyDown: handleHeaderElementKeyDown\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledMonth, {\n    id: currentMonthLabelId,\n    \"data-id\": \"month\"\n  }, currentMonthFormattedLabel), /*#__PURE__*/_react[\"default\"].createElement(_yearSelect[\"default\"], {\n    ref: headerElementsRefs[1],\n    currentYear: currentYear,\n    yearsRange: yearsRange,\n    onYearChange: handleLeftCalendarYearChange,\n    tabIndex: currentYearSelectTabIndex,\n    onClick: function onClick() {\n      return updateFocusedItem(1);\n    },\n    onFocus: function onFocus() {\n      return updateFocusedItem(1);\n    }\n  }))), /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledControlsContainer, {\n    onKeyDown: handleHeaderElementKeyDown\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledHeaderContainer, null, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledMonth, {\n    id: rightMonthLabelId,\n    \"data-id\": \"month\"\n  }, rightMonthFormattedLabel), /*#__PURE__*/_react[\"default\"].createElement(_yearSelect[\"default\"], {\n    ref: headerElementsRefs[2],\n    currentYear: rightCalendarYear,\n    yearsRange: yearsRange,\n    onYearChange: handleRightCalendarYearChange,\n    tabIndex: -1,\n    onClick: function onClick() {\n      return updateFocusedItem(2);\n    },\n    onFocus: function onFocus() {\n      return updateFocusedItem(2);\n    }\n  })), /*#__PURE__*/_react[\"default\"].createElement(_arrowButton[\"default\"], {\n    ref: headerElementsRefs[3],\n    onClick: nextMonthClick,\n    disabled: disableNextMonth,\n    size: \"medium\",\n    icon: /*#__PURE__*/_react[\"default\"].createElement(_rightArrow[\"default\"], null),\n    assistiveText: \"Next Month\",\n    tabIndex: -1,\n    onKeyDown: handleHeaderElementKeyDown,\n    onFocus: function onFocus() {\n      return updateFocusedItem(3);\n    }\n  })), /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledCalendar, null, /*#__PURE__*/_react[\"default\"].createElement(_context.Provider, {\n    value: {\n      useAutoFocus: enableNavKeys,\n      focusedDate: focusedDate,\n      selectionType: selectionType,\n      selectedRange: selectedRange,\n      currentRange: currentRange,\n      privateOnFocus: handleOnDayFocus,\n      privateOnBlur: handleOnDayBlur,\n      privateKeyDown: handleKeyDown,\n      privateOnHover: handleOnDayHover\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"], {\n    role: \"grid\",\n    \"aria-labelledby\": currentMonthLabelId\n  }, /*#__PURE__*/_react[\"default\"].createElement(_daysOfWeek[\"default\"], {\n    locale: locale\n  }), /*#__PURE__*/_react[\"default\"].createElement(_month[\"default\"], {\n    value: value,\n    firstDayMonth: currentMonth,\n    minDate: minDate,\n    maxDate: maxDate,\n    onChange: onChange,\n    selectedRange: currentRange\n  })))), /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledCalendar, null, /*#__PURE__*/_react[\"default\"].createElement(_context.Provider, {\n    value: {\n      useAutoFocus: enableNavKeys,\n      focusedDate: focusedDate,\n      selectionType: selectionType,\n      selectedRange: selectedRange,\n      currentRange: currentRange,\n      privateOnFocus: handleOnDayFocus,\n      privateOnBlur: handleOnDayBlur,\n      privateKeyDown: handleKeyDown,\n      privateOnHover: handleOnDayHover\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"], {\n    role: \"grid\",\n    \"aria-labelledby\": rightMonthLabelId\n  }, /*#__PURE__*/_react[\"default\"].createElement(_daysOfWeek[\"default\"], {\n    locale: locale\n  }), /*#__PURE__*/_react[\"default\"].createElement(_month[\"default\"], {\n    value: value,\n    firstDayMonth: rightCalendarMonth,\n    minDate: minDate,\n    maxDate: maxDate,\n    onChange: onChange,\n    selectedRange: currentRange\n  })))));\n}\n\nDoubleCalendar.propTypes = {\n  value: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].instanceOf(Date), _propTypes[\"default\"].string]),\n  maxDate: _propTypes[\"default\"].instanceOf(Date),\n  minDate: _propTypes[\"default\"].instanceOf(Date),\n  onChange: _propTypes[\"default\"].func,\n  className: _propTypes[\"default\"].string,\n  style: _propTypes[\"default\"].object,\n  id: _propTypes[\"default\"].string,\n  locale: _propTypes[\"default\"].string,\n  selectionType: _propTypes[\"default\"].oneOf(['single', 'range']),\n  selectedRange: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].oneOfType([_propTypes[\"default\"].instanceOf(Date), _propTypes[\"default\"].string]))\n};\nDoubleCalendar.defaultProps = {\n  value: undefined,\n  minDate: undefined,\n  maxDate: undefined,\n  onChange: function onChange() {},\n  className: undefined,\n  style: undefined,\n  id: undefined,\n  locale: undefined,\n  selectionType: 'single',\n  selectedRange: undefined\n};","map":{"version":3,"sources":["F:/PorzotokFrontend/node_modules/react-rainbow-components/components/Calendar/doubleCalendar/index.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","DoubleCalendar","_slicedToArray2","_react","_propTypes","_hooks","_context","_rightArrow","_leftArrow","_daysOfWeek","_month","_helpers","_hooks2","_yearSelect","_arrowButton","_table","_styled","_shouldUpdateCurrentMonth","_useHeaderArrowNav2","props","id","className","style","locale","minDate","maxDate","onChange","selectedRange","selectionType","currentValue","useNormalizedValue","_useState","useState","_useState2","focusedDate","setFocusedDate","_useState3","getFirstDayMonth","_useState4","currentMonth","setCurrentMonth","_useState5","_useState6","currentRange","setCurrentRange","_useState7","_useState8","enableNavKeys","setEnableNavKeys","rightCalendarMonth","addMonths","currentYear","getFullYear","rightCalendarYear","currentMonthLabelId","useUniqueIdentifier","rightMonthLabelId","currentMonthFormattedLabel","useFormattedMonth","rightMonthFormattedLabel","yearsRange","useYearsRange","_useDisabledControls","useDisabledControls","_useDisabledControls2","disablePreviousMonth","disableNextMonth","handleKeyDown","useHandleKeyDown","headerElementsRefs","useRef","_useHeaderArrowNav","refs","delta","firstIndex","lastIndex","updateFocusedItem","handleHeaderElementKeyDown","handleOnDayFocus","handleOnDayBlur","handleOnDayHover","useCallback","date","isEmptyRange","_selectedRange","rangeStart","rangeEnd","_currentRange","currentRangeStart","isDateBelowLimit","prevMonthClick","newMonth","getNextFocusedDate","nextMonthClick","handleLeftCalendarYearChange","event","year","target","Date","setFullYear","handleRightCalendarYearChange","useEffect","currentYearSelectTabIndex","undefined","createElement","StyledSection","StyledControlsContainer","ref","onClick","disabled","size","icon","assistiveText","onKeyDown","onFocus","StyledHeaderContainer","StyledMonth","onYearChange","tabIndex","StyledCalendar","Provider","useAutoFocus","privateOnFocus","privateOnBlur","privateKeyDown","privateOnHover","role","firstDayMonth","propTypes","oneOfType","instanceOf","string","func","object","oneOf","arrayOf","defaultProps"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\r\n\r\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports[\"default\"] = DoubleCalendar;\r\n\r\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\r\n\r\nvar _react = _interopRequireWildcard(require(\"react\"));\r\n\r\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\r\n\r\nvar _hooks = require(\"../../../libs/hooks\");\r\n\r\nvar _context = require(\"../context\");\r\n\r\nvar _rightArrow = _interopRequireDefault(require(\"../icons/rightArrow\"));\r\n\r\nvar _leftArrow = _interopRequireDefault(require(\"../icons/leftArrow\"));\r\n\r\nvar _daysOfWeek = _interopRequireDefault(require(\"../daysOfWeek\"));\r\n\r\nvar _month = _interopRequireDefault(require(\"../month\"));\r\n\r\nvar _helpers = require(\"../helpers\");\r\n\r\nvar _hooks2 = require(\"./hooks\");\r\n\r\nvar _yearSelect = _interopRequireDefault(require(\"./yearSelect\"));\r\n\r\nvar _arrowButton = _interopRequireDefault(require(\"../styled/arrowButton\"));\r\n\r\nvar _table = _interopRequireDefault(require(\"../styled/table\"));\r\n\r\nvar _styled = require(\"./styled\");\r\n\r\nvar _shouldUpdateCurrentMonth = _interopRequireDefault(require(\"./helpers/shouldUpdateCurrentMonth\"));\r\n\r\nvar _useHeaderArrowNav2 = _interopRequireDefault(require(\"../hooks/useHeaderArrowNav\"));\r\n\r\nfunction DoubleCalendar(props) {\r\n  var id = props.id,\r\n      className = props.className,\r\n      style = props.style,\r\n      locale = props.locale,\r\n      value = props.value,\r\n      minDate = props.minDate,\r\n      maxDate = props.maxDate,\r\n      onChange = props.onChange,\r\n      selectedRange = props.selectedRange,\r\n      selectionType = props.selectionType;\r\n  var currentValue = (0, _hooks2.useNormalizedValue)(value);\r\n\r\n  var _useState = (0, _react.useState)(currentValue),\r\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\r\n      focusedDate = _useState2[0],\r\n      setFocusedDate = _useState2[1];\r\n\r\n  var _useState3 = (0, _react.useState)((0, _helpers.getFirstDayMonth)(currentValue)),\r\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\r\n      currentMonth = _useState4[0],\r\n      setCurrentMonth = _useState4[1];\r\n\r\n  var _useState5 = (0, _react.useState)(selectedRange),\r\n      _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\r\n      currentRange = _useState6[0],\r\n      setCurrentRange = _useState6[1];\r\n\r\n  var _useState7 = (0, _react.useState)(false),\r\n      _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\r\n      enableNavKeys = _useState8[0],\r\n      setEnableNavKeys = _useState8[1];\r\n\r\n  var rightCalendarMonth = (0, _helpers.addMonths)(currentMonth, 1);\r\n  var currentYear = currentMonth.getFullYear();\r\n  var rightCalendarYear = rightCalendarMonth.getFullYear();\r\n  var currentMonthLabelId = (0, _hooks.useUniqueIdentifier)('first-month');\r\n  var rightMonthLabelId = (0, _hooks.useUniqueIdentifier)('second-month');\r\n  var currentMonthFormattedLabel = (0, _hooks2.useFormattedMonth)(currentMonth, locale);\r\n  var rightMonthFormattedLabel = (0, _hooks2.useFormattedMonth)(rightCalendarMonth, locale);\r\n  var yearsRange = (0, _hooks2.useYearsRange)(minDate, maxDate, currentMonth);\r\n\r\n  var _useDisabledControls = (0, _hooks2.useDisabledControls)(yearsRange, minDate, maxDate, currentMonth, rightCalendarMonth),\r\n      _useDisabledControls2 = (0, _slicedToArray2[\"default\"])(_useDisabledControls, 2),\r\n      disablePreviousMonth = _useDisabledControls2[0],\r\n      disableNextMonth = _useDisabledControls2[1];\r\n\r\n  var handleKeyDown = (0, _hooks2.useHandleKeyDown)(focusedDate, currentMonth, rightCalendarMonth, minDate, maxDate, onChange, enableNavKeys, setFocusedDate, setCurrentMonth);\r\n  var headerElementsRefs = [(0, _react.useRef)(), (0, _react.useRef)(), (0, _react.useRef)(), (0, _react.useRef)()];\r\n\r\n  var _useHeaderArrowNav = (0, _useHeaderArrowNav2[\"default\"])({\r\n    disableNextMonth: disableNextMonth,\r\n    disablePreviousMonth: disablePreviousMonth,\r\n    refs: headerElementsRefs,\r\n    delta: 1,\r\n    firstIndex: disablePreviousMonth ? 1 : 0,\r\n    lastIndex: disableNextMonth ? 2 : 3\r\n  }),\r\n      updateFocusedItem = _useHeaderArrowNav.updateFocusedItem,\r\n      handleHeaderElementKeyDown = _useHeaderArrowNav.handleKeyDown;\r\n\r\n  var handleOnDayFocus = function handleOnDayFocus() {\r\n    return setEnableNavKeys(true);\r\n  };\r\n\r\n  var handleOnDayBlur = function handleOnDayBlur() {\r\n    return setEnableNavKeys(false);\r\n  };\r\n\r\n  var handleOnDayHover = (0, _react.useCallback)(function (date) {\r\n    if (selectionType === 'single' || (0, _helpers.isEmptyRange)(selectedRange)) return;\r\n\r\n    var _selectedRange = (0, _slicedToArray2[\"default\"])(selectedRange, 2),\r\n        rangeStart = _selectedRange[0],\r\n        rangeEnd = _selectedRange[1];\r\n\r\n    if (rangeEnd) return;\r\n\r\n    var _currentRange = (0, _slicedToArray2[\"default\"])(currentRange, 1),\r\n        currentRangeStart = _currentRange[0];\r\n\r\n    if ((0, _helpers.isDateBelowLimit)(date, rangeStart)) {\r\n      setCurrentRange([currentRangeStart]);\r\n    } else {\r\n      setCurrentRange([rangeStart, date]);\r\n    }\r\n  }, [currentRange, selectedRange, selectionType]);\r\n  var prevMonthClick = (0, _react.useCallback)(function () {\r\n    var newMonth = (0, _helpers.addMonths)(currentMonth, -1);\r\n    setFocusedDate((0, _helpers.getNextFocusedDate)(value, newMonth));\r\n    setCurrentMonth(newMonth);\r\n    updateFocusedItem(0);\r\n  }, [value, currentMonth, updateFocusedItem]);\r\n  var nextMonthClick = (0, _react.useCallback)(function () {\r\n    var newMonth = (0, _helpers.addMonths)(currentMonth, 1);\r\n    setFocusedDate((0, _helpers.getNextFocusedDate)(value, newMonth));\r\n    setCurrentMonth(newMonth);\r\n    updateFocusedItem(3);\r\n  }, [value, currentMonth, updateFocusedItem]);\r\n  var handleLeftCalendarYearChange = (0, _react.useCallback)(function (event) {\r\n    var year = +event.target.value;\r\n    var newMonth = new Date(currentMonth);\r\n    newMonth.setFullYear(year);\r\n    setFocusedDate((0, _helpers.getNextFocusedDate)(value, newMonth));\r\n    setCurrentMonth(newMonth);\r\n  }, [currentMonth, value]);\r\n  var handleRightCalendarYearChange = (0, _react.useCallback)(function (event) {\r\n    var year = +event.target.value;\r\n    var newMonth = new Date(rightCalendarMonth);\r\n    newMonth.setFullYear(year);\r\n    setFocusedDate((0, _helpers.getNextFocusedDate)(value, newMonth));\r\n    setCurrentMonth((0, _helpers.addMonths)(newMonth, -1));\r\n  }, [rightCalendarMonth, value]);\r\n  (0, _react.useEffect)(function () {\r\n    setFocusedDate(currentValue);\r\n\r\n    if ((0, _shouldUpdateCurrentMonth[\"default\"])(currentValue, currentMonth, rightCalendarMonth)) {\r\n      setCurrentMonth((0, _helpers.getFirstDayMonth)(currentValue));\r\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\r\n\r\n  }, [currentValue]);\r\n  (0, _react.useEffect)(function () {\r\n    setCurrentRange(selectedRange);\r\n  }, [selectedRange]);\r\n  var currentYearSelectTabIndex = disablePreviousMonth ? undefined : -1;\r\n  return /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledSection, {\r\n    id: id,\r\n    className: className,\r\n    style: style,\r\n    \"data-calendar-type\": \"double\"\r\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledControlsContainer, null, /*#__PURE__*/_react[\"default\"].createElement(_arrowButton[\"default\"], {\r\n    ref: headerElementsRefs[0],\r\n    onClick: prevMonthClick,\r\n    disabled: disablePreviousMonth,\r\n    size: \"medium\",\r\n    icon: /*#__PURE__*/_react[\"default\"].createElement(_leftArrow[\"default\"], null),\r\n    assistiveText: \"Previous Month\",\r\n    onKeyDown: handleHeaderElementKeyDown,\r\n    onFocus: function onFocus() {\r\n      return updateFocusedItem(0);\r\n    }\r\n  }), /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledHeaderContainer, {\r\n    onKeyDown: handleHeaderElementKeyDown\r\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledMonth, {\r\n    id: currentMonthLabelId,\r\n    \"data-id\": \"month\"\r\n  }, currentMonthFormattedLabel), /*#__PURE__*/_react[\"default\"].createElement(_yearSelect[\"default\"], {\r\n    ref: headerElementsRefs[1],\r\n    currentYear: currentYear,\r\n    yearsRange: yearsRange,\r\n    onYearChange: handleLeftCalendarYearChange,\r\n    tabIndex: currentYearSelectTabIndex,\r\n    onClick: function onClick() {\r\n      return updateFocusedItem(1);\r\n    },\r\n    onFocus: function onFocus() {\r\n      return updateFocusedItem(1);\r\n    }\r\n  }))), /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledControlsContainer, {\r\n    onKeyDown: handleHeaderElementKeyDown\r\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledHeaderContainer, null, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledMonth, {\r\n    id: rightMonthLabelId,\r\n    \"data-id\": \"month\"\r\n  }, rightMonthFormattedLabel), /*#__PURE__*/_react[\"default\"].createElement(_yearSelect[\"default\"], {\r\n    ref: headerElementsRefs[2],\r\n    currentYear: rightCalendarYear,\r\n    yearsRange: yearsRange,\r\n    onYearChange: handleRightCalendarYearChange,\r\n    tabIndex: -1,\r\n    onClick: function onClick() {\r\n      return updateFocusedItem(2);\r\n    },\r\n    onFocus: function onFocus() {\r\n      return updateFocusedItem(2);\r\n    }\r\n  })), /*#__PURE__*/_react[\"default\"].createElement(_arrowButton[\"default\"], {\r\n    ref: headerElementsRefs[3],\r\n    onClick: nextMonthClick,\r\n    disabled: disableNextMonth,\r\n    size: \"medium\",\r\n    icon: /*#__PURE__*/_react[\"default\"].createElement(_rightArrow[\"default\"], null),\r\n    assistiveText: \"Next Month\",\r\n    tabIndex: -1,\r\n    onKeyDown: handleHeaderElementKeyDown,\r\n    onFocus: function onFocus() {\r\n      return updateFocusedItem(3);\r\n    }\r\n  })), /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledCalendar, null, /*#__PURE__*/_react[\"default\"].createElement(_context.Provider, {\r\n    value: {\r\n      useAutoFocus: enableNavKeys,\r\n      focusedDate: focusedDate,\r\n      selectionType: selectionType,\r\n      selectedRange: selectedRange,\r\n      currentRange: currentRange,\r\n      privateOnFocus: handleOnDayFocus,\r\n      privateOnBlur: handleOnDayBlur,\r\n      privateKeyDown: handleKeyDown,\r\n      privateOnHover: handleOnDayHover\r\n    }\r\n  }, /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"], {\r\n    role: \"grid\",\r\n    \"aria-labelledby\": currentMonthLabelId\r\n  }, /*#__PURE__*/_react[\"default\"].createElement(_daysOfWeek[\"default\"], {\r\n    locale: locale\r\n  }), /*#__PURE__*/_react[\"default\"].createElement(_month[\"default\"], {\r\n    value: value,\r\n    firstDayMonth: currentMonth,\r\n    minDate: minDate,\r\n    maxDate: maxDate,\r\n    onChange: onChange,\r\n    selectedRange: currentRange\r\n  })))), /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledCalendar, null, /*#__PURE__*/_react[\"default\"].createElement(_context.Provider, {\r\n    value: {\r\n      useAutoFocus: enableNavKeys,\r\n      focusedDate: focusedDate,\r\n      selectionType: selectionType,\r\n      selectedRange: selectedRange,\r\n      currentRange: currentRange,\r\n      privateOnFocus: handleOnDayFocus,\r\n      privateOnBlur: handleOnDayBlur,\r\n      privateKeyDown: handleKeyDown,\r\n      privateOnHover: handleOnDayHover\r\n    }\r\n  }, /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"], {\r\n    role: \"grid\",\r\n    \"aria-labelledby\": rightMonthLabelId\r\n  }, /*#__PURE__*/_react[\"default\"].createElement(_daysOfWeek[\"default\"], {\r\n    locale: locale\r\n  }), /*#__PURE__*/_react[\"default\"].createElement(_month[\"default\"], {\r\n    value: value,\r\n    firstDayMonth: rightCalendarMonth,\r\n    minDate: minDate,\r\n    maxDate: maxDate,\r\n    onChange: onChange,\r\n    selectedRange: currentRange\r\n  })))));\r\n}\r\n\r\nDoubleCalendar.propTypes = {\r\n  value: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].instanceOf(Date), _propTypes[\"default\"].string]),\r\n  maxDate: _propTypes[\"default\"].instanceOf(Date),\r\n  minDate: _propTypes[\"default\"].instanceOf(Date),\r\n  onChange: _propTypes[\"default\"].func,\r\n  className: _propTypes[\"default\"].string,\r\n  style: _propTypes[\"default\"].object,\r\n  id: _propTypes[\"default\"].string,\r\n  locale: _propTypes[\"default\"].string,\r\n  selectionType: _propTypes[\"default\"].oneOf(['single', 'range']),\r\n  selectedRange: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].oneOfType([_propTypes[\"default\"].instanceOf(Date), _propTypes[\"default\"].string]))\r\n};\r\nDoubleCalendar.defaultProps = {\r\n  value: undefined,\r\n  minDate: undefined,\r\n  maxDate: undefined,\r\n  onChange: function onChange() {},\r\n  className: undefined,\r\n  style: undefined,\r\n  id: undefined,\r\n  locale: undefined,\r\n  selectionType: 'single',\r\n  selectedRange: undefined\r\n};"]},"metadata":{},"sourceType":"script"}