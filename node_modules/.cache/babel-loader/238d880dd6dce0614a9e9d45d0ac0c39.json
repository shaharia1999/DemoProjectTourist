{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _RenderIf = _interopRequireDefault(require(\"../RenderIf\"));\n\nvar _rightElement = _interopRequireDefault(require(\"./rightElement\"));\n\nvar _selectedValue = _interopRequireDefault(require(\"./selectedValue\"));\n\nvar _options = _interopRequireDefault(require(\"./options\"));\n\nvar _helpers = require(\"./helpers\");\n\nvar _utils = require(\"../../libs/utils\");\n\nvar _constants = require(\"../../libs/constants\");\n\nvar _withReduxForm = _interopRequireDefault(require(\"../../libs/hocs/withReduxForm\"));\n\nvar _label = _interopRequireDefault(require(\"../Input/label\"));\n\nvar _input = _interopRequireDefault(require(\"./styled/input\"));\n\nvar _container = _interopRequireDefault(require(\"./styled/container\"));\n\nvar _inputContainer = _interopRequireDefault(require(\"./styled/inputContainer\"));\n\nvar _spinner = _interopRequireDefault(require(\"./styled/spinner\"));\n\nvar _optionsMenu = _interopRequireDefault(require(\"./styled/optionsMenu\"));\n\nvar _searchIcon = _interopRequireDefault(require(\"./styled/searchIcon\"));\n\nvar _errorText = _interopRequireDefault(require(\"../Input/styled/errorText\"));\n\nvar _isScrollPositionAtMenuBottom = _interopRequireDefault(require(\"./helpers/isScrollPositionAtMenuBottom\"));\n\nvar _menuArrowButton = _interopRequireDefault(require(\"./menuArrowButton\"));\n\nvar _InternalOverlay = _interopRequireDefault(require(\"../InternalOverlay\"));\n\nvar _lookupPositionResolver = _interopRequireDefault(require(\"./helpers/lookupPositionResolver\"));\n\nvar _scrollController = require(\"../../libs/scrollController\");\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar OPTION_HEIGHT = 48;\nvar visibleOptionsMap = {\n  small: 3,\n  medium: 5,\n  large: 8\n};\n/**\r\n * A Lookup is an autocomplete text input that will search against a database object,\r\n * it is enhanced by a panel of suggested options.\r\n * @category Form\r\n */\n\nvar Lookup = /*#__PURE__*/function (_Component) {\n  (0, _inherits2[\"default\"])(Lookup, _Component);\n\n  var _super = _createSuper(Lookup);\n\n  function Lookup(props) {\n    var _this$keyHandlerMap;\n\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Lookup);\n    _this = _super.call(this, props);\n    var normalizedOptions = (0, _helpers.getNormalizedOptions)(props.options || []);\n    _this.state = {\n      searchValue: '',\n      isOpen: false,\n      isFocused: false,\n      options: normalizedOptions,\n      focusedItemIndex: (0, _helpers.getInitialFocusedIndex)(normalizedOptions, props.preferredSelectedOption),\n      showScrollUpArrow: undefined,\n      showScrollDownArrow: undefined\n    };\n    _this.inputId = (0, _utils.uniqueId)('lookup-input');\n    _this.listboxId = (0, _utils.uniqueId)('lookup-listbox');\n    _this.errorMessageId = (0, _utils.uniqueId)('error-message');\n    _this.containerRef = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.inputRef = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.menuRef = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.handleSearch = _this.handleSearch.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.clearInput = _this.clearInput.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleChange = _this.handleChange.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleFocus = _this.handleFocus.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleRemoveValue = _this.handleRemoveValue.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleBlur = _this.handleBlur.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleHover = _this.handleHover.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyDown = _this.handleKeyDown.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyUpPressed = _this.handleKeyUpPressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyDownPressed = _this.handleKeyDownPressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyEnterPressed = _this.handleKeyEnterPressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.keyHandlerMap = (_this$keyHandlerMap = {}, (0, _defineProperty2[\"default\"])(_this$keyHandlerMap, _constants.UP_KEY, _this.handleKeyUpPressed), (0, _defineProperty2[\"default\"])(_this$keyHandlerMap, _constants.DOWN_KEY, _this.handleKeyDownPressed), (0, _defineProperty2[\"default\"])(_this$keyHandlerMap, _constants.ENTER_KEY, _this.handleKeyEnterPressed), _this$keyHandlerMap);\n    _this.handleScrollDownArrowHover = _this.handleScrollDownArrowHover.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleScrollUpArrowHover = _this.handleScrollUpArrowHover.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.stopArrowScoll = _this.stopArrowScoll.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.updateScrollingArrows = _this.updateScrollingArrows.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleWindowScroll = _this.handleWindowScroll.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleOverlayOpened = _this.handleOverlayOpened.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleClick = _this.handleClick.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.windowScrolling = new _scrollController.WindowScrolling();\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Lookup, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var prevOptions = prevProps.options,\n          prevPreferredSelectedOption = prevProps.preferredSelectedOption;\n      var _this$props = this.props,\n          options = _this$props.options,\n          preferredSelectedOption = _this$props.preferredSelectedOption;\n\n      if (prevOptions !== options) {\n        var normalizedOptions = (0, _helpers.getNormalizedOptions)(options);\n        this.setState({\n          options: normalizedOptions,\n          focusedItemIndex: (0, _helpers.getInitialFocusedIndex)(normalizedOptions, preferredSelectedOption),\n          isOpen: this.isLookupOpen()\n        });\n      }\n\n      if (prevPreferredSelectedOption !== preferredSelectedOption) {\n        var currentOptions = this.state.options;\n        this.setState({\n          focusedItemIndex: (0, _helpers.getInitialFocusedIndex)(currentOptions, preferredSelectedOption),\n          isOpen: this.isLookupOpen()\n        });\n      }\n\n      var wasOpen = prevState.isOpen;\n      var isOpen = this.state.isOpen;\n\n      if (!wasOpen && isOpen && this.menuRef.current !== null) {\n        this.updateScrollingArrows();\n      }\n\n      if (!this.isLookupOpen()) this.windowScrolling.stopListening();\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      var value = this.props.value;\n\n      if ((0, _typeof2[\"default\"])(value) === 'object' && !Array.isArray(value)) {\n        return value;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"getErrorMessageId\",\n    value: function getErrorMessageId() {\n      var error = this.props.error;\n\n      if (error) {\n        return this.errorMessageId;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"getAriaActivedescendant\",\n    value: function getAriaActivedescendant() {\n      var _this$state = this.state,\n          isFocused = _this$state.isFocused,\n          focusedItemIndex = _this$state.focusedItemIndex;\n      var options = this.props.options;\n      var isOpen = (0, _helpers.isMenuOpen)(options, isFocused);\n\n      if (isOpen) {\n        return \"lookup-item-\".concat(focusedItemIndex);\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(value) {\n      var _this2 = this;\n\n      var onChange = this.props.onChange;\n      setTimeout(function () {\n        return _this2.containerRef.current.focus();\n      }, 0);\n      this.setState({\n        searchValue: ''\n      });\n      this.closeMenu();\n      onChange(value);\n    }\n  }, {\n    key: \"handleSearch\",\n    value: function handleSearch(event) {\n      var value = event.target.value;\n      this.setState({\n        searchValue: value\n      });\n      this.fireSearch(value);\n    }\n  }, {\n    key: \"handleFocus\",\n    value: function handleFocus() {\n      var _this$props2 = this.props,\n          onFocus = _this$props2.onFocus,\n          value = _this$props2.value;\n      this.openMenu();\n      var eventValue = value || null;\n      onFocus(eventValue);\n    }\n  }, {\n    key: \"handleBlur\",\n    value: function handleBlur() {\n      var _this$props3 = this.props,\n          onBlur = _this$props3.onBlur,\n          value = _this$props3.value;\n      this.closeMenu();\n      var eventValue = value || null;\n      onBlur(eventValue);\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(event) {\n      var onClick = this.props.onClick;\n      this.openMenu();\n      return onClick(event);\n    }\n  }, {\n    key: \"handleRemoveValue\",\n    value: function handleRemoveValue() {\n      var _this3 = this;\n\n      var _this$props4 = this.props,\n          onChange = _this$props4.onChange,\n          onSearch = _this$props4.onSearch;\n      onChange(null);\n      onSearch('');\n      setTimeout(function () {\n        return _this3.focus();\n      }, 0);\n    }\n  }, {\n    key: \"fireSearch\",\n    value: function fireSearch(value) {\n      var _this$props5 = this.props,\n          onSearch = _this$props5.onSearch,\n          debounce = _this$props5.debounce;\n\n      if (debounce && value) {\n        this.resetTimeout();\n        this.timeout = setTimeout(function () {\n          onSearch(value);\n        }, 500);\n      } else {\n        this.resetTimeout();\n        onSearch(value);\n      }\n    }\n  }, {\n    key: \"clearInput\",\n    value: function clearInput() {\n      var _this4 = this;\n\n      var searchValue = '';\n      this.setState({\n        searchValue: searchValue\n      });\n      this.fireSearch(searchValue);\n      setTimeout(function () {\n        return _this4.focus();\n      }, 0);\n    }\n  }, {\n    key: \"resetTimeout\",\n    value: function resetTimeout() {\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n      }\n    }\n  }, {\n    key: \"openMenu\",\n    value: function openMenu() {\n      return this.setState({\n        isFocused: true\n      });\n    }\n  }, {\n    key: \"closeMenu\",\n    value: function closeMenu() {\n      var options = this.state.options;\n      var preferredSelectedOption = this.props.preferredSelectedOption;\n      return this.setState({\n        isFocused: false,\n        isOpen: false,\n        focusedItemIndex: (0, _helpers.getInitialFocusedIndex)(options, preferredSelectedOption)\n      });\n    }\n  }, {\n    key: \"isLookupOpen\",\n    value: function isLookupOpen() {\n      var _this$state2 = this.state,\n          searchValue = _this$state2.searchValue,\n          isFocused = _this$state2.isFocused;\n      var options = this.props.options;\n      var isMenuEmpty = isFocused && !!searchValue && Array.isArray(options) && options.length === 0;\n      var isOpen = (0, _helpers.isMenuOpen)(options, isFocused);\n      return isOpen || isMenuEmpty;\n    }\n  }, {\n    key: \"handleHover\",\n    value: function handleHover(index) {\n      this.setState({\n        focusedItemIndex: index\n      });\n    }\n  }, {\n    key: \"handleKeyDown\",\n    value: function handleKeyDown(event) {\n      var searchValue = this.state.searchValue;\n      var keyCode = event.keyCode;\n\n      if (keyCode === _constants.ESCAPE_KEY) {\n        if (searchValue) {\n          event.stopPropagation();\n        } else if (this.isLookupOpen()) {\n          event.stopPropagation();\n          this.closeMenu();\n        }\n      }\n\n      if ((0, _helpers.isNavigationKey)(keyCode) && this.isLookupOpen()) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (this.keyHandlerMap[keyCode]) {\n          this.keyHandlerMap[keyCode]();\n        }\n      }\n    }\n  }, {\n    key: \"stopArrowScoll\",\n    value: function stopArrowScoll() {\n      if (this.scrollingTimer) {\n        clearTimeout(this.scrollingTimer);\n      }\n    }\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(offset) {\n      var menu = this.menuRef.current.getRef();\n      menu.scrollTo(0, offset);\n    }\n  }, {\n    key: \"scrollBy\",\n    value: function scrollBy(offset) {\n      var menu = this.menuRef.current.getRef();\n      menu.scrollBy(0, offset);\n    }\n  }, {\n    key: \"handleScrollUpArrowHover\",\n    value: function handleScrollUpArrowHover() {\n      var _this5 = this;\n\n      this.stopArrowScoll();\n      var menu = this.menuRef.current.getRef();\n      this.scrollingTimer = setTimeout(function () {\n        if (menu.scrollTop > 0) {\n          menu.scrollBy(0, -1);\n          setTimeout(_this5.handleScrollUpArrowHover(), 5);\n        } else {\n          _this5.stopArrowScoll();\n        }\n      }, 5);\n      this.updateScrollingArrows();\n    }\n  }, {\n    key: \"handleScrollDownArrowHover\",\n    value: function handleScrollDownArrowHover() {\n      var _this6 = this;\n\n      this.stopArrowScoll();\n      var menu = this.menuRef.current.getRef();\n      this.scrollingTimer = setTimeout(function () {\n        if (!(0, _isScrollPositionAtMenuBottom[\"default\"])(menu)) {\n          menu.scrollBy(0, 1);\n          setTimeout(_this6.handleScrollDownArrowHover(), 5);\n        } else {\n          _this6.stopArrowScoll();\n        }\n      }, 5);\n      this.updateScrollingArrows();\n    }\n  }, {\n    key: \"updateScrollingArrows\",\n    value: function updateScrollingArrows() {\n      var menu = this.menuRef.current.getRef();\n      var showScrollUpArrow = menu.scrollTop > 0;\n      var showScrollDownArrow = !(0, _isScrollPositionAtMenuBottom[\"default\"])(menu);\n      this.setState({\n        showScrollUpArrow: showScrollUpArrow,\n        showScrollDownArrow: showScrollDownArrow\n      });\n    }\n  }, {\n    key: \"handleKeyUpPressed\",\n    value: function handleKeyUpPressed() {\n      var _this$state3 = this.state,\n          focusedItemIndex = _this$state3.focusedItemIndex,\n          options = _this$state3.options;\n\n      if (focusedItemIndex > 0) {\n        var prevIndex = focusedItemIndex - 1;\n        var prevFocusedIndex = options[prevIndex].type === 'header' ? focusedItemIndex - 2 : prevIndex;\n\n        if (prevFocusedIndex >= 0) {\n          this.setState({\n            focusedItemIndex: prevFocusedIndex\n          });\n        }\n\n        this.scrollUp(prevFocusedIndex);\n      }\n    }\n  }, {\n    key: \"scrollUp\",\n    value: function scrollUp(prevFocusedIndex) {\n      var options = this.state.options;\n      var size = this.props.size;\n      var menu = this.menuRef.current.getRef();\n      var prevIndex = prevFocusedIndex >= 0 ? prevFocusedIndex : 0;\n      var prevFocusedOption = menu.childNodes[prevIndex];\n      var visibleOptionsAmount = visibleOptionsMap[size] || visibleOptionsMap.medium;\n\n      if (options.length > visibleOptionsAmount && !(0, _helpers.isOptionVisible)(prevFocusedOption, menu)) {\n        this.menuRef.current.scrollTo(OPTION_HEIGHT * prevIndex);\n      }\n    }\n  }, {\n    key: \"handleKeyDownPressed\",\n    value: function handleKeyDownPressed() {\n      var _this$state4 = this.state,\n          focusedItemIndex = _this$state4.focusedItemIndex,\n          options = _this$state4.options;\n      var lastIndex = options.length - 1;\n\n      if (focusedItemIndex < lastIndex) {\n        var nextIndex = focusedItemIndex + 1;\n        var nextFocusedIndex = options[nextIndex].type === 'header' ? focusedItemIndex + 2 : nextIndex;\n\n        if (nextFocusedIndex <= lastIndex) {\n          this.setState({\n            focusedItemIndex: nextFocusedIndex\n          });\n          this.scrollDown(nextFocusedIndex);\n        }\n      }\n    }\n  }, {\n    key: \"scrollDown\",\n    value: function scrollDown(nextFocusedIndex) {\n      var options = this.state.options;\n      var size = this.props.size;\n      var menu = this.menuRef.current.getRef();\n      var nextFocusedOption = menu.childNodes[nextFocusedIndex];\n      var visibleOptionsAmount = visibleOptionsMap[size] || visibleOptionsMap.medium;\n\n      if (options.length > visibleOptionsAmount && !(0, _helpers.isOptionVisible)(nextFocusedOption, menu)) {\n        this.menuRef.current.scrollTo(OPTION_HEIGHT * (nextFocusedIndex - (visibleOptionsAmount - 1)));\n      }\n    }\n  }, {\n    key: \"handleKeyEnterPressed\",\n    value: function handleKeyEnterPressed() {\n      var onChange = this.props.onChange;\n      var focusedItemIndex = this.state.focusedItemIndex;\n      var options = this.state.options;\n      var value = options[focusedItemIndex];\n      this.containerRef.current.focus();\n      this.setState({\n        searchValue: ''\n      });\n      onChange(value);\n    }\n  }, {\n    key: \"handleWindowScroll\",\n    value: function handleWindowScroll(event) {\n      if (this.menuRef.current && this.menuRef.current.getRef().contains(event.target)) return;\n      this.closeMenu();\n    }\n  }, {\n    key: \"handleOverlayOpened\",\n    value: function handleOverlayOpened() {\n      this.windowScrolling.startListening(this.handleWindowScroll);\n    }\n    /**\r\n     * Sets focus on the element.\r\n     * @public\r\n     */\n\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.inputRef.current.focus();\n    }\n    /**\r\n     * Sets click on the element.\r\n     * @public\r\n     */\n\n  }, {\n    key: \"click\",\n    value: function click() {\n      this.inputRef.current.click();\n    }\n    /**\r\n     * Sets blur on the element.\r\n     * @public\r\n     */\n\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.inputRef.current.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props6 = this.props,\n          style = _this$props6.style,\n          className = _this$props6.className,\n          label = _this$props6.label,\n          error = _this$props6.error,\n          size = _this$props6.size,\n          placeholder = _this$props6.placeholder,\n          disabled = _this$props6.disabled,\n          readOnly = _this$props6.readOnly,\n          tabIndex = _this$props6.tabIndex,\n          onClick = _this$props6.onClick,\n          required = _this$props6.required,\n          id = _this$props6.id,\n          name = _this$props6.name,\n          labelAlignment = _this$props6.labelAlignment,\n          hideLabel = _this$props6.hideLabel,\n          isLoading = _this$props6.isLoading,\n          icon = _this$props6.icon,\n          variant = _this$props6.variant;\n      var _this$state5 = this.state,\n          searchValue = _this$state5.searchValue,\n          focusedItemIndex = _this$state5.focusedItemIndex,\n          options = _this$state5.options;\n      var onDeleteValue = disabled || readOnly ? undefined : this.handleRemoveValue;\n      var isLookupOpen = this.isLookupOpen();\n      var errorMessageId = this.getErrorMessageId();\n      var currentValue = this.getValue();\n      var _this$state6 = this.state,\n          showScrollUpArrow = _this$state6.showScrollUpArrow,\n          showScrollDownArrow = _this$state6.showScrollDownArrow;\n      var errorValue = isLoading ? null : error;\n      return /*#__PURE__*/_react[\"default\"].createElement(_container[\"default\"], {\n        id: id,\n        className: className,\n        style: style,\n        role: \"presentation\",\n        onKeyDown: this.handleKeyDown,\n        ref: this.containerRef,\n        tabIndex: -1,\n        onScroll: this.updateScrollingArrows\n      }, /*#__PURE__*/_react[\"default\"].createElement(_label[\"default\"], {\n        label: label,\n        labelAlignment: labelAlignment,\n        hideLabel: hideLabel,\n        required: required,\n        inputId: this.inputId,\n        readOnly: readOnly\n      }), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n        isTrue: currentValue\n      }, /*#__PURE__*/_react[\"default\"].createElement(_selectedValue[\"default\"], {\n        id: this.inputId,\n        name: name,\n        value: currentValue,\n        tabIndex: tabIndex,\n        onClick: onClick,\n        disabled: disabled,\n        error: errorValue,\n        required: required,\n        readOnly: readOnly,\n        errorMessageId: errorMessageId,\n        ref: this.inputRef,\n        onClearValue: onDeleteValue\n      })), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n        isTrue: !currentValue\n      }, /*#__PURE__*/_react[\"default\"].createElement(_inputContainer[\"default\"], {\n        \"aria-expanded\": isLookupOpen,\n        \"aria-haspopup\": \"listbox\" // eslint-disable-next-line jsx-a11y/role-has-required-aria-props\n        ,\n        role: \"combobox\"\n      }, /*#__PURE__*/_react[\"default\"].createElement(_spinner[\"default\"], {\n        isVisible: isLoading,\n        size: \"x-small\",\n        assistiveText: \"searching\"\n      }), /*#__PURE__*/_react[\"default\"].createElement(_rightElement[\"default\"], {\n        showCloseButton: !!searchValue,\n        onClear: this.clearInput,\n        icon: icon,\n        error: errorValue\n      }), /*#__PURE__*/_react[\"default\"].createElement(_input[\"default\"], {\n        id: this.inputId,\n        name: name,\n        type: \"search\",\n        value: searchValue,\n        placeholder: placeholder,\n        onChange: this.handleSearch,\n        tabIndex: tabIndex,\n        onFocus: this.handleFocus,\n        onBlur: this.handleBlur,\n        onClick: this.handleClick,\n        disabled: disabled,\n        readOnly: readOnly,\n        required: required,\n        autoComplete: \"off\",\n        \"aria-describedby\": errorMessageId,\n        \"aria-autocomplete\": \"list\",\n        \"aria-controls\": this.listboxId,\n        \"aria-activedescendant\": this.getAriaActivedescendant(),\n        ref: this.inputRef,\n        iconPosition: \"right\",\n        icon: icon,\n        error: errorValue,\n        isLoading: isLoading,\n        variant: variant\n      }), /*#__PURE__*/_react[\"default\"].createElement(_InternalOverlay[\"default\"], {\n        isVisible: isLookupOpen,\n        triggerElementRef: this.inputRef,\n        positionResolver: _lookupPositionResolver[\"default\"],\n        onOpened: this.handleOverlayOpened\n      }, /*#__PURE__*/_react[\"default\"].createElement(_optionsMenu[\"default\"], {\n        id: this.listboxId,\n        role: \"listbox\",\n        \"data-id\": \"lookup-options-container\"\n      }, /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n        isTrue: showScrollUpArrow\n      }, /*#__PURE__*/_react[\"default\"].createElement(_menuArrowButton[\"default\"], {\n        arrow: \"up\",\n        onMouseEnter: this.handleScrollUpArrowHover,\n        onMouseLeave: this.stopArrowScoll\n      })), /*#__PURE__*/_react[\"default\"].createElement(_options[\"default\"], {\n        items: options,\n        value: searchValue,\n        onSelectOption: this.handleChange,\n        focusedItemIndex: focusedItemIndex,\n        onHoverOption: this.handleHover,\n        itemHeight: OPTION_HEIGHT,\n        ref: this.menuRef,\n        size: size\n      }), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n        isTrue: showScrollDownArrow\n      }, /*#__PURE__*/_react[\"default\"].createElement(_menuArrowButton[\"default\"], {\n        arrow: \"down\",\n        onMouseEnter: this.handleScrollDownArrowHover,\n        onMouseLeave: this.stopArrowScoll\n      })))))), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n        isTrue: errorValue\n      }, /*#__PURE__*/_react[\"default\"].createElement(_errorText[\"default\"], {\n        id: errorMessageId\n      }, error)));\n    }\n  }]);\n  return Lookup;\n}(_react.Component);\n\nLookup.propTypes = {\n  /** Text label for the Lookup. */\n  label: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\n\n  /** Describes the position of the Lookup label. Options include left, center and right.\r\n   * This value defaults to center. */\n  labelAlignment: _propTypes[\"default\"].oneOf(['left', 'center', 'right']),\n\n  /** A boolean to hide the Lookup label. */\n  hideLabel: _propTypes[\"default\"].bool,\n\n  /** Specifies the selected value of the Lookup. */\n  value: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].shape({\n    label: _propTypes[\"default\"].string,\n    description: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].node, _propTypes[\"default\"].string]),\n    icon: _propTypes[\"default\"].node\n  }), _propTypes[\"default\"].string]),\n\n  /** An array of matched options to show in a menu. */\n  options: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n    label: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].node, _propTypes[\"default\"].string]),\n    description: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].node, _propTypes[\"default\"].string]),\n    icon: _propTypes[\"default\"].node\n  })),\n\n  /** The name of the Lookup. */\n  name: _propTypes[\"default\"].string,\n\n  /** If set to true the onSearch event is sent when the customer finish typing. */\n  debounce: _propTypes[\"default\"].bool,\n\n  /** If is set to true, then is showed a loading symbol. */\n  isLoading: _propTypes[\"default\"].bool,\n\n  /** Text that is displayed when the field is empty, to prompt the user for a valid entry. */\n  placeholder: _propTypes[\"default\"].string,\n\n  /** Specifies that the Lookup must be filled out before submitting the form.\r\n   * This value defaults to false. */\n  required: _propTypes[\"default\"].bool,\n\n  /** Specifies that the Lookup must be filled out before submitting the form. */\n  error: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\n\n  /** Specifies that the Lookup element should be disabled. This value defaults to false. */\n  disabled: _propTypes[\"default\"].bool,\n\n  /** Specifies that the Lookup is read-only. This value defaults to false. */\n  readOnly: _propTypes[\"default\"].bool,\n\n  /** The icon that appears in the Lookup when the input search is empty.\r\n   * If not passed by default a search icon will be showed. */\n  icon: _propTypes[\"default\"].node,\n\n  /** The size of the Lookup menu. Options include small, medium, or large.\r\n   * This value defaults to medium. */\n  size: _propTypes[\"default\"].oneOf(['small', 'medium', 'large']),\n\n  /** Specifies the tab order of an element (when the tab button is used for navigating). */\n  tabIndex: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].number, _propTypes[\"default\"].string]),\n\n  /** The action triggered for every key stroke when the customer is typing in the input.\r\n   * It sent the value/query of the input. This value is normally used for filter/search\r\n   * for more options. */\n  onSearch: _propTypes[\"default\"].func,\n\n  /**  The action triggered when click/select an option. */\n  onChange: _propTypes[\"default\"].func,\n\n  /** The action triggered when the element is clicked. */\n  onClick: _propTypes[\"default\"].func,\n\n  /** The action triggered when the element receives focus. */\n  onFocus: _propTypes[\"default\"].func,\n\n  /** The action triggered when the element releases focus. */\n  onBlur: _propTypes[\"default\"].func,\n\n  /** The id of the outer element. */\n  id: _propTypes[\"default\"].string,\n\n  /** A CSS class for the outer element, in addition to the component's base classes. */\n  className: _propTypes[\"default\"].string,\n\n  /** An object with custom style applied to the outer element. */\n  style: _propTypes[\"default\"].object,\n\n  /** The index of the option that is visual-focus initially */\n  preferredSelectedOption: _propTypes[\"default\"].number,\n\n  /** The variant changes the appearance of the Input. Accepted variants include default,\r\n   * shaded and bare. This value defaults to default. */\n  variant: _propTypes[\"default\"].oneOf(['default', 'shaded', 'bare'])\n};\nLookup.defaultProps = {\n  label: undefined,\n  value: undefined,\n  name: undefined,\n  placeholder: null,\n  required: false,\n  error: null,\n  disabled: false,\n  readOnly: false,\n  icon: /*#__PURE__*/_react[\"default\"].createElement(_searchIcon[\"default\"], null),\n  size: 'medium',\n  onChange: function onChange() {},\n  tabIndex: undefined,\n  onClick: function onClick() {},\n  onFocus: function onFocus() {},\n  onBlur: function onBlur() {},\n  className: undefined,\n  style: undefined,\n  id: undefined,\n  labelAlignment: 'center',\n  hideLabel: false,\n  isLoading: false,\n  options: undefined,\n  onSearch: function onSearch() {},\n  debounce: false,\n  preferredSelectedOption: 0,\n  variant: 'default'\n};\n\nvar _default = (0, _withReduxForm[\"default\"])(Lookup);\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["F:/PorzotokFrontend/node_modules/react-rainbow-components/components/Lookup/index.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","_typeof2","_defineProperty2","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_react","_propTypes","_RenderIf","_rightElement","_selectedValue","_options","_helpers","_utils","_constants","_withReduxForm","_label","_input","_container","_inputContainer","_spinner","_optionsMenu","_searchIcon","_errorText","_isScrollPositionAtMenuBottom","_menuArrowButton","_InternalOverlay","_lookupPositionResolver","_scrollController","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Date","prototype","toString","call","e","OPTION_HEIGHT","visibleOptionsMap","small","medium","large","Lookup","_Component","_super","props","_this$keyHandlerMap","_this","normalizedOptions","getNormalizedOptions","options","state","searchValue","isOpen","isFocused","focusedItemIndex","getInitialFocusedIndex","preferredSelectedOption","showScrollUpArrow","undefined","showScrollDownArrow","inputId","uniqueId","listboxId","errorMessageId","containerRef","createRef","inputRef","menuRef","handleSearch","bind","clearInput","handleChange","handleFocus","handleRemoveValue","handleBlur","handleHover","handleKeyDown","handleKeyUpPressed","handleKeyDownPressed","handleKeyEnterPressed","keyHandlerMap","UP_KEY","DOWN_KEY","ENTER_KEY","handleScrollDownArrowHover","handleScrollUpArrowHover","stopArrowScoll","updateScrollingArrows","handleWindowScroll","handleOverlayOpened","handleClick","windowScrolling","WindowScrolling","key","componentDidUpdate","prevProps","prevState","prevOptions","prevPreferredSelectedOption","_this$props","setState","isLookupOpen","currentOptions","wasOpen","current","stopListening","getValue","Array","isArray","getErrorMessageId","error","getAriaActivedescendant","_this$state","isMenuOpen","concat","_this2","onChange","setTimeout","focus","closeMenu","event","target","fireSearch","_this$props2","onFocus","openMenu","eventValue","_this$props3","onBlur","onClick","_this3","_this$props4","onSearch","_this$props5","debounce","resetTimeout","timeout","_this4","clearTimeout","_this$state2","isMenuEmpty","length","index","keyCode","ESCAPE_KEY","stopPropagation","isNavigationKey","preventDefault","scrollingTimer","scrollTo","offset","menu","getRef","scrollBy","_this5","scrollTop","_this6","_this$state3","prevIndex","prevFocusedIndex","type","scrollUp","size","prevFocusedOption","childNodes","visibleOptionsAmount","isOptionVisible","_this$state4","lastIndex","nextIndex","nextFocusedIndex","scrollDown","nextFocusedOption","contains","startListening","click","blur","render","_this$props6","style","className","label","placeholder","disabled","readOnly","tabIndex","required","id","name","labelAlignment","hideLabel","isLoading","icon","variant","_this$state5","onDeleteValue","currentValue","_this$state6","errorValue","createElement","role","onKeyDown","ref","onScroll","isTrue","onClearValue","isVisible","assistiveText","showCloseButton","onClear","autoComplete","iconPosition","triggerElementRef","positionResolver","onOpened","arrow","onMouseEnter","onMouseLeave","items","onSelectOption","onHoverOption","itemHeight","Component","propTypes","oneOfType","string","node","oneOf","bool","shape","description","arrayOf","number","func","object","defaultProps","_default"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\r\n\r\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports[\"default\"] = void 0;\r\n\r\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\r\n\r\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\r\n\r\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\r\n\r\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\r\n\r\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\r\n\r\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\r\n\r\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\r\n\r\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\r\n\r\nvar _react = _interopRequireWildcard(require(\"react\"));\r\n\r\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\r\n\r\nvar _RenderIf = _interopRequireDefault(require(\"../RenderIf\"));\r\n\r\nvar _rightElement = _interopRequireDefault(require(\"./rightElement\"));\r\n\r\nvar _selectedValue = _interopRequireDefault(require(\"./selectedValue\"));\r\n\r\nvar _options = _interopRequireDefault(require(\"./options\"));\r\n\r\nvar _helpers = require(\"./helpers\");\r\n\r\nvar _utils = require(\"../../libs/utils\");\r\n\r\nvar _constants = require(\"../../libs/constants\");\r\n\r\nvar _withReduxForm = _interopRequireDefault(require(\"../../libs/hocs/withReduxForm\"));\r\n\r\nvar _label = _interopRequireDefault(require(\"../Input/label\"));\r\n\r\nvar _input = _interopRequireDefault(require(\"./styled/input\"));\r\n\r\nvar _container = _interopRequireDefault(require(\"./styled/container\"));\r\n\r\nvar _inputContainer = _interopRequireDefault(require(\"./styled/inputContainer\"));\r\n\r\nvar _spinner = _interopRequireDefault(require(\"./styled/spinner\"));\r\n\r\nvar _optionsMenu = _interopRequireDefault(require(\"./styled/optionsMenu\"));\r\n\r\nvar _searchIcon = _interopRequireDefault(require(\"./styled/searchIcon\"));\r\n\r\nvar _errorText = _interopRequireDefault(require(\"../Input/styled/errorText\"));\r\n\r\nvar _isScrollPositionAtMenuBottom = _interopRequireDefault(require(\"./helpers/isScrollPositionAtMenuBottom\"));\r\n\r\nvar _menuArrowButton = _interopRequireDefault(require(\"./menuArrowButton\"));\r\n\r\nvar _InternalOverlay = _interopRequireDefault(require(\"../InternalOverlay\"));\r\n\r\nvar _lookupPositionResolver = _interopRequireDefault(require(\"./helpers/lookupPositionResolver\"));\r\n\r\nvar _scrollController = require(\"../../libs/scrollController\");\r\n\r\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\r\n\r\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\r\n\r\nvar OPTION_HEIGHT = 48;\r\nvar visibleOptionsMap = {\r\n  small: 3,\r\n  medium: 5,\r\n  large: 8\r\n};\r\n/**\r\n * A Lookup is an autocomplete text input that will search against a database object,\r\n * it is enhanced by a panel of suggested options.\r\n * @category Form\r\n */\r\n\r\nvar Lookup = /*#__PURE__*/function (_Component) {\r\n  (0, _inherits2[\"default\"])(Lookup, _Component);\r\n\r\n  var _super = _createSuper(Lookup);\r\n\r\n  function Lookup(props) {\r\n    var _this$keyHandlerMap;\r\n\r\n    var _this;\r\n\r\n    (0, _classCallCheck2[\"default\"])(this, Lookup);\r\n    _this = _super.call(this, props);\r\n    var normalizedOptions = (0, _helpers.getNormalizedOptions)(props.options || []);\r\n    _this.state = {\r\n      searchValue: '',\r\n      isOpen: false,\r\n      isFocused: false,\r\n      options: normalizedOptions,\r\n      focusedItemIndex: (0, _helpers.getInitialFocusedIndex)(normalizedOptions, props.preferredSelectedOption),\r\n      showScrollUpArrow: undefined,\r\n      showScrollDownArrow: undefined\r\n    };\r\n    _this.inputId = (0, _utils.uniqueId)('lookup-input');\r\n    _this.listboxId = (0, _utils.uniqueId)('lookup-listbox');\r\n    _this.errorMessageId = (0, _utils.uniqueId)('error-message');\r\n    _this.containerRef = /*#__PURE__*/_react[\"default\"].createRef();\r\n    _this.inputRef = /*#__PURE__*/_react[\"default\"].createRef();\r\n    _this.menuRef = /*#__PURE__*/_react[\"default\"].createRef();\r\n    _this.handleSearch = _this.handleSearch.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.clearInput = _this.clearInput.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.handleChange = _this.handleChange.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.handleFocus = _this.handleFocus.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.handleRemoveValue = _this.handleRemoveValue.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.handleBlur = _this.handleBlur.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.handleHover = _this.handleHover.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.handleKeyDown = _this.handleKeyDown.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.handleKeyUpPressed = _this.handleKeyUpPressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.handleKeyDownPressed = _this.handleKeyDownPressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.handleKeyEnterPressed = _this.handleKeyEnterPressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.keyHandlerMap = (_this$keyHandlerMap = {}, (0, _defineProperty2[\"default\"])(_this$keyHandlerMap, _constants.UP_KEY, _this.handleKeyUpPressed), (0, _defineProperty2[\"default\"])(_this$keyHandlerMap, _constants.DOWN_KEY, _this.handleKeyDownPressed), (0, _defineProperty2[\"default\"])(_this$keyHandlerMap, _constants.ENTER_KEY, _this.handleKeyEnterPressed), _this$keyHandlerMap);\r\n    _this.handleScrollDownArrowHover = _this.handleScrollDownArrowHover.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.handleScrollUpArrowHover = _this.handleScrollUpArrowHover.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.stopArrowScoll = _this.stopArrowScoll.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.updateScrollingArrows = _this.updateScrollingArrows.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.handleWindowScroll = _this.handleWindowScroll.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.handleOverlayOpened = _this.handleOverlayOpened.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.handleClick = _this.handleClick.bind((0, _assertThisInitialized2[\"default\"])(_this));\r\n    _this.windowScrolling = new _scrollController.WindowScrolling();\r\n    return _this;\r\n  }\r\n\r\n  (0, _createClass2[\"default\"])(Lookup, [{\r\n    key: \"componentDidUpdate\",\r\n    value: function componentDidUpdate(prevProps, prevState) {\r\n      var prevOptions = prevProps.options,\r\n          prevPreferredSelectedOption = prevProps.preferredSelectedOption;\r\n      var _this$props = this.props,\r\n          options = _this$props.options,\r\n          preferredSelectedOption = _this$props.preferredSelectedOption;\r\n\r\n      if (prevOptions !== options) {\r\n        var normalizedOptions = (0, _helpers.getNormalizedOptions)(options);\r\n        this.setState({\r\n          options: normalizedOptions,\r\n          focusedItemIndex: (0, _helpers.getInitialFocusedIndex)(normalizedOptions, preferredSelectedOption),\r\n          isOpen: this.isLookupOpen()\r\n        });\r\n      }\r\n\r\n      if (prevPreferredSelectedOption !== preferredSelectedOption) {\r\n        var currentOptions = this.state.options;\r\n        this.setState({\r\n          focusedItemIndex: (0, _helpers.getInitialFocusedIndex)(currentOptions, preferredSelectedOption),\r\n          isOpen: this.isLookupOpen()\r\n        });\r\n      }\r\n\r\n      var wasOpen = prevState.isOpen;\r\n      var isOpen = this.state.isOpen;\r\n\r\n      if (!wasOpen && isOpen && this.menuRef.current !== null) {\r\n        this.updateScrollingArrows();\r\n      }\r\n\r\n      if (!this.isLookupOpen()) this.windowScrolling.stopListening();\r\n    }\r\n  }, {\r\n    key: \"getValue\",\r\n    value: function getValue() {\r\n      var value = this.props.value;\r\n\r\n      if ((0, _typeof2[\"default\"])(value) === 'object' && !Array.isArray(value)) {\r\n        return value;\r\n      }\r\n\r\n      return undefined;\r\n    }\r\n  }, {\r\n    key: \"getErrorMessageId\",\r\n    value: function getErrorMessageId() {\r\n      var error = this.props.error;\r\n\r\n      if (error) {\r\n        return this.errorMessageId;\r\n      }\r\n\r\n      return undefined;\r\n    }\r\n  }, {\r\n    key: \"getAriaActivedescendant\",\r\n    value: function getAriaActivedescendant() {\r\n      var _this$state = this.state,\r\n          isFocused = _this$state.isFocused,\r\n          focusedItemIndex = _this$state.focusedItemIndex;\r\n      var options = this.props.options;\r\n      var isOpen = (0, _helpers.isMenuOpen)(options, isFocused);\r\n\r\n      if (isOpen) {\r\n        return \"lookup-item-\".concat(focusedItemIndex);\r\n      }\r\n\r\n      return undefined;\r\n    }\r\n  }, {\r\n    key: \"handleChange\",\r\n    value: function handleChange(value) {\r\n      var _this2 = this;\r\n\r\n      var onChange = this.props.onChange;\r\n      setTimeout(function () {\r\n        return _this2.containerRef.current.focus();\r\n      }, 0);\r\n      this.setState({\r\n        searchValue: ''\r\n      });\r\n      this.closeMenu();\r\n      onChange(value);\r\n    }\r\n  }, {\r\n    key: \"handleSearch\",\r\n    value: function handleSearch(event) {\r\n      var value = event.target.value;\r\n      this.setState({\r\n        searchValue: value\r\n      });\r\n      this.fireSearch(value);\r\n    }\r\n  }, {\r\n    key: \"handleFocus\",\r\n    value: function handleFocus() {\r\n      var _this$props2 = this.props,\r\n          onFocus = _this$props2.onFocus,\r\n          value = _this$props2.value;\r\n      this.openMenu();\r\n      var eventValue = value || null;\r\n      onFocus(eventValue);\r\n    }\r\n  }, {\r\n    key: \"handleBlur\",\r\n    value: function handleBlur() {\r\n      var _this$props3 = this.props,\r\n          onBlur = _this$props3.onBlur,\r\n          value = _this$props3.value;\r\n      this.closeMenu();\r\n      var eventValue = value || null;\r\n      onBlur(eventValue);\r\n    }\r\n  }, {\r\n    key: \"handleClick\",\r\n    value: function handleClick(event) {\r\n      var onClick = this.props.onClick;\r\n      this.openMenu();\r\n      return onClick(event);\r\n    }\r\n  }, {\r\n    key: \"handleRemoveValue\",\r\n    value: function handleRemoveValue() {\r\n      var _this3 = this;\r\n\r\n      var _this$props4 = this.props,\r\n          onChange = _this$props4.onChange,\r\n          onSearch = _this$props4.onSearch;\r\n      onChange(null);\r\n      onSearch('');\r\n      setTimeout(function () {\r\n        return _this3.focus();\r\n      }, 0);\r\n    }\r\n  }, {\r\n    key: \"fireSearch\",\r\n    value: function fireSearch(value) {\r\n      var _this$props5 = this.props,\r\n          onSearch = _this$props5.onSearch,\r\n          debounce = _this$props5.debounce;\r\n\r\n      if (debounce && value) {\r\n        this.resetTimeout();\r\n        this.timeout = setTimeout(function () {\r\n          onSearch(value);\r\n        }, 500);\r\n      } else {\r\n        this.resetTimeout();\r\n        onSearch(value);\r\n      }\r\n    }\r\n  }, {\r\n    key: \"clearInput\",\r\n    value: function clearInput() {\r\n      var _this4 = this;\r\n\r\n      var searchValue = '';\r\n      this.setState({\r\n        searchValue: searchValue\r\n      });\r\n      this.fireSearch(searchValue);\r\n      setTimeout(function () {\r\n        return _this4.focus();\r\n      }, 0);\r\n    }\r\n  }, {\r\n    key: \"resetTimeout\",\r\n    value: function resetTimeout() {\r\n      if (this.timeout) {\r\n        clearTimeout(this.timeout);\r\n      }\r\n    }\r\n  }, {\r\n    key: \"openMenu\",\r\n    value: function openMenu() {\r\n      return this.setState({\r\n        isFocused: true\r\n      });\r\n    }\r\n  }, {\r\n    key: \"closeMenu\",\r\n    value: function closeMenu() {\r\n      var options = this.state.options;\r\n      var preferredSelectedOption = this.props.preferredSelectedOption;\r\n      return this.setState({\r\n        isFocused: false,\r\n        isOpen: false,\r\n        focusedItemIndex: (0, _helpers.getInitialFocusedIndex)(options, preferredSelectedOption)\r\n      });\r\n    }\r\n  }, {\r\n    key: \"isLookupOpen\",\r\n    value: function isLookupOpen() {\r\n      var _this$state2 = this.state,\r\n          searchValue = _this$state2.searchValue,\r\n          isFocused = _this$state2.isFocused;\r\n      var options = this.props.options;\r\n      var isMenuEmpty = isFocused && !!searchValue && Array.isArray(options) && options.length === 0;\r\n      var isOpen = (0, _helpers.isMenuOpen)(options, isFocused);\r\n      return isOpen || isMenuEmpty;\r\n    }\r\n  }, {\r\n    key: \"handleHover\",\r\n    value: function handleHover(index) {\r\n      this.setState({\r\n        focusedItemIndex: index\r\n      });\r\n    }\r\n  }, {\r\n    key: \"handleKeyDown\",\r\n    value: function handleKeyDown(event) {\r\n      var searchValue = this.state.searchValue;\r\n      var keyCode = event.keyCode;\r\n\r\n      if (keyCode === _constants.ESCAPE_KEY) {\r\n        if (searchValue) {\r\n          event.stopPropagation();\r\n        } else if (this.isLookupOpen()) {\r\n          event.stopPropagation();\r\n          this.closeMenu();\r\n        }\r\n      }\r\n\r\n      if ((0, _helpers.isNavigationKey)(keyCode) && this.isLookupOpen()) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n\r\n        if (this.keyHandlerMap[keyCode]) {\r\n          this.keyHandlerMap[keyCode]();\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: \"stopArrowScoll\",\r\n    value: function stopArrowScoll() {\r\n      if (this.scrollingTimer) {\r\n        clearTimeout(this.scrollingTimer);\r\n      }\r\n    }\r\n  }, {\r\n    key: \"scrollTo\",\r\n    value: function scrollTo(offset) {\r\n      var menu = this.menuRef.current.getRef();\r\n      menu.scrollTo(0, offset);\r\n    }\r\n  }, {\r\n    key: \"scrollBy\",\r\n    value: function scrollBy(offset) {\r\n      var menu = this.menuRef.current.getRef();\r\n      menu.scrollBy(0, offset);\r\n    }\r\n  }, {\r\n    key: \"handleScrollUpArrowHover\",\r\n    value: function handleScrollUpArrowHover() {\r\n      var _this5 = this;\r\n\r\n      this.stopArrowScoll();\r\n      var menu = this.menuRef.current.getRef();\r\n      this.scrollingTimer = setTimeout(function () {\r\n        if (menu.scrollTop > 0) {\r\n          menu.scrollBy(0, -1);\r\n          setTimeout(_this5.handleScrollUpArrowHover(), 5);\r\n        } else {\r\n          _this5.stopArrowScoll();\r\n        }\r\n      }, 5);\r\n      this.updateScrollingArrows();\r\n    }\r\n  }, {\r\n    key: \"handleScrollDownArrowHover\",\r\n    value: function handleScrollDownArrowHover() {\r\n      var _this6 = this;\r\n\r\n      this.stopArrowScoll();\r\n      var menu = this.menuRef.current.getRef();\r\n      this.scrollingTimer = setTimeout(function () {\r\n        if (!(0, _isScrollPositionAtMenuBottom[\"default\"])(menu)) {\r\n          menu.scrollBy(0, 1);\r\n          setTimeout(_this6.handleScrollDownArrowHover(), 5);\r\n        } else {\r\n          _this6.stopArrowScoll();\r\n        }\r\n      }, 5);\r\n      this.updateScrollingArrows();\r\n    }\r\n  }, {\r\n    key: \"updateScrollingArrows\",\r\n    value: function updateScrollingArrows() {\r\n      var menu = this.menuRef.current.getRef();\r\n      var showScrollUpArrow = menu.scrollTop > 0;\r\n      var showScrollDownArrow = !(0, _isScrollPositionAtMenuBottom[\"default\"])(menu);\r\n      this.setState({\r\n        showScrollUpArrow: showScrollUpArrow,\r\n        showScrollDownArrow: showScrollDownArrow\r\n      });\r\n    }\r\n  }, {\r\n    key: \"handleKeyUpPressed\",\r\n    value: function handleKeyUpPressed() {\r\n      var _this$state3 = this.state,\r\n          focusedItemIndex = _this$state3.focusedItemIndex,\r\n          options = _this$state3.options;\r\n\r\n      if (focusedItemIndex > 0) {\r\n        var prevIndex = focusedItemIndex - 1;\r\n        var prevFocusedIndex = options[prevIndex].type === 'header' ? focusedItemIndex - 2 : prevIndex;\r\n\r\n        if (prevFocusedIndex >= 0) {\r\n          this.setState({\r\n            focusedItemIndex: prevFocusedIndex\r\n          });\r\n        }\r\n\r\n        this.scrollUp(prevFocusedIndex);\r\n      }\r\n    }\r\n  }, {\r\n    key: \"scrollUp\",\r\n    value: function scrollUp(prevFocusedIndex) {\r\n      var options = this.state.options;\r\n      var size = this.props.size;\r\n      var menu = this.menuRef.current.getRef();\r\n      var prevIndex = prevFocusedIndex >= 0 ? prevFocusedIndex : 0;\r\n      var prevFocusedOption = menu.childNodes[prevIndex];\r\n      var visibleOptionsAmount = visibleOptionsMap[size] || visibleOptionsMap.medium;\r\n\r\n      if (options.length > visibleOptionsAmount && !(0, _helpers.isOptionVisible)(prevFocusedOption, menu)) {\r\n        this.menuRef.current.scrollTo(OPTION_HEIGHT * prevIndex);\r\n      }\r\n    }\r\n  }, {\r\n    key: \"handleKeyDownPressed\",\r\n    value: function handleKeyDownPressed() {\r\n      var _this$state4 = this.state,\r\n          focusedItemIndex = _this$state4.focusedItemIndex,\r\n          options = _this$state4.options;\r\n      var lastIndex = options.length - 1;\r\n\r\n      if (focusedItemIndex < lastIndex) {\r\n        var nextIndex = focusedItemIndex + 1;\r\n        var nextFocusedIndex = options[nextIndex].type === 'header' ? focusedItemIndex + 2 : nextIndex;\r\n\r\n        if (nextFocusedIndex <= lastIndex) {\r\n          this.setState({\r\n            focusedItemIndex: nextFocusedIndex\r\n          });\r\n          this.scrollDown(nextFocusedIndex);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: \"scrollDown\",\r\n    value: function scrollDown(nextFocusedIndex) {\r\n      var options = this.state.options;\r\n      var size = this.props.size;\r\n      var menu = this.menuRef.current.getRef();\r\n      var nextFocusedOption = menu.childNodes[nextFocusedIndex];\r\n      var visibleOptionsAmount = visibleOptionsMap[size] || visibleOptionsMap.medium;\r\n\r\n      if (options.length > visibleOptionsAmount && !(0, _helpers.isOptionVisible)(nextFocusedOption, menu)) {\r\n        this.menuRef.current.scrollTo(OPTION_HEIGHT * (nextFocusedIndex - (visibleOptionsAmount - 1)));\r\n      }\r\n    }\r\n  }, {\r\n    key: \"handleKeyEnterPressed\",\r\n    value: function handleKeyEnterPressed() {\r\n      var onChange = this.props.onChange;\r\n      var focusedItemIndex = this.state.focusedItemIndex;\r\n      var options = this.state.options;\r\n      var value = options[focusedItemIndex];\r\n      this.containerRef.current.focus();\r\n      this.setState({\r\n        searchValue: ''\r\n      });\r\n      onChange(value);\r\n    }\r\n  }, {\r\n    key: \"handleWindowScroll\",\r\n    value: function handleWindowScroll(event) {\r\n      if (this.menuRef.current && this.menuRef.current.getRef().contains(event.target)) return;\r\n      this.closeMenu();\r\n    }\r\n  }, {\r\n    key: \"handleOverlayOpened\",\r\n    value: function handleOverlayOpened() {\r\n      this.windowScrolling.startListening(this.handleWindowScroll);\r\n    }\r\n    /**\r\n     * Sets focus on the element.\r\n     * @public\r\n     */\r\n\r\n  }, {\r\n    key: \"focus\",\r\n    value: function focus() {\r\n      this.inputRef.current.focus();\r\n    }\r\n    /**\r\n     * Sets click on the element.\r\n     * @public\r\n     */\r\n\r\n  }, {\r\n    key: \"click\",\r\n    value: function click() {\r\n      this.inputRef.current.click();\r\n    }\r\n    /**\r\n     * Sets blur on the element.\r\n     * @public\r\n     */\r\n\r\n  }, {\r\n    key: \"blur\",\r\n    value: function blur() {\r\n      this.inputRef.current.blur();\r\n    }\r\n  }, {\r\n    key: \"render\",\r\n    value: function render() {\r\n      var _this$props6 = this.props,\r\n          style = _this$props6.style,\r\n          className = _this$props6.className,\r\n          label = _this$props6.label,\r\n          error = _this$props6.error,\r\n          size = _this$props6.size,\r\n          placeholder = _this$props6.placeholder,\r\n          disabled = _this$props6.disabled,\r\n          readOnly = _this$props6.readOnly,\r\n          tabIndex = _this$props6.tabIndex,\r\n          onClick = _this$props6.onClick,\r\n          required = _this$props6.required,\r\n          id = _this$props6.id,\r\n          name = _this$props6.name,\r\n          labelAlignment = _this$props6.labelAlignment,\r\n          hideLabel = _this$props6.hideLabel,\r\n          isLoading = _this$props6.isLoading,\r\n          icon = _this$props6.icon,\r\n          variant = _this$props6.variant;\r\n      var _this$state5 = this.state,\r\n          searchValue = _this$state5.searchValue,\r\n          focusedItemIndex = _this$state5.focusedItemIndex,\r\n          options = _this$state5.options;\r\n      var onDeleteValue = disabled || readOnly ? undefined : this.handleRemoveValue;\r\n      var isLookupOpen = this.isLookupOpen();\r\n      var errorMessageId = this.getErrorMessageId();\r\n      var currentValue = this.getValue();\r\n      var _this$state6 = this.state,\r\n          showScrollUpArrow = _this$state6.showScrollUpArrow,\r\n          showScrollDownArrow = _this$state6.showScrollDownArrow;\r\n      var errorValue = isLoading ? null : error;\r\n      return /*#__PURE__*/_react[\"default\"].createElement(_container[\"default\"], {\r\n        id: id,\r\n        className: className,\r\n        style: style,\r\n        role: \"presentation\",\r\n        onKeyDown: this.handleKeyDown,\r\n        ref: this.containerRef,\r\n        tabIndex: -1,\r\n        onScroll: this.updateScrollingArrows\r\n      }, /*#__PURE__*/_react[\"default\"].createElement(_label[\"default\"], {\r\n        label: label,\r\n        labelAlignment: labelAlignment,\r\n        hideLabel: hideLabel,\r\n        required: required,\r\n        inputId: this.inputId,\r\n        readOnly: readOnly\r\n      }), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\r\n        isTrue: currentValue\r\n      }, /*#__PURE__*/_react[\"default\"].createElement(_selectedValue[\"default\"], {\r\n        id: this.inputId,\r\n        name: name,\r\n        value: currentValue,\r\n        tabIndex: tabIndex,\r\n        onClick: onClick,\r\n        disabled: disabled,\r\n        error: errorValue,\r\n        required: required,\r\n        readOnly: readOnly,\r\n        errorMessageId: errorMessageId,\r\n        ref: this.inputRef,\r\n        onClearValue: onDeleteValue\r\n      })), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\r\n        isTrue: !currentValue\r\n      }, /*#__PURE__*/_react[\"default\"].createElement(_inputContainer[\"default\"], {\r\n        \"aria-expanded\": isLookupOpen,\r\n        \"aria-haspopup\": \"listbox\" // eslint-disable-next-line jsx-a11y/role-has-required-aria-props\r\n        ,\r\n        role: \"combobox\"\r\n      }, /*#__PURE__*/_react[\"default\"].createElement(_spinner[\"default\"], {\r\n        isVisible: isLoading,\r\n        size: \"x-small\",\r\n        assistiveText: \"searching\"\r\n      }), /*#__PURE__*/_react[\"default\"].createElement(_rightElement[\"default\"], {\r\n        showCloseButton: !!searchValue,\r\n        onClear: this.clearInput,\r\n        icon: icon,\r\n        error: errorValue\r\n      }), /*#__PURE__*/_react[\"default\"].createElement(_input[\"default\"], {\r\n        id: this.inputId,\r\n        name: name,\r\n        type: \"search\",\r\n        value: searchValue,\r\n        placeholder: placeholder,\r\n        onChange: this.handleSearch,\r\n        tabIndex: tabIndex,\r\n        onFocus: this.handleFocus,\r\n        onBlur: this.handleBlur,\r\n        onClick: this.handleClick,\r\n        disabled: disabled,\r\n        readOnly: readOnly,\r\n        required: required,\r\n        autoComplete: \"off\",\r\n        \"aria-describedby\": errorMessageId,\r\n        \"aria-autocomplete\": \"list\",\r\n        \"aria-controls\": this.listboxId,\r\n        \"aria-activedescendant\": this.getAriaActivedescendant(),\r\n        ref: this.inputRef,\r\n        iconPosition: \"right\",\r\n        icon: icon,\r\n        error: errorValue,\r\n        isLoading: isLoading,\r\n        variant: variant\r\n      }), /*#__PURE__*/_react[\"default\"].createElement(_InternalOverlay[\"default\"], {\r\n        isVisible: isLookupOpen,\r\n        triggerElementRef: this.inputRef,\r\n        positionResolver: _lookupPositionResolver[\"default\"],\r\n        onOpened: this.handleOverlayOpened\r\n      }, /*#__PURE__*/_react[\"default\"].createElement(_optionsMenu[\"default\"], {\r\n        id: this.listboxId,\r\n        role: \"listbox\",\r\n        \"data-id\": \"lookup-options-container\"\r\n      }, /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\r\n        isTrue: showScrollUpArrow\r\n      }, /*#__PURE__*/_react[\"default\"].createElement(_menuArrowButton[\"default\"], {\r\n        arrow: \"up\",\r\n        onMouseEnter: this.handleScrollUpArrowHover,\r\n        onMouseLeave: this.stopArrowScoll\r\n      })), /*#__PURE__*/_react[\"default\"].createElement(_options[\"default\"], {\r\n        items: options,\r\n        value: searchValue,\r\n        onSelectOption: this.handleChange,\r\n        focusedItemIndex: focusedItemIndex,\r\n        onHoverOption: this.handleHover,\r\n        itemHeight: OPTION_HEIGHT,\r\n        ref: this.menuRef,\r\n        size: size\r\n      }), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\r\n        isTrue: showScrollDownArrow\r\n      }, /*#__PURE__*/_react[\"default\"].createElement(_menuArrowButton[\"default\"], {\r\n        arrow: \"down\",\r\n        onMouseEnter: this.handleScrollDownArrowHover,\r\n        onMouseLeave: this.stopArrowScoll\r\n      })))))), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\r\n        isTrue: errorValue\r\n      }, /*#__PURE__*/_react[\"default\"].createElement(_errorText[\"default\"], {\r\n        id: errorMessageId\r\n      }, error)));\r\n    }\r\n  }]);\r\n  return Lookup;\r\n}(_react.Component);\r\n\r\nLookup.propTypes = {\r\n  /** Text label for the Lookup. */\r\n  label: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\r\n\r\n  /** Describes the position of the Lookup label. Options include left, center and right.\r\n   * This value defaults to center. */\r\n  labelAlignment: _propTypes[\"default\"].oneOf(['left', 'center', 'right']),\r\n\r\n  /** A boolean to hide the Lookup label. */\r\n  hideLabel: _propTypes[\"default\"].bool,\r\n\r\n  /** Specifies the selected value of the Lookup. */\r\n  value: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].shape({\r\n    label: _propTypes[\"default\"].string,\r\n    description: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].node, _propTypes[\"default\"].string]),\r\n    icon: _propTypes[\"default\"].node\r\n  }), _propTypes[\"default\"].string]),\r\n\r\n  /** An array of matched options to show in a menu. */\r\n  options: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\r\n    label: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].node, _propTypes[\"default\"].string]),\r\n    description: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].node, _propTypes[\"default\"].string]),\r\n    icon: _propTypes[\"default\"].node\r\n  })),\r\n\r\n  /** The name of the Lookup. */\r\n  name: _propTypes[\"default\"].string,\r\n\r\n  /** If set to true the onSearch event is sent when the customer finish typing. */\r\n  debounce: _propTypes[\"default\"].bool,\r\n\r\n  /** If is set to true, then is showed a loading symbol. */\r\n  isLoading: _propTypes[\"default\"].bool,\r\n\r\n  /** Text that is displayed when the field is empty, to prompt the user for a valid entry. */\r\n  placeholder: _propTypes[\"default\"].string,\r\n\r\n  /** Specifies that the Lookup must be filled out before submitting the form.\r\n   * This value defaults to false. */\r\n  required: _propTypes[\"default\"].bool,\r\n\r\n  /** Specifies that the Lookup must be filled out before submitting the form. */\r\n  error: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\r\n\r\n  /** Specifies that the Lookup element should be disabled. This value defaults to false. */\r\n  disabled: _propTypes[\"default\"].bool,\r\n\r\n  /** Specifies that the Lookup is read-only. This value defaults to false. */\r\n  readOnly: _propTypes[\"default\"].bool,\r\n\r\n  /** The icon that appears in the Lookup when the input search is empty.\r\n   * If not passed by default a search icon will be showed. */\r\n  icon: _propTypes[\"default\"].node,\r\n\r\n  /** The size of the Lookup menu. Options include small, medium, or large.\r\n   * This value defaults to medium. */\r\n  size: _propTypes[\"default\"].oneOf(['small', 'medium', 'large']),\r\n\r\n  /** Specifies the tab order of an element (when the tab button is used for navigating). */\r\n  tabIndex: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].number, _propTypes[\"default\"].string]),\r\n\r\n  /** The action triggered for every key stroke when the customer is typing in the input.\r\n   * It sent the value/query of the input. This value is normally used for filter/search\r\n   * for more options. */\r\n  onSearch: _propTypes[\"default\"].func,\r\n\r\n  /**  The action triggered when click/select an option. */\r\n  onChange: _propTypes[\"default\"].func,\r\n\r\n  /** The action triggered when the element is clicked. */\r\n  onClick: _propTypes[\"default\"].func,\r\n\r\n  /** The action triggered when the element receives focus. */\r\n  onFocus: _propTypes[\"default\"].func,\r\n\r\n  /** The action triggered when the element releases focus. */\r\n  onBlur: _propTypes[\"default\"].func,\r\n\r\n  /** The id of the outer element. */\r\n  id: _propTypes[\"default\"].string,\r\n\r\n  /** A CSS class for the outer element, in addition to the component's base classes. */\r\n  className: _propTypes[\"default\"].string,\r\n\r\n  /** An object with custom style applied to the outer element. */\r\n  style: _propTypes[\"default\"].object,\r\n\r\n  /** The index of the option that is visual-focus initially */\r\n  preferredSelectedOption: _propTypes[\"default\"].number,\r\n\r\n  /** The variant changes the appearance of the Input. Accepted variants include default,\r\n   * shaded and bare. This value defaults to default. */\r\n  variant: _propTypes[\"default\"].oneOf(['default', 'shaded', 'bare'])\r\n};\r\nLookup.defaultProps = {\r\n  label: undefined,\r\n  value: undefined,\r\n  name: undefined,\r\n  placeholder: null,\r\n  required: false,\r\n  error: null,\r\n  disabled: false,\r\n  readOnly: false,\r\n  icon: /*#__PURE__*/_react[\"default\"].createElement(_searchIcon[\"default\"], null),\r\n  size: 'medium',\r\n  onChange: function onChange() {},\r\n  tabIndex: undefined,\r\n  onClick: function onClick() {},\r\n  onFocus: function onFocus() {},\r\n  onBlur: function onBlur() {},\r\n  className: undefined,\r\n  style: undefined,\r\n  id: undefined,\r\n  labelAlignment: 'center',\r\n  hideLabel: false,\r\n  isLoading: false,\r\n  options: undefined,\r\n  onSearch: function onSearch() {},\r\n  debounce: false,\r\n  preferredSelectedOption: 0,\r\n  variant: 'default'\r\n};\r\n\r\nvar _default = (0, _withReduxForm[\"default\"])(Lookup);\r\n\r\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}