{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _hooks = require(\"@rainbow-modules/hooks\");\n\nvar _label = _interopRequireDefault(require(\"../Input/label\"));\n\nvar _hooks2 = require(\"../../libs/hooks\");\n\nvar _styled = require(\"./styled\");\n\nvar _InternalOverlay = _interopRequireDefault(require(\"../InternalOverlay\"));\n\nvar _RenderIf = _interopRequireDefault(require(\"../RenderIf\"));\n\nvar _helpText = _interopRequireDefault(require(\"../Input/styled/helpText\"));\n\nvar _errorText = _interopRequireDefault(require(\"../Input/styled/errorText\"));\n\nvar _plus = _interopRequireDefault(require(\"./icons/plus\"));\n\nvar _constants = require(\"../../libs/constants\");\n\nvar _helpers = require(\"./helpers\");\n\nvar _normalizeValue = _interopRequireDefault(require(\"./helpers/normalizeValue\"));\n\nvar _content = _interopRequireDefault(require(\"./content\"));\n/* eslint-disable react/no-unused-prop-types */\n\n\nvar MultiSelect = /*#__PURE__*/_react[\"default\"].forwardRef(function (props, ref) {\n  var _useReduxForm = (0, _hooks2.useReduxForm)(props),\n      id = _useReduxForm.id,\n      className = _useReduxForm.className,\n      style = _useReduxForm.style,\n      label = _useReduxForm.label,\n      labelAlignment = _useReduxForm.labelAlignment,\n      hideLabel = _useReduxForm.hideLabel,\n      placeholder = _useReduxForm.placeholder,\n      error = _useReduxForm.error,\n      bottomHelpText = _useReduxForm.bottomHelpText,\n      required = _useReduxForm.required,\n      disabled = _useReduxForm.disabled,\n      readOnly = _useReduxForm.readOnly,\n      tabIndex = _useReduxForm.tabIndex,\n      variant = _useReduxForm.variant,\n      chipVariant = _useReduxForm.chipVariant,\n      isBare = _useReduxForm.isBare,\n      isLoading = _useReduxForm.isLoading,\n      value = _useReduxForm.value,\n      onChange = _useReduxForm.onChange,\n      onFocus = _useReduxForm.onFocus,\n      onBlur = _useReduxForm.onBlur,\n      children = _useReduxForm.children,\n      showCheckbox = _useReduxForm.showCheckbox;\n\n  var triggerRef = (0, _react.useRef)();\n  var dropdownContainerRef = (0, _react.useRef)();\n  var dropdownRef = (0, _react.useRef)();\n  var comboboxRef = (0, _react.useRef)();\n  var inputRef = (0, _react.useRef)();\n  (0, _react.useImperativeHandle)(ref, function () {\n    return {\n      focus: function focus() {\n        triggerRef.current.focus();\n      },\n      click: function click() {\n        triggerRef.current.click();\n      },\n      blur: function blur() {\n        triggerRef.current.blur();\n      }\n    };\n  });\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      isOpen = _useState2[0],\n      setIsOpen = _useState2[1];\n\n  var labelId = (0, _hooks2.useLabelId)('label');\n  var comboboxId = (0, _hooks2.useUniqueIdentifier)('combobox');\n  var dropdownId = (0, _hooks2.useUniqueIdentifier)('dropdown');\n  var inputId = (0, _hooks2.useUniqueIdentifier)('input');\n  var errorMessageId = (0, _hooks2.useErrorMessageId)();\n\n  var closeAndFocusInput = function closeAndFocusInput() {\n    setIsOpen(false);\n    setTimeout(function () {\n      return triggerRef.current.focus();\n    }, 0);\n  };\n\n  var handleChange = function handleChange(val) {\n    if (!showCheckbox) {\n      closeAndFocusInput();\n    }\n\n    return onChange((0, _normalizeValue[\"default\"])(val));\n  };\n\n  var handleDelete = function handleDelete(option) {\n    if (Array.isArray(value)) {\n      return handleChange(value.filter(function (val) {\n        return val !== option;\n      }));\n    }\n\n    return handleChange([]);\n  };\n\n  var toggleDropdown = function toggleDropdown() {\n    if (disabled || readOnly) return;\n    setIsOpen(!isOpen);\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    if (isOpen) {\n      if (event.keyCode === _constants.ESCAPE_KEY || event.keyCode === _constants.TAB_KEY && !(showCheckbox && event.target.tagName !== 'BUTTON')) {\n        event.preventDefault();\n        closeAndFocusInput();\n      }\n    }\n\n    if (event.target !== comboboxRef.current) return;\n\n    if (event.keyCode === _constants.ENTER_KEY || event.keyCode === _constants.SPACE_KEY) {\n      event.preventDefault();\n      toggleDropdown();\n    }\n  };\n\n  var handleClick = function handleClick() {\n    if (disabled) {\n      return;\n    }\n\n    if (isOpen) {\n      dropdownRef.current.focus();\n      return;\n    }\n\n    if (readOnly) {\n      inputRef.current.focus();\n      return;\n    }\n\n    triggerRef.current.focus();\n  };\n\n  var handleTriggerClick = function handleTriggerClick(event) {\n    event.preventDefault();\n    toggleDropdown();\n  };\n\n  var handleFocus = function handleFocus() {\n    if (!readOnly) {\n      triggerRef.current.focus();\n    }\n  };\n\n  var handleBlur = function handleBlur() {\n    if (!readOnly) {\n      triggerRef.current.blur();\n    }\n  };\n\n  (0, _hooks.useOutsideClick)(dropdownContainerRef, function (event) {\n    if (event.target !== triggerRef.current.buttonRef.current && !triggerRef.current.buttonRef.current.contains(event.target)) {\n      setIsOpen(false);\n    }\n  }, isOpen);\n  (0, _hooks2.useWindowResize)(function () {\n    return setIsOpen(false);\n  }, isOpen);\n\n  var _useState3 = (0, _react.useState)(),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      chipsBoundingRect = _useState4[0],\n      setChipsBoundingRect = _useState4[1];\n\n  var refCallback = function refCallback(element) {\n    if (element) {\n      var elementRect = JSON.stringify(element.getBoundingClientRect());\n\n      if (!chipsBoundingRect || chipsBoundingRect !== elementRect) {\n        setChipsBoundingRect(elementRect);\n      }\n    }\n  };\n\n  var selectedCount = Array.isArray(value) ? value.length : 1;\n  var shouldRenderContent = (0, _helpers.hasContent)(value);\n  var shouldRenderCount = !!value && selectedCount > 0 && variant === 'default';\n  var shouldRenderButton = !readOnly && !disabled;\n  var inputTabIndex = readOnly ? tabIndex : '-1';\n  var dropdownWidth = comboboxRef.current ? comboboxRef.current.offsetWidth : 0;\n  return /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledContainer, {\n    id: id,\n    className: className,\n    style: style\n  }, /*#__PURE__*/_react[\"default\"].createElement(_label[\"default\"], {\n    id: labelId,\n    label: label,\n    labelAlignment: labelAlignment,\n    hideLabel: hideLabel,\n    required: required,\n    inputId: inputId\n  }), /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledCombobox, {\n    id: comboboxId,\n    isBare: isBare,\n    error: error,\n    disabled: disabled,\n    role: \"combobox\",\n    \"aria-controls\": dropdownId,\n    \"aria-expanded\": isOpen,\n    onClick: handleClick,\n    onKeyDown: handleKeyDown,\n    ref: comboboxRef,\n    \"aria-labelledby\": labelId,\n    variant: variant\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledInput, {\n    id: inputId,\n    role: \"textbox\",\n    \"aria-autocomplete\": \"none\",\n    tabIndex: inputTabIndex,\n    disabled: disabled,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    ref: inputRef,\n    readOnly: true\n  }), /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledChipContainer, {\n    ref: refCallback\n  }, /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n    isTrue: !shouldRenderContent\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledPlaceholder, null, placeholder)), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n    isTrue: shouldRenderContent\n  }, /*#__PURE__*/_react[\"default\"].createElement(_content[\"default\"], {\n    variant: variant,\n    chipVariant: chipVariant,\n    readOnly: readOnly,\n    disabled: disabled,\n    value: value,\n    onDelete: handleDelete\n  }))), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n    isTrue: shouldRenderCount\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledCountText, {\n    readOnly: readOnly\n  }, \"(\", selectedCount, \")\")), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n    isTrue: shouldRenderButton\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledButtonIcon, {\n    title: \"Add\",\n    variant: \"neutral\",\n    size: \"small\",\n    icon: /*#__PURE__*/_react[\"default\"].createElement(_plus[\"default\"], null),\n    onClick: handleTriggerClick,\n    disabled: disabled,\n    ref: triggerRef,\n    tabIndex: tabIndex,\n    onFocus: onFocus,\n    onBlur: onBlur\n  })), /*#__PURE__*/_react[\"default\"].createElement(_InternalOverlay[\"default\"], {\n    isVisible: isOpen,\n    positionResolver: _helpers.positionResolver,\n    onOpened: function onOpened() {\n      return dropdownRef.current.focus();\n    },\n    triggerElementRef: function triggerElementRef() {\n      return comboboxRef;\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    ref: dropdownContainerRef\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledDropdown, {\n    id: dropdownId,\n    value: value,\n    isLoading: isLoading,\n    onChange: handleChange,\n    ref: dropdownRef,\n    width: dropdownWidth,\n    placeholder: placeholder,\n    showCheckbox: showCheckbox,\n    multiple: true\n  }, children)))), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n    isTrue: bottomHelpText\n  }, /*#__PURE__*/_react[\"default\"].createElement(_helpText[\"default\"], {\n    alignSelf: \"center\"\n  }, bottomHelpText)), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n    isTrue: error\n  }, /*#__PURE__*/_react[\"default\"].createElement(_errorText[\"default\"], {\n    alignSelf: \"center\",\n    id: errorMessageId\n  }, error)));\n});\n\nMultiSelect.propTypes = {\n  /** A CSS class for the outer element, in addition to the component's base classes. */\n  className: _propTypes[\"default\"].string,\n\n  /** An object with custom style applied to the outer element. */\n  style: _propTypes[\"default\"].object,\n\n  /** Text label for the input. */\n  label: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\n\n  /** Describes the position of the MultiSelect label. Options include left, center and right.\n   * This value defaults to center. */\n  labelAlignment: _propTypes[\"default\"].oneOf(['left', 'center', 'right']),\n\n  /** A boolean to hide the MultiSelect label. */\n  hideLabel: _propTypes[\"default\"].bool,\n\n  /** Text that is displayed when the field is empty, to prompt the user for a valid entry. */\n  placeholder: _propTypes[\"default\"].string,\n\n  /** Specifies that an input field must be filled out before submitting the form. */\n  error: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\n\n  /** Shows the help message below the input. */\n  bottomHelpText: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\n\n  /** Specifies that an input field must be filled out before submitting the form.\n   * This value defaults to false. */\n  required: _propTypes[\"default\"].bool,\n\n  /** Specifies that an input element should be disabled. This value defaults to false. */\n  disabled: _propTypes[\"default\"].bool,\n\n  /** If is set to true, then is showed a loading symbol. */\n  isLoading: _propTypes[\"default\"].bool,\n\n  /** Specifies that an input field is read-only. This value defaults to false. */\n  readOnly: _propTypes[\"default\"].bool,\n\n  /** Specifies the tab order of an element (when the tab button is used for navigating). */\n  tabIndex: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].number, _propTypes[\"default\"].string]),\n\n  /** Specifies the variant for the input. */\n  variant: _propTypes[\"default\"].oneOf(['default', 'chip', 'bare']),\n\n  /** Specifies the variant for the chips. */\n  chipVariant: _propTypes[\"default\"].oneOf(['base', 'neutral', 'outline-brand', 'brand']),\n\n  /** Specifies the value of an input element. */\n  value: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n    name: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n    label: _propTypes[\"default\"].string,\n    value: _propTypes[\"default\"].any\n  })),\n\n  /** The action triggered when a value attribute changes. */\n  onChange: _propTypes[\"default\"].func,\n\n  /** The action triggered when the element receives focus. */\n  onFocus: _propTypes[\"default\"].func,\n\n  /** The action triggered when the element releases focus. */\n  onBlur: _propTypes[\"default\"].func,\n\n  /**\n   * This prop that should not be visible in the documentation.\n   * @ignore\n   */\n  children: _propTypes[\"default\"].node\n};\nMultiSelect.defaultProps = {\n  className: undefined,\n  style: undefined,\n  label: undefined,\n  labelAlignment: 'center',\n  hideLabel: false,\n  placeholder: null,\n  error: null,\n  bottomHelpText: null,\n  required: false,\n  disabled: false,\n  readOnly: false,\n  isLoading: false,\n  tabIndex: 0,\n  variant: 'default',\n  chipVariant: 'base',\n  value: undefined,\n  onChange: function onChange() {},\n  onFocus: function onFocus() {},\n  onBlur: function onBlur() {},\n  children: null\n};\nvar _default = MultiSelect;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["E:/Monirul AWS/PorzotokFrontend/node_modules/react-rainbow-components/components/MultiSelect/index.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","_slicedToArray2","_react","_propTypes","_hooks","_label","_hooks2","_styled","_InternalOverlay","_RenderIf","_helpText","_errorText","_plus","_constants","_helpers","_normalizeValue","_content","MultiSelect","forwardRef","props","ref","_useReduxForm","useReduxForm","id","className","style","label","labelAlignment","hideLabel","placeholder","error","bottomHelpText","required","disabled","readOnly","tabIndex","variant","chipVariant","isBare","isLoading","onChange","onFocus","onBlur","children","showCheckbox","triggerRef","useRef","dropdownContainerRef","dropdownRef","comboboxRef","inputRef","useImperativeHandle","focus","current","click","blur","_useState","useState","_useState2","isOpen","setIsOpen","labelId","useLabelId","comboboxId","useUniqueIdentifier","dropdownId","inputId","errorMessageId","useErrorMessageId","closeAndFocusInput","setTimeout","handleChange","val","handleDelete","option","Array","isArray","filter","toggleDropdown","handleKeyDown","event","keyCode","ESCAPE_KEY","TAB_KEY","target","tagName","preventDefault","ENTER_KEY","SPACE_KEY","handleClick","handleTriggerClick","handleFocus","handleBlur","useOutsideClick","buttonRef","contains","useWindowResize","_useState3","_useState4","chipsBoundingRect","setChipsBoundingRect","refCallback","element","elementRect","JSON","stringify","getBoundingClientRect","selectedCount","length","shouldRenderContent","hasContent","shouldRenderCount","shouldRenderButton","inputTabIndex","dropdownWidth","offsetWidth","createElement","StyledContainer","StyledCombobox","role","onClick","onKeyDown","StyledInput","StyledChipContainer","isTrue","StyledPlaceholder","onDelete","StyledCountText","StyledButtonIcon","title","size","icon","isVisible","positionResolver","onOpened","triggerElementRef","StyledDropdown","width","multiple","alignSelf","propTypes","string","object","oneOfType","node","oneOf","bool","number","arrayOf","shape","name","any","func","defaultProps","undefined","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _hooks = require(\"@rainbow-modules/hooks\");\n\nvar _label = _interopRequireDefault(require(\"../Input/label\"));\n\nvar _hooks2 = require(\"../../libs/hooks\");\n\nvar _styled = require(\"./styled\");\n\nvar _InternalOverlay = _interopRequireDefault(require(\"../InternalOverlay\"));\n\nvar _RenderIf = _interopRequireDefault(require(\"../RenderIf\"));\n\nvar _helpText = _interopRequireDefault(require(\"../Input/styled/helpText\"));\n\nvar _errorText = _interopRequireDefault(require(\"../Input/styled/errorText\"));\n\nvar _plus = _interopRequireDefault(require(\"./icons/plus\"));\n\nvar _constants = require(\"../../libs/constants\");\n\nvar _helpers = require(\"./helpers\");\n\nvar _normalizeValue = _interopRequireDefault(require(\"./helpers/normalizeValue\"));\n\nvar _content = _interopRequireDefault(require(\"./content\"));\n\n/* eslint-disable react/no-unused-prop-types */\nvar MultiSelect = /*#__PURE__*/_react[\"default\"].forwardRef(function (props, ref) {\n  var _useReduxForm = (0, _hooks2.useReduxForm)(props),\n      id = _useReduxForm.id,\n      className = _useReduxForm.className,\n      style = _useReduxForm.style,\n      label = _useReduxForm.label,\n      labelAlignment = _useReduxForm.labelAlignment,\n      hideLabel = _useReduxForm.hideLabel,\n      placeholder = _useReduxForm.placeholder,\n      error = _useReduxForm.error,\n      bottomHelpText = _useReduxForm.bottomHelpText,\n      required = _useReduxForm.required,\n      disabled = _useReduxForm.disabled,\n      readOnly = _useReduxForm.readOnly,\n      tabIndex = _useReduxForm.tabIndex,\n      variant = _useReduxForm.variant,\n      chipVariant = _useReduxForm.chipVariant,\n      isBare = _useReduxForm.isBare,\n      isLoading = _useReduxForm.isLoading,\n      value = _useReduxForm.value,\n      onChange = _useReduxForm.onChange,\n      onFocus = _useReduxForm.onFocus,\n      onBlur = _useReduxForm.onBlur,\n      children = _useReduxForm.children,\n      showCheckbox = _useReduxForm.showCheckbox;\n\n  var triggerRef = (0, _react.useRef)();\n  var dropdownContainerRef = (0, _react.useRef)();\n  var dropdownRef = (0, _react.useRef)();\n  var comboboxRef = (0, _react.useRef)();\n  var inputRef = (0, _react.useRef)();\n  (0, _react.useImperativeHandle)(ref, function () {\n    return {\n      focus: function focus() {\n        triggerRef.current.focus();\n      },\n      click: function click() {\n        triggerRef.current.click();\n      },\n      blur: function blur() {\n        triggerRef.current.blur();\n      }\n    };\n  });\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      isOpen = _useState2[0],\n      setIsOpen = _useState2[1];\n\n  var labelId = (0, _hooks2.useLabelId)('label');\n  var comboboxId = (0, _hooks2.useUniqueIdentifier)('combobox');\n  var dropdownId = (0, _hooks2.useUniqueIdentifier)('dropdown');\n  var inputId = (0, _hooks2.useUniqueIdentifier)('input');\n  var errorMessageId = (0, _hooks2.useErrorMessageId)();\n\n  var closeAndFocusInput = function closeAndFocusInput() {\n    setIsOpen(false);\n    setTimeout(function () {\n      return triggerRef.current.focus();\n    }, 0);\n  };\n\n  var handleChange = function handleChange(val) {\n    if (!showCheckbox) {\n      closeAndFocusInput();\n    }\n\n    return onChange((0, _normalizeValue[\"default\"])(val));\n  };\n\n  var handleDelete = function handleDelete(option) {\n    if (Array.isArray(value)) {\n      return handleChange(value.filter(function (val) {\n        return val !== option;\n      }));\n    }\n\n    return handleChange([]);\n  };\n\n  var toggleDropdown = function toggleDropdown() {\n    if (disabled || readOnly) return;\n    setIsOpen(!isOpen);\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    if (isOpen) {\n      if (event.keyCode === _constants.ESCAPE_KEY || event.keyCode === _constants.TAB_KEY && !(showCheckbox && event.target.tagName !== 'BUTTON')) {\n        event.preventDefault();\n        closeAndFocusInput();\n      }\n    }\n\n    if (event.target !== comboboxRef.current) return;\n\n    if (event.keyCode === _constants.ENTER_KEY || event.keyCode === _constants.SPACE_KEY) {\n      event.preventDefault();\n      toggleDropdown();\n    }\n  };\n\n  var handleClick = function handleClick() {\n    if (disabled) {\n      return;\n    }\n\n    if (isOpen) {\n      dropdownRef.current.focus();\n      return;\n    }\n\n    if (readOnly) {\n      inputRef.current.focus();\n      return;\n    }\n\n    triggerRef.current.focus();\n  };\n\n  var handleTriggerClick = function handleTriggerClick(event) {\n    event.preventDefault();\n    toggleDropdown();\n  };\n\n  var handleFocus = function handleFocus() {\n    if (!readOnly) {\n      triggerRef.current.focus();\n    }\n  };\n\n  var handleBlur = function handleBlur() {\n    if (!readOnly) {\n      triggerRef.current.blur();\n    }\n  };\n\n  (0, _hooks.useOutsideClick)(dropdownContainerRef, function (event) {\n    if (event.target !== triggerRef.current.buttonRef.current && !triggerRef.current.buttonRef.current.contains(event.target)) {\n      setIsOpen(false);\n    }\n  }, isOpen);\n  (0, _hooks2.useWindowResize)(function () {\n    return setIsOpen(false);\n  }, isOpen);\n\n  var _useState3 = (0, _react.useState)(),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      chipsBoundingRect = _useState4[0],\n      setChipsBoundingRect = _useState4[1];\n\n  var refCallback = function refCallback(element) {\n    if (element) {\n      var elementRect = JSON.stringify(element.getBoundingClientRect());\n\n      if (!chipsBoundingRect || chipsBoundingRect !== elementRect) {\n        setChipsBoundingRect(elementRect);\n      }\n    }\n  };\n\n  var selectedCount = Array.isArray(value) ? value.length : 1;\n  var shouldRenderContent = (0, _helpers.hasContent)(value);\n  var shouldRenderCount = !!value && selectedCount > 0 && variant === 'default';\n  var shouldRenderButton = !readOnly && !disabled;\n  var inputTabIndex = readOnly ? tabIndex : '-1';\n  var dropdownWidth = comboboxRef.current ? comboboxRef.current.offsetWidth : 0;\n  return /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledContainer, {\n    id: id,\n    className: className,\n    style: style\n  }, /*#__PURE__*/_react[\"default\"].createElement(_label[\"default\"], {\n    id: labelId,\n    label: label,\n    labelAlignment: labelAlignment,\n    hideLabel: hideLabel,\n    required: required,\n    inputId: inputId\n  }), /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledCombobox, {\n    id: comboboxId,\n    isBare: isBare,\n    error: error,\n    disabled: disabled,\n    role: \"combobox\",\n    \"aria-controls\": dropdownId,\n    \"aria-expanded\": isOpen,\n    onClick: handleClick,\n    onKeyDown: handleKeyDown,\n    ref: comboboxRef,\n    \"aria-labelledby\": labelId,\n    variant: variant\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledInput, {\n    id: inputId,\n    role: \"textbox\",\n    \"aria-autocomplete\": \"none\",\n    tabIndex: inputTabIndex,\n    disabled: disabled,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    ref: inputRef,\n    readOnly: true\n  }), /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledChipContainer, {\n    ref: refCallback\n  }, /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n    isTrue: !shouldRenderContent\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledPlaceholder, null, placeholder)), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n    isTrue: shouldRenderContent\n  }, /*#__PURE__*/_react[\"default\"].createElement(_content[\"default\"], {\n    variant: variant,\n    chipVariant: chipVariant,\n    readOnly: readOnly,\n    disabled: disabled,\n    value: value,\n    onDelete: handleDelete\n  }))), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n    isTrue: shouldRenderCount\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledCountText, {\n    readOnly: readOnly\n  }, \"(\", selectedCount, \")\")), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n    isTrue: shouldRenderButton\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledButtonIcon, {\n    title: \"Add\",\n    variant: \"neutral\",\n    size: \"small\",\n    icon: /*#__PURE__*/_react[\"default\"].createElement(_plus[\"default\"], null),\n    onClick: handleTriggerClick,\n    disabled: disabled,\n    ref: triggerRef,\n    tabIndex: tabIndex,\n    onFocus: onFocus,\n    onBlur: onBlur\n  })), /*#__PURE__*/_react[\"default\"].createElement(_InternalOverlay[\"default\"], {\n    isVisible: isOpen,\n    positionResolver: _helpers.positionResolver,\n    onOpened: function onOpened() {\n      return dropdownRef.current.focus();\n    },\n    triggerElementRef: function triggerElementRef() {\n      return comboboxRef;\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    ref: dropdownContainerRef\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styled.StyledDropdown, {\n    id: dropdownId,\n    value: value,\n    isLoading: isLoading,\n    onChange: handleChange,\n    ref: dropdownRef,\n    width: dropdownWidth,\n    placeholder: placeholder,\n    showCheckbox: showCheckbox,\n    multiple: true\n  }, children)))), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n    isTrue: bottomHelpText\n  }, /*#__PURE__*/_react[\"default\"].createElement(_helpText[\"default\"], {\n    alignSelf: \"center\"\n  }, bottomHelpText)), /*#__PURE__*/_react[\"default\"].createElement(_RenderIf[\"default\"], {\n    isTrue: error\n  }, /*#__PURE__*/_react[\"default\"].createElement(_errorText[\"default\"], {\n    alignSelf: \"center\",\n    id: errorMessageId\n  }, error)));\n});\n\nMultiSelect.propTypes = {\n  /** A CSS class for the outer element, in addition to the component's base classes. */\n  className: _propTypes[\"default\"].string,\n\n  /** An object with custom style applied to the outer element. */\n  style: _propTypes[\"default\"].object,\n\n  /** Text label for the input. */\n  label: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\n\n  /** Describes the position of the MultiSelect label. Options include left, center and right.\n   * This value defaults to center. */\n  labelAlignment: _propTypes[\"default\"].oneOf(['left', 'center', 'right']),\n\n  /** A boolean to hide the MultiSelect label. */\n  hideLabel: _propTypes[\"default\"].bool,\n\n  /** Text that is displayed when the field is empty, to prompt the user for a valid entry. */\n  placeholder: _propTypes[\"default\"].string,\n\n  /** Specifies that an input field must be filled out before submitting the form. */\n  error: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\n\n  /** Shows the help message below the input. */\n  bottomHelpText: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].node]),\n\n  /** Specifies that an input field must be filled out before submitting the form.\n   * This value defaults to false. */\n  required: _propTypes[\"default\"].bool,\n\n  /** Specifies that an input element should be disabled. This value defaults to false. */\n  disabled: _propTypes[\"default\"].bool,\n\n  /** If is set to true, then is showed a loading symbol. */\n  isLoading: _propTypes[\"default\"].bool,\n\n  /** Specifies that an input field is read-only. This value defaults to false. */\n  readOnly: _propTypes[\"default\"].bool,\n\n  /** Specifies the tab order of an element (when the tab button is used for navigating). */\n  tabIndex: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].number, _propTypes[\"default\"].string]),\n\n  /** Specifies the variant for the input. */\n  variant: _propTypes[\"default\"].oneOf(['default', 'chip', 'bare']),\n\n  /** Specifies the variant for the chips. */\n  chipVariant: _propTypes[\"default\"].oneOf(['base', 'neutral', 'outline-brand', 'brand']),\n\n  /** Specifies the value of an input element. */\n  value: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n    name: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n    label: _propTypes[\"default\"].string,\n    value: _propTypes[\"default\"].any\n  })),\n\n  /** The action triggered when a value attribute changes. */\n  onChange: _propTypes[\"default\"].func,\n\n  /** The action triggered when the element receives focus. */\n  onFocus: _propTypes[\"default\"].func,\n\n  /** The action triggered when the element releases focus. */\n  onBlur: _propTypes[\"default\"].func,\n\n  /**\n   * This prop that should not be visible in the documentation.\n   * @ignore\n   */\n  children: _propTypes[\"default\"].node\n};\nMultiSelect.defaultProps = {\n  className: undefined,\n  style: undefined,\n  label: undefined,\n  labelAlignment: 'center',\n  hideLabel: false,\n  placeholder: null,\n  error: null,\n  bottomHelpText: null,\n  required: false,\n  disabled: false,\n  readOnly: false,\n  isLoading: false,\n  tabIndex: 0,\n  variant: 'default',\n  chipVariant: 'base',\n  value: undefined,\n  onChange: function onChange() {},\n  onFocus: function onFocus() {},\n  onBlur: function onBlur() {},\n  children: null\n};\nvar _default = MultiSelect;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}